<html>

<head>
<meta http-equiv="Content-Language" content="en-us">
<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
<link type="text/css" href="../../doxygen.css" rel="stylesheet">
<meta name="GENERATOR" content="Microsoft FrontPage 4.0">
<meta name="ProgId" content="FrontPage.Editor.Document">
<title>Image Processing Library 98</title>
</head>

<body>
<h2 align="center"><a href="http://www.mip.sdu.dk/ipl98" target="_blank"><img border="0" src="ipl_doc_header.gif" width="694" height="55"></a></h2>

</body>

</html>
<!-- Generated by Doxygen 1.2.17 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="modules.html">Modules</a> &nbsp; <a class="qindex" href="annotated.html">Data Structures</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Data Fields</a> &nbsp; </center>
<hr><h1>kernel_statistic.c</h1><div class="fragment"><pre>00001 <span class="comment">/********************************************************************</span>
00002 <span class="comment">   The Image Processing Library 98 - IPL98</span>
00003 <span class="comment">   Copyright (C) by René Dencker Eriksen - edr@mip.sdu.dk</span>
00004 <span class="comment"></span>
00005 <span class="comment">   This library is free software; you can redistribute it and/or</span>
00006 <span class="comment">   modify it under the terms of the GNU Lesser General Public</span>
00007 <span class="comment">   License as published by the Free Software Foundation. Only</span>
00008 <span class="comment">   addition is, that if the library is used in proprietary software</span>
00009 <span class="comment">   it must be stated that IPL98 was used.</span>
00010 <span class="comment"></span>
00011 <span class="comment">   This library is distributed in the hope that it will be useful,</span>
00012 <span class="comment">   but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
00013 <span class="comment">   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.</span>
00014 <span class="comment"></span>
00015 <span class="comment">   More details can be found in the file licence.txt distributed</span>
00016 <span class="comment">   with this library.</span>
00017 <span class="comment">*********************************************************************/</span>
00018 
00019 <span class="preprocessor">#include "kernel_statistic.h"</span>
00020 <span class="preprocessor">#include "../kernel_error.h"</span>
00021 <span class="preprocessor">#include &lt;math.h&gt;</span>
00022 
00023 <span class="preprocessor">#ifdef _IPL98_USING_CPP</span>
00024 <span class="preprocessor"></span><span class="keyword">namespace </span>ipl{ <span class="comment">/* use namespace if C++ */</span>
00025 <span class="keyword">extern</span> <span class="stringliteral">"C"</span> { <span class="comment">/* prevent name mangling for C functions */</span>
00026 <span class="preprocessor">#endif</span>
00027 <span class="preprocessor"></span>
<a name="l00028"></a><a class="code" href="group__statistic.html#a0">00028</a> <span class="keywordtype">void</span> <a class="code" href="group__statistic.html#a0">k_InitStatistic</a>(<a class="code" href="structTStatistic.html">TStatistic</a>* pStatistic)
00029 {
00030         pStatistic-&gt;<a class="code" href="structTStatistic.html#m0">Min</a>=0.0;
00031         pStatistic-&gt;<a class="code" href="structTStatistic.html#m1">Max</a>=0.0;
00032         pStatistic-&gt;<a class="code" href="structTStatistic.html#m2">Mean</a>=0.0;
00033         pStatistic-&gt;<a class="code" href="structTStatistic.html#m3">StdDev</a>=0.0;
00034         pStatistic-&gt;<a class="code" href="structTStatistic.html#m4">SizeOfHistogram</a>=0;
00035         pStatistic-&gt;<a class="code" href="structTStatistic.html#m5">pHistogram</a>=NULL;
00036 }
00037 
<a name="l00038"></a><a class="code" href="group__statistic.html#a1">00038</a> <span class="keywordtype">void</span> <a class="code" href="group__statistic.html#a1">k_EmptyStatistic</a>(<a class="code" href="structTStatistic.html">TStatistic</a>* pStatistic)
00039 {
00040         pStatistic-&gt;<a class="code" href="structTStatistic.html#m0">Min</a>=0.0;
00041         pStatistic-&gt;<a class="code" href="structTStatistic.html#m1">Max</a>=0.0;
00042         pStatistic-&gt;<a class="code" href="structTStatistic.html#m2">Mean</a>=0.0;
00043         pStatistic-&gt;<a class="code" href="structTStatistic.html#m3">StdDev</a>=0.0;
00044         <span class="keywordflow">if</span> (pStatistic-&gt;<a class="code" href="structTStatistic.html#m5">pHistogram</a>!=NULL)
00045         {
00046                 <span class="keywordflow">if</span> (pStatistic-&gt;<a class="code" href="structTStatistic.html#m4">SizeOfHistogram</a>==65536)
00047                 {
00048                         <span class="comment">/* if it is a IntImage set the pointer back to beginning of array! */</span>
00049                         pStatistic-&gt;<a class="code" href="structTStatistic.html#m5">pHistogram</a>-=32768;
00050                 }
00051                 free(pStatistic-&gt;<a class="code" href="structTStatistic.html#m5">pHistogram</a>);
00052                 pStatistic-&gt;<a class="code" href="structTStatistic.html#m5">pHistogram</a>=NULL;
00053         }
00054         pStatistic-&gt;<a class="code" href="structTStatistic.html#m4">SizeOfHistogram</a>=0;
00055 }
00056 
<a name="l00057"></a><a class="code" href="group__statistic.html#a2">00057</a> <span class="keywordtype">bool</span> <a class="code" href="group__statistic.html#a2">k_DeriveFloatImageStats</a>(<a class="code" href="structTStatistic.html">TStatistic</a>* pStatistic,<span class="keyword">const</span> <a class="code" href="structTFloatImage.html">TFloatImage</a>* pImage)
00058 {
00059         <span class="keywordflow">if</span> (pImage-&gt;<a class="code" href="structTFloatImage.html#m2">Origin</a>==EMPTY)
00060         {
00061                 <a class="code" href="structTString.html">TString</a> str;
00062                 <a class="code" href="group__string.html#a0">k_InitString</a>(&amp;str);
00063                 <a class="code" href="group__string.html#a15">k_AddFileAndLine</a>(str);
00064                 <a class="code" href="group__errorhandling.html#a0">k_ShowMessage</a>(IPL_ERROR,&amp;str,<span class="stringliteral">"k_DeriveFloatImageStats() Image is empty"</span>);
00065             <a class="code" href="group__string.html#a1">k_EmptyString</a>(&amp;str);
00066                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
00067         }
00068         <span class="keywordflow">else</span>
00069         {
00070                 <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> x,y;
00071                 <a class="code" href="group__valuetypes.html#a6">FLOAT32</a> Value;
00072                 <span class="keywordtype">double</span> Sum=0.0;
00073                 <span class="keywordtype">double</span> Sum2=0.0;
00074                 pStatistic-&gt;<a class="code" href="structTStatistic.html#m4">SizeOfHistogram</a>=0; <span class="comment">/* no histogram */</span>
00075                 pStatistic-&gt;<a class="code" href="structTStatistic.html#m0">Min</a>=pStatistic-&gt;<a class="code" href="structTStatistic.html#m1">Max</a>=<a class="code" href="group__floatimage__c__only.html#a6">kF_GetPixelMacro</a>(0,0,*pImage); <span class="comment">/* init min and max */</span>
00076                 <span class="keywordflow">for</span>(x=0;x&lt;pImage-&gt;<a class="code" href="structTFloatImage.html#m3">Width</a>;x++)
00077                 {
00078                         <span class="keywordflow">for</span>(y=0;y&lt;pImage-&gt;<a class="code" href="structTFloatImage.html#m4">Height</a>;y++)
00079                         {
00080                                 Value=<a class="code" href="group__floatimage__c__only.html#a6">kF_GetPixelMacro</a>(x,y,*pImage);
00081                                 <span class="keywordflow">if</span> (Value&lt;pStatistic-&gt;<a class="code" href="structTStatistic.html#m0">Min</a>) pStatistic-&gt;<a class="code" href="structTStatistic.html#m0">Min</a>=Value;
00082                                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Value&gt;pStatistic-&gt;<a class="code" href="structTStatistic.html#m1">Max</a>) pStatistic-&gt;<a class="code" href="structTStatistic.html#m1">Max</a>=Value;
00083                                 Sum+=Value;
00084                                 Sum2+=Value*Value;
00085                         }
00086                 }
00087                 pStatistic-&gt;<a class="code" href="structTStatistic.html#m2">Mean</a>=Sum/(pImage-&gt;<a class="code" href="structTFloatImage.html#m3">Width</a>*pImage-&gt;<a class="code" href="structTFloatImage.html#m4">Height</a>);
00088                 pStatistic-&gt;<a class="code" href="structTStatistic.html#m3">StdDev</a>=sqrt(Sum2/(pImage-&gt;<a class="code" href="structTFloatImage.html#m3">Width</a>*pImage-&gt;<a class="code" href="structTFloatImage.html#m4">Height</a>)-pStatistic-&gt;<a class="code" href="structTStatistic.html#m2">Mean</a>*pStatistic-&gt;<a class="code" href="structTStatistic.html#m2">Mean</a>);
00089                 <span class="keywordflow">return</span> <span class="keyword">true</span>;
00090         }
00091 }
00092 
<a name="l00093"></a><a class="code" href="group__statistic.html#a3">00093</a> <span class="keywordtype">bool</span> <a class="code" href="group__statistic.html#a3">k_DeriveIntImageStats</a>(<a class="code" href="structTStatistic.html">TStatistic</a>* pStatistic,<span class="keyword">const</span> <a class="code" href="structTIntImage.html">TIntImage</a>* pImage)
00094 {
00095         <span class="keywordflow">if</span> (pImage-&gt;<a class="code" href="structTIntImage.html#m2">Origin</a>==EMPTY)
00096         {
00097                 <a class="code" href="structTString.html">TString</a> str;
00098                 <a class="code" href="group__string.html#a0">k_InitString</a>(&amp;str);
00099                 <a class="code" href="group__string.html#a15">k_AddFileAndLine</a>(str);
00100                 <a class="code" href="group__errorhandling.html#a0">k_ShowMessage</a>(IPL_ERROR,&amp;str,<span class="stringliteral">"k_DeriveIntImageStats() Image is empty"</span>);
00101             <a class="code" href="group__string.html#a1">k_EmptyString</a>(&amp;str);
00102                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
00103         }
00104         <span class="keywordflow">else</span>
00105         {
00106                 <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> x,y;
00107                 <a class="code" href="group__valuetypes.html#a2">INT16</a> Value;
00108                 <span class="keywordtype">double</span> Sum=0.0;
00109                 <span class="keywordtype">double</span> Sum2=0.0;
00110                 pStatistic-&gt;<a class="code" href="structTStatistic.html#m5">pHistogram</a>=(<a class="code" href="group__valuetypes.html#a5">UINT32</a>*)calloc(65536,<span class="keyword">sizeof</span>(<a class="code" href="group__valuetypes.html#a5">UINT32</a>));
00111                 pStatistic-&gt;<a class="code" href="structTStatistic.html#m5">pHistogram</a>+=32768; <span class="comment">/* set the histogram pointer to the middle of array! */</span>
00112                 pStatistic-&gt;<a class="code" href="structTStatistic.html#m4">SizeOfHistogram</a>=65536;
00113                 pStatistic-&gt;<a class="code" href="structTStatistic.html#m0">Min</a>=pStatistic-&gt;<a class="code" href="structTStatistic.html#m1">Max</a>=<a class="code" href="group__intimage__c__only.html#a6">kI_GetPixelMacro</a>(0,0,*pImage); <span class="comment">/* init min and max */</span>
00114                 <span class="keywordflow">for</span>(x=0;x&lt;pImage-&gt;<a class="code" href="structTIntImage.html#m3">Width</a>;x++)
00115                 {
00116                         <span class="keywordflow">for</span>(y=0;y&lt;pImage-&gt;<a class="code" href="structTIntImage.html#m4">Height</a>;y++)
00117                         {
00118                                 Value=<a class="code" href="group__intimage__c__only.html#a6">kI_GetPixelMacro</a>(x,y,*pImage);
00119                                 <span class="keywordflow">if</span> (Value&lt;pStatistic-&gt;<a class="code" href="structTStatistic.html#m0">Min</a>) pStatistic-&gt;<a class="code" href="structTStatistic.html#m0">Min</a>=Value;
00120                                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Value&gt;pStatistic-&gt;<a class="code" href="structTStatistic.html#m1">Max</a>) pStatistic-&gt;<a class="code" href="structTStatistic.html#m1">Max</a>=Value;
00121                                 Sum+=Value;
00122                                 Sum2+=Value*Value;
00123                                 pStatistic-&gt;<a class="code" href="structTStatistic.html#m5">pHistogram</a>[Value]++;
00124                         }
00125                 }
00126                 pStatistic-&gt;<a class="code" href="structTStatistic.html#m2">Mean</a>=Sum/(pImage-&gt;<a class="code" href="structTIntImage.html#m3">Width</a>*pImage-&gt;<a class="code" href="structTIntImage.html#m4">Height</a>);
00127                 pStatistic-&gt;<a class="code" href="structTStatistic.html#m3">StdDev</a>=sqrt(Sum2/(pImage-&gt;<a class="code" href="structTIntImage.html#m3">Width</a>*pImage-&gt;<a class="code" href="structTIntImage.html#m4">Height</a>)-pStatistic-&gt;<a class="code" href="structTStatistic.html#m2">Mean</a>*pStatistic-&gt;<a class="code" href="structTStatistic.html#m2">Mean</a>);
00128                 <span class="keywordflow">return</span> <span class="keyword">true</span>;
00129         }
00130 }
00131 
<a name="l00132"></a><a class="code" href="group__statistic.html#a4">00132</a> <span class="keywordtype">bool</span> <a class="code" href="group__statistic.html#a4">k_DeriveImageStats</a>(<a class="code" href="structTStatistic.html">TStatistic</a>* pStatistic,<span class="keyword">const</span> <a class="code" href="structTImage.html">TImage</a>* pImage)
00133 {
00134         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> x,y;
00135         <a class="code" href="group__valuetypes.html#a5">UINT32</a> Value;
00136         <span class="keywordtype">double</span> Sum=0.0;
00137         <span class="keywordtype">double</span> Sum2=0.0;
00138         <span class="keywordflow">if</span> (pImage-&gt;<a class="code" href="structTImage.html#m3">Origin</a>==EMPTY)
00139         {
00140                 <a class="code" href="structTString.html">TString</a> str;
00141                 <a class="code" href="group__string.html#a0">k_InitString</a>(&amp;str);
00142                 <a class="code" href="group__string.html#a15">k_AddFileAndLine</a>(str);
00143                 <a class="code" href="group__errorhandling.html#a0">k_ShowMessage</a>(IPL_ERROR,&amp;str,<span class="stringliteral">"k_DeriveImageStats() Image is empty"</span>);
00144             <a class="code" href="group__string.html#a1">k_EmptyString</a>(&amp;str);
00145                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
00146         }
00147         <span class="comment">/* allocate histogram */</span>
00148         <span class="keywordflow">if</span> (pImage-&gt;<a class="code" href="structTImage.html#m6">Bits</a>==1)
00149         {
00150                 pStatistic-&gt;<a class="code" href="structTStatistic.html#m5">pHistogram</a>=(<a class="code" href="group__valuetypes.html#a5">UINT32</a>*)calloc(2,<span class="keyword">sizeof</span>(<a class="code" href="group__valuetypes.html#a5">UINT32</a>));
00151                 pStatistic-&gt;<a class="code" href="structTStatistic.html#m4">SizeOfHistogram</a>=2;
00152                 pStatistic-&gt;<a class="code" href="structTStatistic.html#m0">Min</a>=pStatistic-&gt;<a class="code" href="structTStatistic.html#m1">Max</a>=<a class="code" href="group__image__c__only.html#a8">k_GetPixel1bp</a>(0,0,*pImage); <span class="comment">/* init min and max */</span>
00153                 <span class="keywordflow">for</span>(x=0;x&lt;pImage-&gt;<a class="code" href="structTImage.html#m4">Width</a>;x++)
00154                 {
00155                         <span class="keywordflow">for</span>(y=0;y&lt;pImage-&gt;<a class="code" href="structTImage.html#m5">Height</a>;y++)
00156                         {
00157                                 Value=<a class="code" href="group__image__c__only.html#a8">k_GetPixel1bp</a>(x,y,*pImage);
00158                                 <span class="keywordflow">if</span> (Value&lt;pStatistic-&gt;<a class="code" href="structTStatistic.html#m0">Min</a>) pStatistic-&gt;<a class="code" href="structTStatistic.html#m0">Min</a>=Value;
00159                                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Value&gt;pStatistic-&gt;<a class="code" href="structTStatistic.html#m1">Max</a>) pStatistic-&gt;<a class="code" href="structTStatistic.html#m1">Max</a>=Value;
00160                                 Sum+=Value;
00161                                 Sum2+=Value*Value;
00162                                 pStatistic-&gt;<a class="code" href="structTStatistic.html#m5">pHistogram</a>[Value]++;
00163                         }
00164                 }
00165                 pStatistic-&gt;<a class="code" href="structTStatistic.html#m2">Mean</a>=Sum/(pImage-&gt;<a class="code" href="structTImage.html#m4">Width</a>*pImage-&gt;<a class="code" href="structTImage.html#m5">Height</a>);
00166                 pStatistic-&gt;<a class="code" href="structTStatistic.html#m3">StdDev</a>=sqrt(Sum2/(pImage-&gt;<a class="code" href="structTImage.html#m4">Width</a>*pImage-&gt;<a class="code" href="structTImage.html#m5">Height</a>)-pStatistic-&gt;<a class="code" href="structTStatistic.html#m2">Mean</a>*pStatistic-&gt;<a class="code" href="structTStatistic.html#m2">Mean</a>);
00167                 <span class="keywordflow">return</span> <span class="keyword">true</span>;
00168 
00169         }
00170         <span class="keywordflow">else</span> <span class="comment">/* either 8 or 24 b/p */</span>
00171         {
00172                 pStatistic-&gt;<a class="code" href="structTStatistic.html#m5">pHistogram</a>=(<a class="code" href="group__valuetypes.html#a5">UINT32</a>*)calloc(256,<span class="keyword">sizeof</span>(<a class="code" href="group__valuetypes.html#a5">UINT32</a>));
00173                 pStatistic-&gt;<a class="code" href="structTStatistic.html#m4">SizeOfHistogram</a>=256;
00174                 pStatistic-&gt;<a class="code" href="structTStatistic.html#m0">Min</a>=pStatistic-&gt;<a class="code" href="structTStatistic.html#m1">Max</a>=<a class="code" href="group__image__c__only.html#a9">k_GetPixel8bp</a>(0,0,*pImage); <span class="comment">/* init min and max */</span>
00175                 <span class="keywordflow">if</span> (pImage-&gt;<a class="code" href="structTImage.html#m6">Bits</a>==8)
00176                 {
00177                         pStatistic-&gt;<a class="code" href="structTStatistic.html#m0">Min</a>=pStatistic-&gt;<a class="code" href="structTStatistic.html#m1">Max</a>=<a class="code" href="group__image__c__only.html#a9">k_GetPixel8bp</a>(0,0,*pImage); <span class="comment">/* init min and max */</span>
00178                         <span class="keywordflow">for</span>(x=0;x&lt;pImage-&gt;<a class="code" href="structTImage.html#m4">Width</a>;x++)
00179                         {
00180                                 <span class="keywordflow">for</span>(y=0;y&lt;pImage-&gt;<a class="code" href="structTImage.html#m5">Height</a>;y++)
00181                                 {
00182                                         Value=<a class="code" href="group__image__c__only.html#a9">k_GetPixel8bp</a>(x,y,*pImage);
00183                                         <span class="keywordflow">if</span> (Value&lt;pStatistic-&gt;<a class="code" href="structTStatistic.html#m0">Min</a>) pStatistic-&gt;<a class="code" href="structTStatistic.html#m0">Min</a>=Value;
00184                                         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Value&gt;pStatistic-&gt;<a class="code" href="structTStatistic.html#m1">Max</a>) pStatistic-&gt;<a class="code" href="structTStatistic.html#m1">Max</a>=Value;
00185                                         Sum+=Value;
00186                                         Sum2+=Value*Value;
00187                                         pStatistic-&gt;<a class="code" href="structTStatistic.html#m5">pHistogram</a>[Value]++;
00188                                 }
00189                         }
00190                         pStatistic-&gt;<a class="code" href="structTStatistic.html#m2">Mean</a>=Sum/(pImage-&gt;<a class="code" href="structTImage.html#m4">Width</a>*pImage-&gt;<a class="code" href="structTImage.html#m5">Height</a>);
00191                         pStatistic-&gt;<a class="code" href="structTStatistic.html#m3">StdDev</a>=sqrt(Sum2/(pImage-&gt;<a class="code" href="structTImage.html#m4">Width</a>*pImage-&gt;<a class="code" href="structTImage.html#m5">Height</a>)-pStatistic-&gt;<a class="code" href="structTStatistic.html#m2">Mean</a>*pStatistic-&gt;<a class="code" href="structTStatistic.html#m2">Mean</a>);
00192                         <span class="keywordflow">return</span> <span class="keyword">true</span>;
00193                 }
00194                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pImage-&gt;<a class="code" href="structTImage.html#m6">Bits</a>==24)
00195                 {
00196                         Value=<a class="code" href="group__image__c__only.html#a10">k_GetPixel24bp</a>(0,0,*pImage);
00197                         pStatistic-&gt;<a class="code" href="structTStatistic.html#m0">Min</a>=pStatistic-&gt;<a class="code" href="structTStatistic.html#m1">Max</a>=(int)((<a class="code" href="group__palette.html#a11">k_PalGetRVal</a>(Value)+<a class="code" href="group__palette.html#a12">k_PalGetGVal</a>(Value)+<a class="code" href="group__palette.html#a13">k_PalGetBVal</a>(Value))/3+0.5);
00198                         <span class="keywordflow">for</span>(x=0;x&lt;pImage-&gt;<a class="code" href="structTImage.html#m4">Width</a>;x++)
00199                         {
00200                                 <span class="keywordflow">for</span>(y=0;y&lt;pImage-&gt;<a class="code" href="structTImage.html#m5">Height</a>;y++)
00201                                 {
00202                                         Value=<a class="code" href="group__image__c__only.html#a10">k_GetPixel24bp</a>(x,y,*pImage);
00203                                         Value=(int)((<a class="code" href="group__palette.html#a11">k_PalGetRVal</a>(Value)+<a class="code" href="group__palette.html#a12">k_PalGetGVal</a>(Value)+<a class="code" href="group__palette.html#a13">k_PalGetBVal</a>(Value))/3+0.5);
00204                                         <span class="keywordflow">if</span> (Value&lt;pStatistic-&gt;<a class="code" href="structTStatistic.html#m0">Min</a>) pStatistic-&gt;<a class="code" href="structTStatistic.html#m0">Min</a>=Value;
00205                                         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Value&gt;pStatistic-&gt;<a class="code" href="structTStatistic.html#m1">Max</a>) pStatistic-&gt;<a class="code" href="structTStatistic.html#m1">Max</a>=Value;
00206                                         Sum+=Value;
00207                                         Sum2+=Value*Value;
00208                                         pStatistic-&gt;<a class="code" href="structTStatistic.html#m5">pHistogram</a>[Value]++;
00209                                 }
00210                         }
00211                         pStatistic-&gt;<a class="code" href="structTStatistic.html#m2">Mean</a>=Sum/(pImage-&gt;<a class="code" href="structTImage.html#m4">Width</a>*pImage-&gt;<a class="code" href="structTImage.html#m5">Height</a>);
00212                         pStatistic-&gt;<a class="code" href="structTStatistic.html#m3">StdDev</a>=sqrt(Sum2/(pImage-&gt;<a class="code" href="structTImage.html#m4">Width</a>*pImage-&gt;<a class="code" href="structTImage.html#m5">Height</a>)-pStatistic-&gt;<a class="code" href="structTStatistic.html#m2">Mean</a>*pStatistic-&gt;<a class="code" href="structTStatistic.html#m2">Mean</a>);
00213                         <span class="keywordflow">return</span> <span class="keyword">true</span>;
00214                 }
00215                 <span class="keywordflow">else</span>
00216                 {
00217                         <a class="code" href="structTString.html">TString</a> str;
00218                         <a class="code" href="group__string.html#a0">k_InitString</a>(&amp;str);
00219                         <a class="code" href="group__string.html#a15">k_AddFileAndLine</a>(str);
00220                         <a class="code" href="group__errorhandling.html#a0">k_ShowMessage</a>(IPL_ERROR,&amp;str,<span class="stringliteral">"k_DeriveImageStats() Image with %d b/p not supported"</span>,pImage-&gt;<a class="code" href="structTImage.html#m6">Bits</a>);
00221                         <a class="code" href="group__string.html#a1">k_EmptyString</a>(&amp;str);
00222                         <span class="keywordflow">return</span> <span class="keyword">false</span>;
00223                 }
00224         }
00225 }
00226 
<a name="l00227"></a><a class="code" href="group__statistic.html#a5">00227</a> <span class="keywordtype">bool</span> <a class="code" href="group__statistic.html#a5">k_DerivePixelGroupStats</a>(<a class="code" href="structTStatistic.html">TStatistic</a>* pStatistic,<span class="keyword">const</span> <a class="code" href="structTPixelGroup.html">TPixelGroup</a>* pPixelGroup)
00228 {
00229         <span class="keywordflow">if</span> (pPixelGroup-&gt;<a class="code" href="structTPixelGroup.html#m6">NumberOfPixels</a>==0)
00230         {
00231                 <a class="code" href="structTString.html">TString</a> str;
00232                 <a class="code" href="group__string.html#a0">k_InitString</a>(&amp;str);
00233                 <a class="code" href="group__string.html#a15">k_AddFileAndLine</a>(str);
00234                 <a class="code" href="group__errorhandling.html#a0">k_ShowMessage</a>(IPL_ERROR,&amp;str,<span class="stringliteral">"k_DerivePixelGroupStats() No positions available"</span>);
00235             <a class="code" href="group__string.html#a1">k_EmptyString</a>(&amp;str);
00236                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
00237         }
00238         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="group__pixelgroup.html#a12">k_ColorsAvailableGroup</a>(pPixelGroup)==<span class="keyword">false</span>)
00239         {
00240                 <a class="code" href="structTString.html">TString</a> str;
00241                 <a class="code" href="group__string.html#a0">k_InitString</a>(&amp;str);
00242                 <a class="code" href="group__string.html#a15">k_AddFileAndLine</a>(str);
00243                 <a class="code" href="group__errorhandling.html#a0">k_ShowMessage</a>(IPL_ERROR,&amp;str,<span class="stringliteral">"k_DerivePixelGroupStats() No color values available"</span>);
00244             <a class="code" href="group__string.html#a1">k_EmptyString</a>(&amp;str);
00245                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
00246         }
00247         <span class="keywordflow">else</span>
00248         {
00249                 <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> x;
00250                 <a class="code" href="group__valuetypes.html#a5">UINT32</a> Value;
00251                 <span class="keywordtype">double</span> Sum=0.0;
00252                 <span class="keywordtype">double</span> Sum2=0.0;
00253                 pStatistic-&gt;<a class="code" href="structTStatistic.html#m4">SizeOfHistogram</a>=0; <span class="comment">/* no histogram */</span>
00254                 pStatistic-&gt;<a class="code" href="structTStatistic.html#m0">Min</a>=pStatistic-&gt;<a class="code" href="structTStatistic.html#m1">Max</a>=pPixelGroup-&gt;<a class="code" href="structTPixelGroup.html#m9">pColor</a>[0]; <span class="comment">/* init min and max */</span>
00255                 <span class="keywordflow">for</span>(x=0;x&lt;pPixelGroup-&gt;<a class="code" href="structTPixelGroup.html#m6">NumberOfPixels</a>;x++)
00256                 {
00257                         Value=pPixelGroup-&gt;<a class="code" href="structTPixelGroup.html#m9">pColor</a>[x];
00258                         <span class="keywordflow">if</span> (Value&lt;pStatistic-&gt;<a class="code" href="structTStatistic.html#m0">Min</a>) pStatistic-&gt;<a class="code" href="structTStatistic.html#m0">Min</a>=Value;
00259                         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Value&gt;pStatistic-&gt;<a class="code" href="structTStatistic.html#m1">Max</a>) pStatistic-&gt;<a class="code" href="structTStatistic.html#m1">Max</a>=Value;
00260                         Sum+=Value;
00261                         Sum2+=Value*Value;
00262                 }
00263                 pStatistic-&gt;<a class="code" href="structTStatistic.html#m2">Mean</a>=Sum/pPixelGroup-&gt;<a class="code" href="structTPixelGroup.html#m6">NumberOfPixels</a>;
00264                 pStatistic-&gt;<a class="code" href="structTStatistic.html#m3">StdDev</a>=sqrt(Sum2/pPixelGroup-&gt;<a class="code" href="structTPixelGroup.html#m6">NumberOfPixels</a>-pStatistic-&gt;<a class="code" href="structTStatistic.html#m2">Mean</a>*pStatistic-&gt;<a class="code" href="structTStatistic.html#m2">Mean</a>);
00265                 <span class="keywordflow">return</span> <span class="keyword">true</span>;
00266         }
00267 }
00268 
<a name="l00269"></a><a class="code" href="group__statistic.html#a6">00269</a> <span class="keywordtype">void</span> <a class="code" href="group__statistic.html#a6">k_PrintStatisticInfo</a>(<span class="keyword">const</span> <a class="code" href="structTStatistic.html">TStatistic</a>* pInfo)
00270 {
00271         printf(<span class="stringliteral">"************** Statistic info ******************\n"</span>);
00272         printf(<span class="stringliteral">" Min=% .g Max=% .g Mean=% .g Standard deviation=% .g\n"</span>,
00273                 pInfo-&gt;<a class="code" href="structTStatistic.html#m0">Min</a>,pInfo-&gt;<a class="code" href="structTStatistic.html#m1">Max</a>,pInfo-&gt;<a class="code" href="structTStatistic.html#m2">Mean</a>,pInfo-&gt;<a class="code" href="structTStatistic.html#m3">StdDev</a>);
00274         printf(<span class="stringliteral">" Size of histogram=%d\n"</span>,pInfo-&gt;<a class="code" href="structTStatistic.html#m4">SizeOfHistogram</a>);
00275 }
00276 
00277 <span class="preprocessor">#ifdef _IPL98_USING_CPP</span>
00278 <span class="preprocessor"></span>} <span class="comment">/* end of extern "C" */</span>
00279 } <span class="comment">/* end namespace ipl */</span>
00280 <span class="preprocessor">#endif</span>
</pre></div><!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html>

<head>
<meta name="GENERATOR" content="Microsoft FrontPage 4.0">
<title>Tag</title>
<base target="_top">
</head>

<body bgcolor="#FFFFFF">

<hr>

<p align="right"><font size="2"><em>Updated <!--webbot bot="Timestamp" s-type="EDITED" s-format="%d. %B %Y %H:%M" startspan -->21. juli 2002 12:29<!--webbot bot="Timestamp" endspan i-checksum="38834" --> by
<a href="http://www.mip.sdu.dk/~edr/">René Dencker
Eriksen</a>(<a href="mailto:edr@mip.sdu.dk">edr@mip.sdu.dk</a>)</em></font></p>
</body>
</html>
