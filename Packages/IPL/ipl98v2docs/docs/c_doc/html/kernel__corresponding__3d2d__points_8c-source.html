<html>

<head>
<meta http-equiv="Content-Language" content="en-us">
<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
<link type="text/css" href="../../doxygen.css" rel="stylesheet">
<meta name="GENERATOR" content="Microsoft FrontPage 4.0">
<meta name="ProgId" content="FrontPage.Editor.Document">
<title>Image Processing Library 98</title>
</head>

<body>
<h2 align="center"><a href="http://www.mip.sdu.dk/ipl98" target="_blank"><img border="0" src="ipl_doc_header.gif" width="694" height="55"></a></h2>

</body>

</html>
<!-- Generated by Doxygen 1.2.17 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="modules.html">Modules</a> &nbsp; <a class="qindex" href="annotated.html">Data Structures</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Data Fields</a> &nbsp; </center>
<hr><h1>kernel_corresponding_3d2d_points.c</h1><div class="fragment"><pre>00001 <span class="comment">/********************************************************************</span>
00002 <span class="comment">   The Image Processing Library 98 - IPL98</span>
00003 <span class="comment">   Copyright (C) by René Dencker Eriksen - edr@mip.sdu.dk</span>
00004 <span class="comment"></span>
00005 <span class="comment">   This library is free software; you can redistribute it and/or</span>
00006 <span class="comment">   modify it under the terms of the GNU Lesser General Public</span>
00007 <span class="comment">   License as published by the Free Software Foundation. Only</span>
00008 <span class="comment">   addition is, that if the library is used in proprietary software</span>
00009 <span class="comment">   it must be stated that IPL98 was used.</span>
00010 <span class="comment"></span>
00011 <span class="comment">   This library is distributed in the hope that it will be useful,</span>
00012 <span class="comment">   but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
00013 <span class="comment">   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.</span>
00014 <span class="comment"></span>
00015 <span class="comment">   More details can be found in the file licence.txt distributed</span>
00016 <span class="comment">   with this library.</span>
00017 <span class="comment">*********************************************************************/</span>
00018 
00019 <span class="preprocessor">#include "kernel_corresponding_3d2d_points.h"</span>
00020 <span class="preprocessor">#include "kernel_string.h"</span>
00021 <span class="preprocessor">#include "kernel_error.h"</span>
00022 <span class="preprocessor">#include "kernel_io.h"</span>
00023 <span class="preprocessor">#include &lt;stdlib.h&gt;</span>
00024 <span class="preprocessor">#include &lt;string.h&gt;</span>
00025 
00026 <span class="preprocessor">#ifdef _IPL98_USING_CPP</span>
00027 <span class="preprocessor"></span><span class="keyword">namespace </span>ipl{ <span class="comment">/* use namespace if C++ */</span>
00028 <span class="keyword">extern</span> <span class="stringliteral">"C"</span> { <span class="comment">/* prevent name mangling for C functions */</span>
00029 <span class="preprocessor">#endif</span>
00030 <span class="preprocessor"></span>
<a name="l00031"></a><a class="code" href="group__corresponding3d2dpoints.html#a0">00031</a> <span class="keywordtype">void</span> <a class="code" href="group__corresponding3d2dpoints.html#a0">k_Init3D2DPoints</a>(<a class="code" href="structT3D2DPoints.html">T3D2DPoints</a>* pInfo)
00032 {
00033         pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m0">pSet</a>=NULL;
00034         pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m1">NumberOfSets</a>=0;
00035         pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m2">AllocatedSets</a>=0;
00036 }
00037 
<a name="l00038"></a><a class="code" href="group__corresponding3d2dpoints.html#a1">00038</a> <span class="keywordtype">void</span> <a class="code" href="group__corresponding3d2dpoints.html#a1">k_Empty3D2DPoints</a>(<a class="code" href="structT3D2DPoints.html">T3D2DPoints</a>* pInfo)
00039 {
00040         <span class="keywordflow">if</span> (pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m0">pSet</a>!=NULL)
00041                 free(pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m0">pSet</a>);
00042         <a class="code" href="group__corresponding3d2dpoints.html#a0">k_Init3D2DPoints</a>(pInfo);
00043 }
00044 
<a name="l00045"></a><a class="code" href="group__corresponding3d2dpoints.html#a2">00045</a> <span class="keywordtype">void</span> <a class="code" href="group__corresponding3d2dpoints.html#a2">k_Alloc3D2DPoints</a>(<a class="code" href="structT3D2DPoints.html">T3D2DPoints</a>* pInfo,<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> InitialSize)
00046 {
00047         <a class="code" href="group__corresponding3d2dpoints.html#a1">k_Empty3D2DPoints</a>(pInfo);
00048         <span class="keywordflow">if</span> (InitialSize==0)
00049                 InitialSize=1; <span class="comment">/* minimum one allocated set of points */</span>
00050         pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m0">pSet</a>=(<a class="code" href="structTSinglePointSet.html">TSinglePointSet</a>*)malloc(InitialSize*<span class="keyword">sizeof</span>(<a class="code" href="structTSinglePointSet.html">TSinglePointSet</a>));
00051         pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m1">NumberOfSets</a>=0; <span class="comment">/* just in case! */</span>
00052         pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m2">AllocatedSets</a>=InitialSize; <span class="comment">/* internal use */</span>
00053 }
00054 
<a name="l00055"></a><a class="code" href="group__corresponding3d2dpoints.html#a3">00055</a> <span class="keywordtype">void</span> <a class="code" href="group__corresponding3d2dpoints.html#a3">k_ReAlloc3D2DPoints</a>(<a class="code" href="structT3D2DPoints.html">T3D2DPoints</a>* pInfo,<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> NewSize)
00056 {
00057         <span class="keywordflow">if</span> ((pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m0">pSet</a>=(<a class="code" href="structTSinglePointSet.html">TSinglePointSet</a>*)realloc(pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m0">pSet</a>,NewSize*<span class="keyword">sizeof</span>(<a class="code" href="structTSinglePointSet.html">TSinglePointSet</a>)))!=NULL)
00058         {
00059                 <span class="keywordflow">if</span> (NewSize&lt;pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m1">NumberOfSets</a>)
00060                         pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m1">NumberOfSets</a>=NewSize;
00061 
00062                 pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m2">AllocatedSets</a>=NewSize; <span class="comment">/* internal use */</span>
00063         }
00064         <span class="keywordflow">else</span>
00065         {
00066                 <a class="code" href="structTString.html">TString</a> str;
00067                 <a class="code" href="group__string.html#a0">k_InitString</a>(&amp;str);
00068                 <a class="code" href="group__string.html#a15">k_AddFileAndLine</a>(str);
00069                 <a class="code" href="group__errorhandling.html#a0">k_ShowMessage</a>(IPL_ERROR,&amp;str,<span class="stringliteral">"k_ReAlloc3D2DPoints() Realloc failed"</span>);
00070                 <a class="code" href="group__string.html#a1">k_EmptyString</a>(&amp;str);
00071         }
00072 }
00073 
<a name="l00074"></a><a class="code" href="group__corresponding3d2dpoints.html#a4">00074</a> <span class="keywordtype">void</span> <a class="code" href="group__corresponding3d2dpoints.html#a4">k_AdjustSizeOf3D2DPoints</a>(<a class="code" href="structT3D2DPoints.html">T3D2DPoints</a>* pInfo)
00075 {
00076         <span class="keywordflow">if</span> ((pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m0">pSet</a>=(<a class="code" href="structTSinglePointSet.html">TSinglePointSet</a>*)realloc(pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m0">pSet</a>,pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m1">NumberOfSets</a>*<span class="keyword">sizeof</span>(<a class="code" href="structTSinglePointSet.html">TSinglePointSet</a>)))!=NULL)
00077         {
00078                 pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m2">AllocatedSets</a>=pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m1">NumberOfSets</a>; <span class="comment">/* internal use */</span>
00079         }
00080         <span class="keywordflow">else</span>
00081         {
00082                 <a class="code" href="structTString.html">TString</a> str;
00083                 <a class="code" href="group__string.html#a0">k_InitString</a>(&amp;str);
00084                 <a class="code" href="group__string.html#a15">k_AddFileAndLine</a>(str);
00085                 <a class="code" href="group__errorhandling.html#a0">k_ShowMessage</a>(IPL_ERROR,&amp;str,<span class="stringliteral">"k_AdjustSizeOf3D2DPoints() Realloc failed"</span>);
00086                 <a class="code" href="group__string.html#a1">k_EmptyString</a>(&amp;str);
00087         }
00088 }
00089 
<a name="l00090"></a><a class="code" href="group__corresponding3d2dpoints.html#a5">00090</a> <span class="keywordtype">bool</span> <a class="code" href="group__corresponding3d2dpoints.html#a5">k_SetAll3DPointsToNotUsed</a>(<a class="code" href="structT3D2DPoints.html">T3D2DPoints</a>* pInfo)
00091 {
00092         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> count;
00093         <span class="keywordtype">bool</span> ReturnValue=<span class="keyword">true</span>;
00094         <span class="keywordflow">if</span> (pInfo==NULL)
00095         {
00096                 <a class="code" href="structTString.html">TString</a> str;
00097                 <a class="code" href="group__string.html#a0">k_InitString</a>(&amp;str);
00098                 <a class="code" href="group__string.html#a15">k_AddFileAndLine</a>(str);
00099                 <a class="code" href="group__errorhandling.html#a0">k_ShowMessage</a>(IPL_ERROR,&amp;str,<span class="stringliteral">"k_SetAll3DPointsToNotUsed() pInfo is NULL"</span>);
00100                 <a class="code" href="group__string.html#a1">k_EmptyString</a>(&amp;str);
00101                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
00102         }
00103         <span class="keywordflow">for</span>(count=0; count&lt;pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m1">NumberOfSets</a>; count++)
00104         {
00105                 <span class="keywordflow">if</span> (pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m0">pSet</a>[count].<a class="code" href="structTSinglePointSet.html#m3">Pnt2DInUse</a>==<span class="keyword">false</span>)
00106                 {
00107                         ReturnValue=<span class="keyword">false</span>;
00108                 }
00109                 pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m0">pSet</a>[count].<a class="code" href="structTSinglePointSet.html#m1">Pnt3DInUse</a>=<span class="keyword">false</span>;
00110         }
00111         <span class="keywordflow">return</span> ReturnValue;
00112 }
00113 
<a name="l00114"></a><a class="code" href="group__corresponding3d2dpoints.html#a6">00114</a> <span class="keywordtype">bool</span> <a class="code" href="group__corresponding3d2dpoints.html#a6">k_SetAll2DPointsToNotUsed</a>(<a class="code" href="structT3D2DPoints.html">T3D2DPoints</a>* pInfo)
00115 {
00116         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> count;
00117         <span class="keywordtype">bool</span> ReturnValue=<span class="keyword">true</span>;
00118         <span class="keywordflow">if</span> (pInfo==NULL)
00119         {
00120                 <a class="code" href="structTString.html">TString</a> str;
00121                 <a class="code" href="group__string.html#a0">k_InitString</a>(&amp;str);
00122                 <a class="code" href="group__string.html#a15">k_AddFileAndLine</a>(str);
00123                 <a class="code" href="group__errorhandling.html#a0">k_ShowMessage</a>(IPL_ERROR,&amp;str,<span class="stringliteral">"k_SetAll2DPointsToNotUsed() pInfo is NULL"</span>);
00124                 <a class="code" href="group__string.html#a1">k_EmptyString</a>(&amp;str);
00125                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
00126         }
00127         <span class="keywordflow">for</span>(count=0; count&lt;pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m1">NumberOfSets</a>; count++)
00128         {
00129                 <span class="keywordflow">if</span> (pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m0">pSet</a>[count].<a class="code" href="structTSinglePointSet.html#m1">Pnt3DInUse</a>==<span class="keyword">false</span>)
00130                 {
00131                         ReturnValue=<span class="keyword">false</span>;
00132                 }
00133                 pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m0">pSet</a>[count].<a class="code" href="structTSinglePointSet.html#m3">Pnt2DInUse</a>=<span class="keyword">false</span>;
00134         }
00135         <span class="keywordflow">return</span> ReturnValue;
00136 }
00137 
<a name="l00138"></a><a class="code" href="group__corresponding3d2dpoints.html#a7">00138</a> <span class="keywordtype">bool</span> <a class="code" href="group__corresponding3d2dpoints.html#a7">k_SetAllIdsToNotUsed</a>(<a class="code" href="structT3D2DPoints.html">T3D2DPoints</a>* pInfo)
00139 {
00140         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> count;
00141         <span class="keywordflow">if</span> (pInfo==NULL)
00142         {
00143                 <a class="code" href="structTString.html">TString</a> str;
00144                 <a class="code" href="group__string.html#a0">k_InitString</a>(&amp;str);
00145                 <a class="code" href="group__string.html#a15">k_AddFileAndLine</a>(str);
00146                 <a class="code" href="group__errorhandling.html#a0">k_ShowMessage</a>(IPL_ERROR,&amp;str,<span class="stringliteral">"k_SetAllIdsToNotUsed() pInfo is NULL"</span>);
00147                 <a class="code" href="group__string.html#a1">k_EmptyString</a>(&amp;str);
00148                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
00149         }
00150         <span class="keywordflow">for</span>(count=0; count&lt;pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m1">NumberOfSets</a>; count++)
00151         {
00152                 pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m0">pSet</a>[count].<a class="code" href="structTSinglePointSet.html#m5">IdInUse</a>=<span class="keyword">false</span>;
00153         }
00154         <span class="keywordflow">return</span> <span class="keyword">true</span>;
00155 }
00156 
<a name="l00157"></a><a class="code" href="group__corresponding3d2dpoints.html#a12">00157</a> <span class="keywordtype">bool</span> <a class="code" href="group__corresponding3d2dpoints.html#a12">k_AddPointSetAndIdTo3D2DPoints</a>(<span class="keyword">const</span> <a class="code" href="structT3DFloat.html">T3DFloat</a>* pPnt3D, <span class="keyword">const</span> <a class="code" href="structT2DFloat.html">T2DFloat</a>* pPnt2D,
00158                                                                         <span class="keywordtype">int</span> Id, <a class="code" href="structT3D2DPoints.html">T3D2DPoints</a>* pInfo)
00159 {
00160         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> count;
00161         <span class="keywordflow">if</span> (pInfo==NULL)
00162         {
00163                 <a class="code" href="structTString.html">TString</a> str;
00164                 <a class="code" href="group__string.html#a0">k_InitString</a>(&amp;str);
00165                 <a class="code" href="group__string.html#a15">k_AddFileAndLine</a>(str);
00166                 <a class="code" href="group__errorhandling.html#a0">k_ShowMessage</a>(IPL_ERROR,&amp;str,<span class="stringliteral">"k_AddPointSetAndIdTo3D2DPoints() pInfo is NULL"</span>);
00167                 <a class="code" href="group__string.html#a1">k_EmptyString</a>(&amp;str);
00168                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
00169         }
00170         <span class="comment">/* check if Id is unique */</span>
00171         <span class="keywordflow">for</span>(count=0; count&lt;pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m1">NumberOfSets</a>; count++)
00172         {
00173                 <span class="keywordflow">if</span> (pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m0">pSet</a>[count].<a class="code" href="structTSinglePointSet.html#m4">Id</a> == Id)
00174                 {
00175                         <a class="code" href="structTString.html">TString</a> str;
00176                         <a class="code" href="group__string.html#a0">k_InitString</a>(&amp;str);
00177                         <a class="code" href="group__string.html#a15">k_AddFileAndLine</a>(str);
00178                         <a class="code" href="group__errorhandling.html#a0">k_ShowMessage</a>(IPL_ERROR,&amp;str,<span class="stringliteral">"k_AddPointSetAndIdTo3D2DPoints() Id=%d not unique"</span>,Id);
00179                         <a class="code" href="group__string.html#a1">k_EmptyString</a>(&amp;str);
00180                         <span class="keywordflow">return</span> <span class="keyword">false</span>;
00181                 }
00182         }
00183         <span class="keywordflow">if</span> (pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m1">NumberOfSets</a>==pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m2">AllocatedSets</a>)
00184         {
00185                 <span class="comment">/* allocate 2 times previous allocated memory or 2 if memory never allocated before */</span>
00186                 pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m2">AllocatedSets</a> = 
00187                         (pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m2">AllocatedSets</a>==0) ? 2 : 2*pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m2">AllocatedSets</a>;
00188 
00189                 <a class="code" href="group__corresponding3d2dpoints.html#a3">k_ReAlloc3D2DPoints</a>(pInfo,pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m2">AllocatedSets</a>);
00190         }
00191         <span class="comment">/* insert point set and increment total number of point sets variable */</span>
00192         pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m0">pSet</a>[pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m1">NumberOfSets</a>].Pnt3D = (*pPnt3D);
00193         pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m0">pSet</a>[pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m1">NumberOfSets</a>].Pnt3DInUse = <span class="keyword">true</span>;
00194         pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m0">pSet</a>[pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m1">NumberOfSets</a>].Pnt2D = (*pPnt2D);
00195         pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m0">pSet</a>[pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m1">NumberOfSets</a>].Pnt2DInUse = <span class="keyword">true</span>;
00196         pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m0">pSet</a>[pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m1">NumberOfSets</a>].Id = Id;
00197         pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m0">pSet</a>[pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m1">NumberOfSets</a>].IdInUse = <span class="keyword">true</span>;
00198         pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m1">NumberOfSets</a>++;
00199         <span class="keywordflow">return</span> <span class="keyword">true</span>;
00200 }
00201 
<a name="l00202"></a><a class="code" href="group__corresponding3d2dpoints.html#a13">00202</a> <span class="keywordtype">bool</span> <a class="code" href="group__corresponding3d2dpoints.html#a13">k_AddPoint3DAndIdTo3D2DPoints</a>(<span class="keyword">const</span> <a class="code" href="structT3DFloat.html">T3DFloat</a>* pPnt3D, <span class="keywordtype">int</span> Id, <a class="code" href="structT3D2DPoints.html">T3D2DPoints</a>* pInfo)
00203 {
00204         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> count;
00205         <span class="keywordflow">if</span> (pInfo==NULL)
00206         {
00207                 <a class="code" href="structTString.html">TString</a> str;
00208                 <a class="code" href="group__string.html#a0">k_InitString</a>(&amp;str);
00209                 <a class="code" href="group__string.html#a15">k_AddFileAndLine</a>(str);
00210                 <a class="code" href="group__errorhandling.html#a0">k_ShowMessage</a>(IPL_ERROR,&amp;str,<span class="stringliteral">"k_AddPoint3DAndIdTo3D2DPoints() pInfo is NULL"</span>);
00211                 <a class="code" href="group__string.html#a1">k_EmptyString</a>(&amp;str);
00212                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
00213         }
00214         <span class="comment">/* check if Id is unique */</span>
00215         <span class="keywordflow">for</span>(count=0; count&lt;pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m1">NumberOfSets</a>; count++)
00216         {
00217                 <span class="keywordflow">if</span> (pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m0">pSet</a>[count].<a class="code" href="structTSinglePointSet.html#m4">Id</a> == Id)
00218                 {
00219                         <a class="code" href="structTString.html">TString</a> str;
00220                         <a class="code" href="group__string.html#a0">k_InitString</a>(&amp;str);
00221                         <a class="code" href="group__string.html#a15">k_AddFileAndLine</a>(str);
00222                         <a class="code" href="group__errorhandling.html#a0">k_ShowMessage</a>(IPL_ERROR,&amp;str,<span class="stringliteral">"k_AddPoint3DAndIdTo3D2DPoints() Id=%d not unique"</span>,Id);
00223                         <a class="code" href="group__string.html#a1">k_EmptyString</a>(&amp;str);
00224                         <span class="keywordflow">return</span> <span class="keyword">false</span>;
00225                 }
00226         }
00227         <span class="keywordflow">if</span> (pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m1">NumberOfSets</a>==pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m2">AllocatedSets</a>)
00228         {
00229                 <span class="comment">/* allocate 2 times previous allocated memory or 2 if memory never allocated before */</span>
00230                 pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m2">AllocatedSets</a> = 
00231                         (pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m2">AllocatedSets</a>==0) ? 2 : 2*pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m2">AllocatedSets</a>;
00232 
00233                 <a class="code" href="group__corresponding3d2dpoints.html#a3">k_ReAlloc3D2DPoints</a>(pInfo,pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m2">AllocatedSets</a>);
00234         }
00235         <span class="comment">/* insert point set and increment total number of point sets variable */</span>
00236         pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m0">pSet</a>[pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m1">NumberOfSets</a>].Pnt3D = (*pPnt3D);
00237         pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m0">pSet</a>[pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m1">NumberOfSets</a>].Pnt3DInUse = <span class="keyword">true</span>;
00238         pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m0">pSet</a>[pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m1">NumberOfSets</a>].Pnt2DInUse = <span class="keyword">false</span>;
00239         pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m0">pSet</a>[pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m1">NumberOfSets</a>].Id = Id;
00240         pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m0">pSet</a>[pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m1">NumberOfSets</a>].IdInUse = <span class="keyword">true</span>;
00241         pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m1">NumberOfSets</a>++;
00242         <span class="keywordflow">return</span> <span class="keyword">true</span>;
00243 }
00244 
<a name="l00245"></a><a class="code" href="group__corresponding3d2dpoints.html#a14">00245</a> <span class="keywordtype">bool</span> <a class="code" href="group__corresponding3d2dpoints.html#a14">k_AddPoint2DAndIdTo3D2DPoints</a>(<span class="keyword">const</span> <a class="code" href="structT2DFloat.html">T2DFloat</a>* pPnt2D, <span class="keywordtype">int</span> Id, <a class="code" href="structT3D2DPoints.html">T3D2DPoints</a>* pInfo)
00246 {
00247         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> count;
00248         <span class="keywordflow">if</span> (pInfo==NULL)
00249         {
00250                 <a class="code" href="structTString.html">TString</a> str;
00251                 <a class="code" href="group__string.html#a0">k_InitString</a>(&amp;str);
00252                 <a class="code" href="group__string.html#a15">k_AddFileAndLine</a>(str);
00253                 <a class="code" href="group__errorhandling.html#a0">k_ShowMessage</a>(IPL_ERROR,&amp;str,<span class="stringliteral">"k_AddPoint2DAndIdTo3D2DPoints() pInfo is NULL"</span>);
00254                 <a class="code" href="group__string.html#a1">k_EmptyString</a>(&amp;str);
00255                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
00256         }
00257         <span class="comment">/* check if Id is unique */</span>
00258         <span class="keywordflow">for</span>(count=0; count&lt;pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m1">NumberOfSets</a>; count++)
00259         {
00260                 <span class="keywordflow">if</span> (pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m0">pSet</a>[count].<a class="code" href="structTSinglePointSet.html#m4">Id</a> == Id)
00261                 {
00262                         <a class="code" href="structTString.html">TString</a> str;
00263                         <a class="code" href="group__string.html#a0">k_InitString</a>(&amp;str);
00264                         <a class="code" href="group__string.html#a15">k_AddFileAndLine</a>(str);
00265                         <a class="code" href="group__errorhandling.html#a0">k_ShowMessage</a>(IPL_ERROR,&amp;str,<span class="stringliteral">"k_AddPoint2DAndIdTo3D2DPoints() Id=%d not unique"</span>,Id);
00266                         <a class="code" href="group__string.html#a1">k_EmptyString</a>(&amp;str);
00267                         <span class="keywordflow">return</span> <span class="keyword">false</span>;
00268                 }
00269         }
00270         <span class="keywordflow">if</span> (pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m1">NumberOfSets</a>==pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m2">AllocatedSets</a>)
00271         {
00272                 <span class="comment">/* allocate 2 times previous allocated memory or 2 if memory never allocated before */</span>
00273                 pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m2">AllocatedSets</a> = 
00274                         (pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m2">AllocatedSets</a>==0) ? 2 : 2*pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m2">AllocatedSets</a>;
00275 
00276                 <a class="code" href="group__corresponding3d2dpoints.html#a3">k_ReAlloc3D2DPoints</a>(pInfo,pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m2">AllocatedSets</a>);
00277         }
00278         <span class="comment">/* insert point set and increment total number of point sets variable */</span>
00279         pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m0">pSet</a>[pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m1">NumberOfSets</a>].Pnt3DInUse = <span class="keyword">false</span>;
00280         pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m0">pSet</a>[pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m1">NumberOfSets</a>].Pnt2D = (*pPnt2D);
00281         pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m0">pSet</a>[pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m1">NumberOfSets</a>].Pnt2DInUse = <span class="keyword">true</span>;
00282         pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m0">pSet</a>[pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m1">NumberOfSets</a>].Id = Id;
00283         pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m0">pSet</a>[pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m1">NumberOfSets</a>].IdInUse = <span class="keyword">true</span>;
00284         pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m1">NumberOfSets</a>++;
00285         <span class="keywordflow">return</span> <span class="keyword">true</span>;
00286 }
00287 
<a name="l00288"></a><a class="code" href="group__corresponding3d2dpoints.html#a15">00288</a> <span class="keywordtype">bool</span> <a class="code" href="group__corresponding3d2dpoints.html#a15">k_AddPointSetTo3D2DPoints</a>(<span class="keyword">const</span> <a class="code" href="structT3DFloat.html">T3DFloat</a>* pPnt3D, <span class="keyword">const</span> <a class="code" href="structT2DFloat.html">T2DFloat</a>* pPnt2D,
00289                                                                         <a class="code" href="structT3D2DPoints.html">T3D2DPoints</a>* pInfo)
00290 {
00291         <span class="keywordflow">if</span> (pInfo==NULL)
00292         {
00293                 <a class="code" href="structTString.html">TString</a> str;
00294                 <a class="code" href="group__string.html#a0">k_InitString</a>(&amp;str);
00295                 <a class="code" href="group__string.html#a15">k_AddFileAndLine</a>(str);
00296                 <a class="code" href="group__errorhandling.html#a0">k_ShowMessage</a>(IPL_ERROR,&amp;str,<span class="stringliteral">"k_AddPointSetTo3D2DPoints() pInfo is NULL"</span>);
00297                 <a class="code" href="group__string.html#a1">k_EmptyString</a>(&amp;str);
00298                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
00299         }
00300         <span class="keywordflow">if</span> (pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m1">NumberOfSets</a>==pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m2">AllocatedSets</a>)
00301         {
00302                 <span class="comment">/* allocate 2 times previous allocated memory or 2 if memory never allocated before */</span>
00303                 pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m2">AllocatedSets</a> = 
00304                         (pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m2">AllocatedSets</a>==0) ? 2 : 2*pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m2">AllocatedSets</a>;
00305 
00306                 <a class="code" href="group__corresponding3d2dpoints.html#a3">k_ReAlloc3D2DPoints</a>(pInfo,pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m2">AllocatedSets</a>);
00307         }
00308         <span class="comment">/* insert point set and increment total number of point sets variable */</span>
00309         pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m0">pSet</a>[pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m1">NumberOfSets</a>].Pnt3D = (*pPnt3D);
00310         pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m0">pSet</a>[pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m1">NumberOfSets</a>].Pnt3DInUse = <span class="keyword">true</span>;
00311         pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m0">pSet</a>[pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m1">NumberOfSets</a>].Pnt2D = (*pPnt2D);
00312         pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m0">pSet</a>[pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m1">NumberOfSets</a>].Pnt2DInUse = <span class="keyword">true</span>;
00313         pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m0">pSet</a>[pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m1">NumberOfSets</a>].IdInUse = <span class="keyword">false</span>;
00314         pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m1">NumberOfSets</a>++;
00315         <span class="keywordflow">return</span> <span class="keyword">true</span>;
00316 }
00317 
<a name="l00318"></a><a class="code" href="group__corresponding3d2dpoints.html#a16">00318</a> <span class="keywordtype">bool</span> <a class="code" href="group__corresponding3d2dpoints.html#a16">k_AddPoint3DTo3D2DPoints</a>(<span class="keyword">const</span> <a class="code" href="structT3DFloat.html">T3DFloat</a>* pPnt3D, <a class="code" href="structT3D2DPoints.html">T3D2DPoints</a>* pInfo)
00319 {
00320         <span class="keywordflow">if</span> (pInfo==NULL)
00321         {
00322                 <a class="code" href="structTString.html">TString</a> str;
00323                 <a class="code" href="group__string.html#a0">k_InitString</a>(&amp;str);
00324                 <a class="code" href="group__string.html#a15">k_AddFileAndLine</a>(str);
00325                 <a class="code" href="group__errorhandling.html#a0">k_ShowMessage</a>(IPL_ERROR,&amp;str,<span class="stringliteral">"k_AddPoint3DTo3D2DPoints() pInfo is NULL"</span>);
00326                 <a class="code" href="group__string.html#a1">k_EmptyString</a>(&amp;str);
00327                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
00328         }
00329         <span class="keywordflow">if</span> (pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m1">NumberOfSets</a>==pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m2">AllocatedSets</a>)
00330         {
00331                 <span class="comment">/* allocate 2 times previous allocated memory or 2 if memory never allocated before */</span>
00332                 pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m2">AllocatedSets</a> = 
00333                         (pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m2">AllocatedSets</a>==0) ? 2 : 2*pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m2">AllocatedSets</a>;
00334 
00335                 <a class="code" href="group__corresponding3d2dpoints.html#a3">k_ReAlloc3D2DPoints</a>(pInfo,pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m2">AllocatedSets</a>);
00336         }
00337         <span class="comment">/* insert point set and increment total number of point sets variable */</span>
00338         pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m0">pSet</a>[pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m1">NumberOfSets</a>].Pnt3D = (*pPnt3D);
00339         pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m0">pSet</a>[pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m1">NumberOfSets</a>].Pnt3DInUse = <span class="keyword">true</span>;
00340         pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m0">pSet</a>[pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m1">NumberOfSets</a>].Pnt2DInUse = <span class="keyword">false</span>;
00341         pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m0">pSet</a>[pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m1">NumberOfSets</a>].IdInUse = <span class="keyword">false</span>;
00342         pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m1">NumberOfSets</a>++;
00343         <span class="keywordflow">return</span> <span class="keyword">true</span>;
00344 }
00345 
<a name="l00346"></a><a class="code" href="group__corresponding3d2dpoints.html#a17">00346</a> <span class="keywordtype">bool</span> <a class="code" href="group__corresponding3d2dpoints.html#a17">k_AddPoint2DTo3D2DPoints</a>(<span class="keyword">const</span> <a class="code" href="structT2DFloat.html">T2DFloat</a>* pPnt2D, <a class="code" href="structT3D2DPoints.html">T3D2DPoints</a>* pInfo)
00347 {
00348         <span class="keywordflow">if</span> (pInfo==NULL)
00349         {
00350                 <a class="code" href="structTString.html">TString</a> str;
00351                 <a class="code" href="group__string.html#a0">k_InitString</a>(&amp;str);
00352                 <a class="code" href="group__string.html#a15">k_AddFileAndLine</a>(str);
00353                 <a class="code" href="group__errorhandling.html#a0">k_ShowMessage</a>(IPL_ERROR,&amp;str,<span class="stringliteral">"k_AddPoint2DTo3D2DPoints() pInfo is NULL"</span>);
00354                 <a class="code" href="group__string.html#a1">k_EmptyString</a>(&amp;str);
00355                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
00356         }
00357         <span class="keywordflow">if</span> (pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m1">NumberOfSets</a>==pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m2">AllocatedSets</a>)
00358         {
00359                 <span class="comment">/* allocate 2 times previous allocated memory or 2 if memory never allocated before */</span>
00360                 pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m2">AllocatedSets</a> = 
00361                         (pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m2">AllocatedSets</a>==0) ? 2 : 2*pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m2">AllocatedSets</a>;
00362 
00363                 <a class="code" href="group__corresponding3d2dpoints.html#a3">k_ReAlloc3D2DPoints</a>(pInfo,pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m2">AllocatedSets</a>);
00364         }
00365         <span class="comment">/* insert point set and increment total number of point sets variable */</span>
00366         pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m0">pSet</a>[pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m1">NumberOfSets</a>].Pnt3DInUse = <span class="keyword">false</span>;
00367         pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m0">pSet</a>[pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m1">NumberOfSets</a>].Pnt2D = (*pPnt2D);
00368         pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m0">pSet</a>[pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m1">NumberOfSets</a>].Pnt2DInUse = <span class="keyword">true</span>;
00369         pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m0">pSet</a>[pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m1">NumberOfSets</a>].IdInUse = <span class="keyword">false</span>;
00370         pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m1">NumberOfSets</a>++;
00371         <span class="keywordflow">return</span> <span class="keyword">true</span>;
00372 }
00373 
<a name="l00374"></a><a class="code" href="group__corresponding3d2dpoints.html#a8">00374</a> <span class="keywordtype">bool</span> <a class="code" href="group__corresponding3d2dpoints.html#a8">k_Copy3D2DPoints</a>(<a class="code" href="structT3D2DPoints.html">T3D2DPoints</a>* pDest,<span class="keyword">const</span> <a class="code" href="structT3D2DPoints.html">T3D2DPoints</a>* pSource)
00375 {
00376         <span class="keywordflow">if</span> (pDest==pSource)
00377         {
00378                 <span class="comment">/* cannot copy to itself! */</span>
00379                 <a class="code" href="structTString.html">TString</a> str;
00380                 <a class="code" href="group__string.html#a0">k_InitString</a>(&amp;str);
00381                 <a class="code" href="group__string.html#a15">k_AddFileAndLine</a>(str);
00382                 <a class="code" href="group__errorhandling.html#a0">k_ShowMessage</a>(IPL_ERROR,&amp;str,<span class="stringliteral">"k_Copy3D2DPoints() Source and destination T3D2DPoints"</span>
00383                         <span class="stringliteral">" structure the same - doing nothing"</span>);
00384                 <a class="code" href="group__string.html#a1">k_EmptyString</a>(&amp;str);
00385                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
00386         }
00387         <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((pSource!=NULL) &amp;&amp; (pDest!=NULL))
00388         {
00389                 <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> count;
00390                 <a class="code" href="group__corresponding3d2dpoints.html#a1">k_Empty3D2DPoints</a>(pDest);
00391                 pDest-&gt;<a class="code" href="structT3D2DPoints.html#m0">pSet</a> = (<a class="code" href="structTSinglePointSet.html">TSinglePointSet</a>*) malloc(pSource-&gt;<a class="code" href="structT3D2DPoints.html#m1">NumberOfSets</a>*<span class="keyword">sizeof</span>(<a class="code" href="structTSinglePointSet.html">TSinglePointSet</a>));
00392                 pDest-&gt;<a class="code" href="structT3D2DPoints.html#m1">NumberOfSets</a>=pSource-&gt;<a class="code" href="structT3D2DPoints.html#m1">NumberOfSets</a>;
00393                 pDest-&gt;<a class="code" href="structT3D2DPoints.html#m2">AllocatedSets</a>=pSource-&gt;<a class="code" href="structT3D2DPoints.html#m2">AllocatedSets</a>;
00394                 <span class="keywordflow">for</span>(count=0;count&lt;pSource-&gt;<a class="code" href="structT3D2DPoints.html#m1">NumberOfSets</a>;count++)
00395                 {
00396                         pDest-&gt;<a class="code" href="structT3D2DPoints.html#m0">pSet</a>[count] = pSource-&gt;<a class="code" href="structT3D2DPoints.html#m0">pSet</a>[count];
00397                 }
00398                 <span class="keywordflow">return</span> <span class="keyword">true</span>;
00399         }
00400         <span class="keywordflow">else</span>
00401         {
00402                 <a class="code" href="structTString.html">TString</a> str;
00403                 <a class="code" href="group__string.html#a0">k_InitString</a>(&amp;str);
00404                 <a class="code" href="group__string.html#a15">k_AddFileAndLine</a>(str);
00405                 <a class="code" href="group__errorhandling.html#a0">k_ShowMessage</a>(IPL_ERROR,&amp;str,<span class="stringliteral">"k_Copy3D2DPoints() pSource or pDest is NULL"</span>);
00406                 <a class="code" href="group__string.html#a1">k_EmptyString</a>(&amp;str);
00407                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
00408         }
00409 }
00410 
<a name="l00411"></a><a class="code" href="group__corresponding3d2dpoints.html#a9">00411</a> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="group__corresponding3d2dpoints.html#a9">k_GetTotal3D2DPointSetsInUse</a>(<span class="keyword">const</span> <a class="code" href="structT3D2DPoints.html">T3D2DPoints</a>* pInfo)
00412 {
00413         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> count, TotalSetsInUse=0;
00414         <span class="keywordflow">for</span>(count=0; count&lt;pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m1">NumberOfSets</a>; count++)
00415         {
00416                 <span class="keywordflow">if</span> ((pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m0">pSet</a>[count].<a class="code" href="structTSinglePointSet.html#m3">Pnt2DInUse</a>==<span class="keyword">true</span>) &amp;&amp; 
00417                         (pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m0">pSet</a>[count].<a class="code" href="structTSinglePointSet.html#m1">Pnt3DInUse</a>==<span class="keyword">true</span>))
00418                 {
00419                         TotalSetsInUse++;
00420                 }
00421         }
00422         <span class="keywordflow">return</span> TotalSetsInUse;
00423 }
00424 
<a name="l00425"></a><a class="code" href="group__corresponding3d2dpoints.html#a10">00425</a> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="group__corresponding3d2dpoints.html#a10">k_GetTotal2DPointsOnlyInUse</a>(<span class="keyword">const</span> <a class="code" href="structT3D2DPoints.html">T3D2DPoints</a>* pInfo)
00426 {
00427         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> count, TotalInUse=0;
00428         <span class="keywordflow">for</span>(count=0; count&lt;pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m1">NumberOfSets</a>; count++)
00429         {
00430                 <span class="keywordflow">if</span> ((pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m0">pSet</a>[count].<a class="code" href="structTSinglePointSet.html#m3">Pnt2DInUse</a>==<span class="keyword">true</span>) &amp;&amp; 
00431                         (pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m0">pSet</a>[count].<a class="code" href="structTSinglePointSet.html#m1">Pnt3DInUse</a>==<span class="keyword">false</span>))
00432                 {
00433                         TotalInUse++;
00434                 }
00435         }
00436         <span class="keywordflow">return</span> TotalInUse;
00437 }
00438 
<a name="l00439"></a><a class="code" href="group__corresponding3d2dpoints.html#a11">00439</a> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="group__corresponding3d2dpoints.html#a11">k_GetTotal3DPointsOnlyInUse</a>(<span class="keyword">const</span> <a class="code" href="structT3D2DPoints.html">T3D2DPoints</a>* pInfo)
00440 {
00441         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> count, TotalInUse=0;
00442         <span class="keywordflow">for</span>(count=0; count&lt;pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m1">NumberOfSets</a>; count++)
00443         {
00444                 <span class="keywordflow">if</span> ((pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m0">pSet</a>[count].<a class="code" href="structTSinglePointSet.html#m3">Pnt2DInUse</a>==<span class="keyword">false</span>) &amp;&amp; 
00445                         (pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m0">pSet</a>[count].<a class="code" href="structTSinglePointSet.html#m1">Pnt3DInUse</a>==<span class="keyword">true</span>))
00446                 {
00447                         TotalInUse++;
00448                 }
00449         }
00450         <span class="keywordflow">return</span> TotalInUse;
00451 }
00452 
<a name="l00453"></a><a class="code" href="group__corresponding3d2dpoints.html#a18">00453</a> <span class="keywordtype">bool</span> <a class="code" href="group__corresponding3d2dpoints.html#a18">k_SetPoint2DIn3D2DPoints</a>(<span class="keyword">const</span> <a class="code" href="structT2DFloat.html">T2DFloat</a>* pPnt2D, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> Index, <a class="code" href="structT3D2DPoints.html">T3D2DPoints</a>* pInfo)
00454 {
00455         <span class="keywordflow">if</span> (pInfo==NULL)
00456         {
00457                 <a class="code" href="structTString.html">TString</a> str;
00458                 <a class="code" href="group__string.html#a0">k_InitString</a>(&amp;str);
00459                 <a class="code" href="group__string.html#a15">k_AddFileAndLine</a>(str);
00460                 <a class="code" href="group__errorhandling.html#a0">k_ShowMessage</a>(IPL_ERROR,&amp;str,<span class="stringliteral">"k_SetPoint2DIn3D2DPoints() pSource or pDest is NULL"</span>);
00461                 <a class="code" href="group__string.html#a1">k_EmptyString</a>(&amp;str);
00462                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
00463         }
00464         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Index&gt;=pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m1">NumberOfSets</a>)
00465         {
00466                 <a class="code" href="structTString.html">TString</a> str;
00467                 <a class="code" href="group__string.html#a0">k_InitString</a>(&amp;str);
00468                 <a class="code" href="group__string.html#a15">k_AddFileAndLine</a>(str);
00469                 <a class="code" href="group__errorhandling.html#a0">k_ShowMessage</a>(IPL_ERROR,&amp;str,<span class="stringliteral">"k_SetPoint2DIn3D2DPoints() Index (%d) out of range"</span>,Index);
00470                 <a class="code" href="group__string.html#a1">k_EmptyString</a>(&amp;str);
00471                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
00472         }
00473         <span class="keywordflow">else</span>
00474         {
00475                 pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m0">pSet</a>[Index].<a class="code" href="structTSinglePointSet.html#m2">Pnt2D</a>=(*pPnt2D);
00476                 pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m0">pSet</a>[Index].<a class="code" href="structTSinglePointSet.html#m3">Pnt2DInUse</a>=<span class="keyword">true</span>;
00477                 <span class="keywordflow">return</span> <span class="keyword">true</span>;
00478         }
00479 }
00480 
<a name="l00481"></a><a class="code" href="group__corresponding3d2dpoints.html#a19">00481</a> <span class="keywordtype">bool</span> <a class="code" href="group__corresponding3d2dpoints.html#a19">k_SetPoint3DIn3D2DPoints</a>(<span class="keyword">const</span> <a class="code" href="structT3DFloat.html">T3DFloat</a>* pPnt3D, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> Index, <a class="code" href="structT3D2DPoints.html">T3D2DPoints</a>* pInfo)
00482 {
00483         <span class="keywordflow">if</span> (pInfo==NULL)
00484         {
00485                 <a class="code" href="structTString.html">TString</a> str;
00486                 <a class="code" href="group__string.html#a0">k_InitString</a>(&amp;str);
00487                 <a class="code" href="group__string.html#a15">k_AddFileAndLine</a>(str);
00488                 <a class="code" href="group__errorhandling.html#a0">k_ShowMessage</a>(IPL_ERROR,&amp;str,<span class="stringliteral">"k_SetPoint3DIn3D2DPoints() pSource or pDest is NULL"</span>);
00489                 <a class="code" href="group__string.html#a1">k_EmptyString</a>(&amp;str);
00490                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
00491         }
00492         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Index&gt;=pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m1">NumberOfSets</a>)
00493         {
00494                 <a class="code" href="structTString.html">TString</a> str;
00495                 <a class="code" href="group__string.html#a0">k_InitString</a>(&amp;str);
00496                 <a class="code" href="group__string.html#a15">k_AddFileAndLine</a>(str);
00497                 <a class="code" href="group__errorhandling.html#a0">k_ShowMessage</a>(IPL_ERROR,&amp;str,<span class="stringliteral">"k_SetPoint3DIn3D2DPoints() Index (%d) out of range"</span>,Index);
00498                 <a class="code" href="group__string.html#a1">k_EmptyString</a>(&amp;str);
00499                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
00500         }
00501         <span class="keywordflow">else</span>
00502         {
00503                 pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m0">pSet</a>[Index].<a class="code" href="structTSinglePointSet.html#m0">Pnt3D</a>=(*pPnt3D);
00504                 pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m0">pSet</a>[Index].<a class="code" href="structTSinglePointSet.html#m1">Pnt3DInUse</a>=<span class="keyword">true</span>;
00505                 <span class="keywordflow">return</span> <span class="keyword">true</span>;
00506         }
00507 }
00508 
<a name="l00509"></a><a class="code" href="group__corresponding3d2dpoints.html#a22">00509</a> <span class="keywordtype">bool</span> <a class="code" href="group__corresponding3d2dpoints.html#a22">k_GetIndexIn3D2DPoints</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>* pIndex, <span class="keywordtype">int</span> Id, <span class="keyword">const</span> <a class="code" href="structT3D2DPoints.html">T3D2DPoints</a>* pInfo)
00510 {
00511         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> count;
00512         <span class="keywordflow">for</span>(count=0; count&lt;pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m1">NumberOfSets</a>; count++)
00513         {
00514                 <span class="keywordflow">if</span> (pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m0">pSet</a>[count].<a class="code" href="structTSinglePointSet.html#m5">IdInUse</a>==<span class="keyword">true</span>)
00515                 {
00516                         <span class="keywordflow">if</span> (Id==pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m0">pSet</a>[count].<a class="code" href="structTSinglePointSet.html#m4">Id</a>)
00517                         {
00518                                 *pIndex=count;
00519                                 <span class="keywordflow">return</span> <span class="keyword">true</span>;
00520                         }
00521                 }
00522         }
00523         <span class="comment">/* if we end up here, no set was found with "Id" */</span>
00524         <span class="keywordflow">return</span> <span class="keyword">false</span>;
00525 
00526 }
00527 
<a name="l00528"></a><a class="code" href="group__corresponding3d2dpoints.html#a20">00528</a> <span class="keywordtype">bool</span> <a class="code" href="group__corresponding3d2dpoints.html#a20">k_Load3D2DPoints</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* PathAndFileName, <a class="code" href="structT3D2DPoints.html">T3D2DPoints</a>* pInfo)
00529 {
00530         <span class="keywordtype">bool</span> returnValue;
00531         FILE* fp;
00532         <span class="keywordtype">char</span>* Path=NULL,*FileNameExt=NULL,*Ext=NULL;
00533         <a class="code" href="structTString.html">TString</a> str;
00534         <a class="code" href="group__string.html#a0">k_InitString</a>(&amp;str);
00535         <span class="keywordflow">if</span> (!<a class="code" href="group__filefunctions.html#a14">k_SplitFileName</a>(PathAndFileName, &amp;Path,&amp;FileNameExt,&amp;Ext))
00536         {
00537                 <a class="code" href="group__string.html#a15">k_AddFileAndLine</a>(str);
00538                 <a class="code" href="group__errorhandling.html#a0">k_ShowMessage</a>(IPL_ERROR,&amp;str,<span class="stringliteral">"k_Load3D2DPoints() Filename not valid"</span>);
00539                 <a class="code" href="group__string.html#a1">k_EmptyString</a>(&amp;str);
00540                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
00541         }
00542         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(Ext,<span class="stringliteral">""</span>)==0)
00543         {
00544                 <a class="code" href="group__string.html#a15">k_AddFileAndLine</a>(str);
00545                 <a class="code" href="group__errorhandling.html#a0">k_ShowMessage</a>(IPL_ERROR,&amp;str,<span class="stringliteral">"k_Load3D2DPoints() No extension found"</span>);
00546                 <a class="code" href="group__string.html#a1">k_EmptyString</a>(&amp;str);
00547                 returnValue=<span class="keyword">false</span>;
00548         }
00549         <span class="keywordflow">else</span>
00550         {
00551                 returnValue=<span class="keyword">true</span>;
00552                 fp=fopen(PathAndFileName,<span class="stringliteral">"rb"</span>); <span class="comment">/* open file */</span>
00553                 <span class="keywordflow">if</span> (fp==NULL)
00554                 {
00555                         <a class="code" href="group__string.html#a15">k_AddFileAndLine</a>(str);
00556                         <a class="code" href="group__errorhandling.html#a0">k_ShowMessage</a>(IPL_ERROR,&amp;str,<span class="stringliteral">"k_Load3D2DPoints() Could not open file"</span>);
00557                         returnValue=<span class="keyword">false</span>;
00558                 }
00559                 <span class="keywordflow">else</span>
00560                 {
00561                         <span class="comment">/* read from file */</span>
00562                         <span class="keywordtype">bool</span> NumberOfSetsFound=<span class="keyword">false</span>;
00563                         <span class="keywordtype">char</span> c;
00564                         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0;
00565                         <a class="code" href="group__corresponding3d2dpoints.html#a1">k_Empty3D2DPoints</a>(pInfo);
00566                         <a class="code" href="group__filefunctions.html#a10">k_SkipWhiteSpace</a>(fp);
00567                         <span class="keywordflow">while</span> (((c=fgetc(fp))!=EOF) &amp;&amp; (returnValue==<span class="keyword">true</span>))
00568                         {
00569                                 ungetc(c,fp);
00570                                 <span class="keywordflow">if</span> (c==<span class="charliteral">'#'</span>)
00571                                 {
00572                                         <a class="code" href="group__filefunctions.html#a11">k_SkipLine</a>(fp);
00573                                 }
00574                                 <span class="keywordflow">else</span> <span class="comment">/* it must be a token then! */</span>
00575                                 {
00576                                         <span class="keywordtype">char</span>* Token;
00577                                         <span class="keywordflow">if</span> (<a class="code" href="group__filefunctions.html#a12">k_ReadToken</a>(fp,&amp;Token)==<span class="keyword">false</span>)
00578                                         {
00579                                                 <a class="code" href="group__string.html#a1">k_EmptyString</a>(&amp;str);
00580                                                 <a class="code" href="group__string.html#a15">k_AddFileAndLine</a>(str);
00581                                                 <a class="code" href="group__errorhandling.html#a0">k_ShowMessage</a>(IPL_ERROR,&amp;str,<span class="stringliteral">"k_Load3D2DPoints() Failed reading token"</span>);
00582                                                 returnValue=<span class="keyword">false</span>;
00583                                         }
00584                                         <span class="keywordflow">else</span>
00585                                         {
00586                                                 <a class="code" href="group__string.html#a13">k_StringToUpper</a>(Token);
00587                                                 <span class="keywordflow">if</span> (strcmp(Token,<span class="stringliteral">"NUMBEROFSETS"</span>)==0)
00588                                                 {
00589                                                         NumberOfSetsFound=<span class="keyword">true</span>;
00590                                                         <span class="keywordflow">if</span> (fscanf(fp,<span class="stringliteral">"%d"</span>,&amp;pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m1">NumberOfSets</a>)!=1)
00591                                                         {
00592                                                                 <a class="code" href="group__string.html#a1">k_EmptyString</a>(&amp;str);
00593                                                                 <a class="code" href="group__string.html#a15">k_AddFileAndLine</a>(str);
00594                                                                 <a class="code" href="group__errorhandling.html#a0">k_ShowMessage</a>(IPL_ERROR,&amp;str,<span class="stringliteral">"k_Load3D2DPoints() Failed reading number of sets"</span>);
00595                                                                 returnValue=<span class="keyword">false</span>;
00596                                                         }
00597                                                         <a class="code" href="group__corresponding3d2dpoints.html#a2">k_Alloc3D2DPoints</a>(pInfo,pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m1">NumberOfSets</a>);
00598                                                         <span class="comment">/* started reading each set */</span>
00599                                                         <span class="keywordflow">for</span>(i=0; i&lt;pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m2">AllocatedSets</a>; i++)
00600                                                         {
00601                                                                 <span class="keywordtype">int</span> Error;
00602                                                                 <a class="code" href="group__filefunctions.html#a10">k_SkipWhiteSpace</a>(fp);
00603                                                                 Error=fscanf(fp,<span class="stringliteral">"Id= %d 3D-pnt= (%g,%g,%g) 2D-pnt= (%g,%g)  "</span>,&amp;pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m0">pSet</a>[i].<a class="code" href="structTSinglePointSet.html#m4">Id</a>,
00604                                                                         &amp;pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m0">pSet</a>[i].<a class="code" href="structTSinglePointSet.html#m0">Pnt3D</a>.<a class="code" href="structT3DFloat.html#m0">x</a>,&amp;pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m0">pSet</a>[i].<a class="code" href="structTSinglePointSet.html#m0">Pnt3D</a>.<a class="code" href="structT3DFloat.html#m1">y</a>,&amp;pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m0">pSet</a>[i].<a class="code" href="structTSinglePointSet.html#m0">Pnt3D</a>.<a class="code" href="structT3DFloat.html#m2">z</a>,
00605                                                                         &amp;pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m0">pSet</a>[i].<a class="code" href="structTSinglePointSet.html#m2">Pnt2D</a>.<a class="code" href="structT2DFloat.html#m0">x</a>,&amp;pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m0">pSet</a>[i].<a class="code" href="structTSinglePointSet.html#m2">Pnt2D</a>.<a class="code" href="structT2DFloat.html#m1">y</a>);
00606                                                                 <span class="keywordflow">if</span> ((Error==EOF) || (Error!=6))
00607                                                                 {
00608                                                                         <a class="code" href="group__string.html#a1">k_EmptyString</a>(&amp;str);
00609                                                                         <a class="code" href="group__string.html#a15">k_AddFileAndLine</a>(str);
00610                                                                         <a class="code" href="group__errorhandling.html#a0">k_ShowMessage</a>(IPL_ERROR,&amp;str,<span class="stringliteral">"k_Load3D2DPoints() Missing values in one of the pointsets"</span>);
00611                                                                         returnValue=<span class="keyword">false</span>;
00612                                                                 }
00613                                                                 free(Token);
00614                                                                 <span class="comment">/* read IDInUse */</span>
00615                                                                 <span class="keywordflow">if</span> (<a class="code" href="group__filefunctions.html#a12">k_ReadToken</a>(fp,&amp;Token)==<span class="keyword">false</span>)
00616                                                                 {
00617                                                                         <a class="code" href="group__string.html#a1">k_EmptyString</a>(&amp;str);
00618                                                                         <a class="code" href="group__string.html#a15">k_AddFileAndLine</a>(str);
00619                                                                         <a class="code" href="group__errorhandling.html#a0">k_ShowMessage</a>(IPL_ERROR,&amp;str,<span class="stringliteral">"k_Load3D2DPoints() Failed reading token IdInUse"</span>);
00620                                                                         returnValue=<span class="keyword">false</span>;
00621                                                                 }
00622                                                                 <span class="keywordflow">else</span>
00623                                                                 {
00624                                                                         <a class="code" href="group__string.html#a13">k_StringToUpper</a>(Token);
00625                                                                         <span class="keywordflow">if</span> (strcmp(Token,<span class="stringliteral">"IDINUSE=YES"</span>)==0)
00626                                                                                 pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m0">pSet</a>[i].<a class="code" href="structTSinglePointSet.html#m5">IdInUse</a>=<span class="keyword">true</span>;
00627                                                                         <span class="keywordflow">else</span>
00628                                                                                 pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m0">pSet</a>[i].<a class="code" href="structTSinglePointSet.html#m5">IdInUse</a>=<span class="keyword">false</span>;
00629                                                                 }
00630                                                                 free(Token);
00631                                                                 <span class="comment">/* read Pnt3DInUse */</span>
00632                                                                 <span class="keywordflow">if</span> (<a class="code" href="group__filefunctions.html#a12">k_ReadToken</a>(fp,&amp;Token)==<span class="keyword">false</span>)
00633                                                                 {
00634                                                                         <a class="code" href="group__string.html#a1">k_EmptyString</a>(&amp;str);
00635                                                                         <a class="code" href="group__string.html#a15">k_AddFileAndLine</a>(str);
00636                                                                         <a class="code" href="group__errorhandling.html#a0">k_ShowMessage</a>(IPL_ERROR,&amp;str,<span class="stringliteral">"k_Load3D2DPoints() Failed reading token Pnt3DInUse"</span>);
00637                                                                         returnValue=<span class="keyword">false</span>;
00638                                                                 }
00639                                                                 <span class="keywordflow">else</span>
00640                                                                 {
00641                                                                         <a class="code" href="group__string.html#a13">k_StringToUpper</a>(Token);
00642                                                                         <span class="keywordflow">if</span> (strcmp(Token,<span class="stringliteral">"PNT3DINUSE=YES"</span>)==0)
00643                                                                                 pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m0">pSet</a>[i].<a class="code" href="structTSinglePointSet.html#m1">Pnt3DInUse</a>=<span class="keyword">true</span>;
00644                                                                         <span class="keywordflow">else</span>
00645                                                                                 pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m0">pSet</a>[i].<a class="code" href="structTSinglePointSet.html#m1">Pnt3DInUse</a>=<span class="keyword">false</span>;
00646                                                                 }
00647                                                                 free(Token);
00648                                                                 <span class="comment">/* read Pnt2DInUse */</span>
00649                                                                 <span class="keywordflow">if</span> (<a class="code" href="group__filefunctions.html#a12">k_ReadToken</a>(fp,&amp;Token)==<span class="keyword">false</span>)
00650                                                                 {
00651                                                                         <a class="code" href="group__string.html#a1">k_EmptyString</a>(&amp;str);
00652                                                                         <a class="code" href="group__string.html#a15">k_AddFileAndLine</a>(str);
00653                                                                         <a class="code" href="group__errorhandling.html#a0">k_ShowMessage</a>(IPL_ERROR,&amp;str,<span class="stringliteral">"k_Load3D2DPoints() Failed reading token Pnt2DInUse"</span>);
00654                                                                         returnValue=<span class="keyword">false</span>;
00655                                                                 }
00656                                                                 <span class="keywordflow">else</span>
00657                                                                 {
00658                                                                         <a class="code" href="group__string.html#a13">k_StringToUpper</a>(Token);
00659                                                                         <span class="keywordflow">if</span> (strcmp(Token,<span class="stringliteral">"PNT2DINUSE=YES"</span>)==0)
00660                                                                                 pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m0">pSet</a>[i].<a class="code" href="structTSinglePointSet.html#m3">Pnt2DInUse</a>=<span class="keyword">true</span>;
00661                                                                         <span class="keywordflow">else</span>
00662                                                                                 pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m0">pSet</a>[i].<a class="code" href="structTSinglePointSet.html#m3">Pnt2DInUse</a>=<span class="keyword">false</span>;
00663                                                                 }
00664                                                         }
00665                                                         pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m1">NumberOfSets</a>=pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m2">AllocatedSets</a>;
00666                                                 }
00667                                                 free(Token);
00668                                         }
00669                                 }
00670                                 <a class="code" href="group__filefunctions.html#a10">k_SkipWhiteSpace</a>(fp);
00671                         }
00672                         <span class="keywordflow">if</span> (NumberOfSetsFound==<span class="keyword">false</span>)
00673                         {
00674                                 <a class="code" href="group__string.html#a1">k_EmptyString</a>(&amp;str);
00675                                 <a class="code" href="group__string.html#a15">k_AddFileAndLine</a>(str);
00676                                 <a class="code" href="group__errorhandling.html#a0">k_ShowMessage</a>(IPL_ERROR,&amp;str,<span class="stringliteral">"k_Load3D2DPoints() Tokens NumberOfSets not found"</span>);
00677                                 returnValue=<span class="keyword">false</span>;
00678                         }
00679                 }
00680         }
00681         <a class="code" href="group__string.html#a1">k_EmptyString</a>(&amp;str);
00682         free(Path);
00683         free(FileNameExt);
00684         free(Ext);
00685         <span class="keywordflow">return</span> returnValue;
00686 }
00687 
<a name="l00688"></a><a class="code" href="group__corresponding3d2dpoints.html#a21">00688</a> <span class="keywordtype">bool</span> <a class="code" href="group__corresponding3d2dpoints.html#a21">k_Save3D2DPoints</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* PathAndFileName, <a class="code" href="structT3D2DPoints.html">T3D2DPoints</a>* pInfo)
00689 {
00690         <span class="keywordtype">bool</span> returnValue;
00691         FILE* fp;
00692         <span class="keywordtype">char</span>* Path=NULL,*FileNameExt=NULL,*Ext=NULL;
00693         <span class="keywordflow">if</span> (!<a class="code" href="group__filefunctions.html#a14">k_SplitFileName</a>(PathAndFileName, &amp;Path,&amp;FileNameExt,&amp;Ext))
00694         {
00695                 <a class="code" href="structTString.html">TString</a> str;
00696                 <a class="code" href="group__string.html#a0">k_InitString</a>(&amp;str);
00697                 <a class="code" href="group__string.html#a15">k_AddFileAndLine</a>(str);
00698                 <a class="code" href="group__errorhandling.html#a0">k_ShowMessage</a>(IPL_ERROR,&amp;str,<span class="stringliteral">"k_Save3D2DPoints() Filename not valid"</span>);
00699                 <a class="code" href="group__string.html#a1">k_EmptyString</a>(&amp;str);
00700                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
00701         }
00702         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(Ext,<span class="stringliteral">""</span>)==0)
00703         {
00704                 <a class="code" href="structTString.html">TString</a> str;
00705                 <a class="code" href="group__string.html#a0">k_InitString</a>(&amp;str);
00706                 <a class="code" href="group__string.html#a15">k_AddFileAndLine</a>(str);
00707                 <a class="code" href="group__errorhandling.html#a0">k_ShowMessage</a>(IPL_ERROR,&amp;str,<span class="stringliteral">"k_Save3D2DPoints() No extension found"</span>);
00708                 <a class="code" href="group__string.html#a1">k_EmptyString</a>(&amp;str);
00709                 returnValue=<span class="keyword">false</span>;
00710         }
00711         <span class="keywordflow">else</span>
00712         {
00713                 returnValue=<span class="keyword">true</span>;
00714                 <a class="code" href="group__string.html#a13">k_StringToUpper</a>(Ext);
00715                 fp=fopen(PathAndFileName,<span class="stringliteral">"wb"</span>); <span class="comment">/* open file */</span>
00716                 <span class="keywordflow">if</span> (fp==NULL)
00717                 {
00718                         <a class="code" href="structTString.html">TString</a> str;
00719                         <a class="code" href="group__string.html#a0">k_InitString</a>(&amp;str);
00720                         <a class="code" href="group__string.html#a15">k_AddFileAndLine</a>(str);
00721                         <a class="code" href="group__errorhandling.html#a0">k_ShowMessage</a>(IPL_ERROR,&amp;str,<span class="stringliteral">"k_Save3D2DPoints() Could not save file"</span>);
00722                         <a class="code" href="group__string.html#a1">k_EmptyString</a>(&amp;str);
00723                         returnValue=<span class="keyword">false</span>;
00724                 }
00725                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m1">NumberOfSets</a>==0)
00726                 {
00727                         <a class="code" href="structTString.html">TString</a> str;
00728                         <a class="code" href="group__string.html#a0">k_InitString</a>(&amp;str);
00729                         <a class="code" href="group__string.html#a15">k_AddFileAndLine</a>(str);
00730                         <a class="code" href="group__errorhandling.html#a0">k_ShowMessage</a>(IPL_ERROR,&amp;str,<span class="stringliteral">"k_Save3D2DPoints() No points in set - cannot save"</span>);
00731                         <a class="code" href="group__string.html#a1">k_EmptyString</a>(&amp;str);
00732                         returnValue=<span class="keyword">false</span>;
00733                 }
00734                 <span class="keywordflow">else</span>
00735                 {
00736                         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i;
00737                         <span class="comment">/* Save point set */</span>
00738                         fprintf(fp,<span class="stringliteral">"# Point sets data file written by the kernel CCorresponding3D2DPoints class from IPL98\n\n"</span>);
00739                         fprintf(fp,<span class="stringliteral">"NumberOfSets %d\n\n"</span>, pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m1">NumberOfSets</a>);
00740                         <span class="keywordflow">for</span>(i=0; i&lt;pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m1">NumberOfSets</a>; i++)
00741                         {
00742                                 fprintf(fp, <span class="stringliteral">"Id= %d 3D-pnt= (%g,%g,%g) 2D-pnt= (%g,%g)  "</span>,pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m0">pSet</a>[i].<a class="code" href="structTSinglePointSet.html#m4">Id</a>,pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m0">pSet</a>[i].<a class="code" href="structTSinglePointSet.html#m0">Pnt3D</a>.<a class="code" href="structT3DFloat.html#m0">x</a>,
00743                                         pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m0">pSet</a>[i].<a class="code" href="structTSinglePointSet.html#m0">Pnt3D</a>.<a class="code" href="structT3DFloat.html#m1">y</a>,pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m0">pSet</a>[i].<a class="code" href="structTSinglePointSet.html#m0">Pnt3D</a>.<a class="code" href="structT3DFloat.html#m2">z</a>,pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m0">pSet</a>[i].<a class="code" href="structTSinglePointSet.html#m2">Pnt2D</a>.<a class="code" href="structT2DFloat.html#m0">x</a>,pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m0">pSet</a>[i].<a class="code" href="structTSinglePointSet.html#m2">Pnt2D</a>.<a class="code" href="structT2DFloat.html#m1">y</a>);
00744                                 <span class="keywordflow">if</span> (pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m0">pSet</a>[i].<a class="code" href="structTSinglePointSet.html#m5">IdInUse</a>==<span class="keyword">true</span>)
00745                                 {
00746                                         fprintf(fp, <span class="stringliteral">"IdInUse=YES "</span>,pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m0">pSet</a>[i].<a class="code" href="structTSinglePointSet.html#m4">Id</a>);
00747                                 }
00748                                 <span class="keywordflow">else</span>
00749                                 {
00750                                         fprintf(fp,<span class="stringliteral">"IdInUse=NO "</span>);
00751                                 }
00752                                 <span class="keywordflow">if</span> (pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m0">pSet</a>[i].<a class="code" href="structTSinglePointSet.html#m1">Pnt3DInUse</a>==<span class="keyword">true</span>)
00753                                 {
00754                                         fprintf(fp,<span class="stringliteral">"Pnt3DInUse=YES "</span>);
00755                                 }
00756                                 <span class="keywordflow">else</span>
00757                                 {
00758                                         fprintf(fp,<span class="stringliteral">"Pnt3DInUse=NO "</span>);
00759                                 }
00760                                 <span class="keywordflow">if</span> (pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m0">pSet</a>[i].<a class="code" href="structTSinglePointSet.html#m3">Pnt2DInUse</a>==<span class="keyword">true</span>)
00761                                 {
00762                                         fprintf(fp,<span class="stringliteral">"Pnt2DInUse=YES"</span>);
00763                                 }
00764                                 <span class="keywordflow">else</span>
00765                                 {
00766                                         fprintf(fp,<span class="stringliteral">"Pnt2DInUse=NO"</span>);
00767                                 }
00768                                 fprintf(fp,<span class="stringliteral">"\n"</span>);
00769                         }
00770                 }
00771                 <span class="keywordflow">if</span> (fp!=NULL)
00772                 {
00773                         fclose(fp);
00774                 }
00775         }
00776         free(Path);
00777         free(FileNameExt);
00778         free(Ext);
00779         <span class="keywordflow">return</span> returnValue;
00780 }
00781 
<a name="l00782"></a><a class="code" href="group__corresponding3d2dpoints.html#a23">00782</a> <span class="keywordtype">void</span> <a class="code" href="group__corresponding3d2dpoints.html#a23">k_Print3D2DPoints</a>(<span class="keyword">const</span> <a class="code" href="structT3D2DPoints.html">T3D2DPoints</a>* pInfo)
00783 {
00784         printf(<span class="stringliteral">"*********** Corresponding 3D-2D points: ***********\n"</span>);
00785         <span class="keywordflow">if</span> (pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m1">NumberOfSets</a>==0)
00786         {
00787                 printf(<span class="stringliteral">" no points - empty structure\n"</span>);
00788         }
00789         <span class="keywordflow">else</span>
00790         {
00791                 <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> count;
00792                 printf(<span class="stringliteral">" Point sets inserted: %d  Point sets allocated: %d\n"</span>,pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m1">NumberOfSets</a>,pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m2">AllocatedSets</a>);
00793                 <span class="keywordflow">for</span>(count=0; count&lt;pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m1">NumberOfSets</a>; count++)
00794                 {
00795                         printf(<span class="stringliteral">" %d) "</span>,count);
00796                         <span class="keywordflow">if</span> (pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m0">pSet</a>[count].<a class="code" href="structTSinglePointSet.html#m1">Pnt3DInUse</a>==<span class="keyword">true</span>)
00797                         {
00798                                 printf(<span class="stringliteral">" 3D pnt = (%g,%g,%g)"</span>,pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m0">pSet</a>[count].<a class="code" href="structTSinglePointSet.html#m0">Pnt3D</a>.<a class="code" href="structT3DFloat.html#m0">x</a>,
00799                                                 pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m0">pSet</a>[count].<a class="code" href="structTSinglePointSet.html#m0">Pnt3D</a>.<a class="code" href="structT3DFloat.html#m1">y</a>,pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m0">pSet</a>[count].<a class="code" href="structTSinglePointSet.html#m0">Pnt3D</a>.<a class="code" href="structT3DFloat.html#m2">z</a>);
00800                         }
00801                         <span class="keywordflow">else</span>
00802                         {
00803                                 printf(<span class="stringliteral">" 3D pnt = not in use"</span>);
00804                         }
00805                         <span class="keywordflow">if</span> (pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m0">pSet</a>[count].<a class="code" href="structTSinglePointSet.html#m3">Pnt2DInUse</a>==<span class="keyword">true</span>)
00806                         {
00807                                 printf(<span class="stringliteral">" 2D pnt = (%g,%g)"</span>,pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m0">pSet</a>[count].<a class="code" href="structTSinglePointSet.html#m2">Pnt2D</a>.<a class="code" href="structT2DFloat.html#m0">x</a>,
00808                                                 pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m0">pSet</a>[count].<a class="code" href="structTSinglePointSet.html#m2">Pnt2D</a>.<a class="code" href="structT2DFloat.html#m1">y</a>);
00809                         }
00810                         <span class="keywordflow">else</span>
00811                         {
00812                                 printf(<span class="stringliteral">" 2D pnt = not in use"</span>);
00813                         }
00814                         <span class="keywordflow">if</span> (pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m0">pSet</a>[count].<a class="code" href="structTSinglePointSet.html#m5">IdInUse</a>==<span class="keyword">true</span>)
00815                         {
00816                                 printf(<span class="stringliteral">" Id = %d"</span>,pInfo-&gt;<a class="code" href="structT3D2DPoints.html#m0">pSet</a>[count].<a class="code" href="structTSinglePointSet.html#m4">Id</a>);
00817                         }
00818                         <span class="keywordflow">else</span>
00819                         {
00820                                 printf(<span class="stringliteral">" Id = not in use"</span>);
00821                         }
00822                         printf(<span class="stringliteral">"\n"</span>);
00823                 }
00824         }
00825 }
00826 
00827 
00828 <span class="preprocessor">#ifdef _IPL98_USING_CPP</span>
00829 <span class="preprocessor"></span>} <span class="comment">/* end of extern "C" */</span>
00830 } <span class="comment">/* end namespace ipl */</span>
00831 <span class="preprocessor">#endif</span>
</pre></div><!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html>

<head>
<meta name="GENERATOR" content="Microsoft FrontPage 4.0">
<title>Tag</title>
<base target="_top">
</head>

<body bgcolor="#FFFFFF">

<hr>

<p align="right"><font size="2"><em>Updated <!--webbot bot="Timestamp" s-type="EDITED" s-format="%d. %B %Y %H:%M" startspan -->21. juli 2002 12:29<!--webbot bot="Timestamp" endspan i-checksum="38834" --> by
<a href="http://www.mip.sdu.dk/~edr/">René Dencker
Eriksen</a>(<a href="mailto:edr@mip.sdu.dk">edr@mip.sdu.dk</a>)</em></font></p>
</body>
</html>
