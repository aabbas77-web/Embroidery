<html>

<head>
<meta http-equiv="Content-Language" content="en-us">
<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
<link type="text/css" href="../../doxygen.css" rel="stylesheet">
<meta name="GENERATOR" content="Microsoft FrontPage 4.0">
<meta name="ProgId" content="FrontPage.Editor.Document">
<title>Image Processing Library 98</title>
</head>

<body>
<h2 align="center"><a href="http://www.mip.sdu.dk/ipl98" target="_blank"><img border="0" src="ipl_doc_header.gif" width="694" height="55"></a></h2>

</body>

</html>
<!-- Generated by Doxygen 1.2.17 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="modules.html">Modules</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="namespacemembers.html">Namespace Members</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; </center>
<hr><h1>/ipl98/cpp/palette.cpp</h1><div class="fragment"><pre>00001 <span class="comment">/********************************************************************</span>
00002 <span class="comment">   The Image Processing Library 98 - IPL98</span>
00003 <span class="comment">   Copyright (C) by René Dencker Eriksen - edr@mip.sdu.dk</span>
00004 <span class="comment"></span>
00005 <span class="comment">   This library is free software; you can redistribute it and/or</span>
00006 <span class="comment">   modify it under the terms of the GNU Lesser General Public</span>
00007 <span class="comment">   License as published by the Free Software Foundation. Only</span>
00008 <span class="comment">   addition is, that if the library is used in proprietary software</span>
00009 <span class="comment">   it must be stated that IPL98 was used.</span>
00010 <span class="comment"></span>
00011 <span class="comment">   This library is distributed in the hope that it will be useful,</span>
00012 <span class="comment">   but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
00013 <span class="comment">   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.</span>
00014 <span class="comment"></span>
00015 <span class="comment">   More details can be found in the file licence.txt distributed</span>
00016 <span class="comment">   with this library.</span>
00017 <span class="comment">*********************************************************************/</span>
00018 
00019 <span class="preprocessor">#include "palette.h"</span>
00020 <span class="preprocessor">#include "../kernel_c/kernel_palette.h"</span>
00021 <span class="preprocessor">#include "error.h"</span>
00022 <span class="preprocessor">#include &lt;sstream&gt;</span>
00023 
00024 <span class="keyword">namespace </span>ipl{
00025 
00026 <span class="keyword">using</span> std::ostringstream;
00027 
<a name="l00028"></a><a class="code" href="classipl_1_1CPalette.html#a0">00028</a> CPalette::CPalette()
00029 {
00030         m_pPal=(<a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTPalette.html">TPalette</a>*) malloc(<span class="keyword">sizeof</span>(<a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTPalette.html">TPalette</a>));
00031         k_InitPalette(m_pPal);
00032         m_InternalTPalette=<span class="keyword">true</span>;
00033 }
00034 
<a name="l00035"></a><a class="code" href="classipl_1_1CPalette.html#a1">00035</a> CPalette::CPalette(UINT16 Entries)
00036 {
00037         <span class="keywordflow">if</span> ((Entries!=2) &amp;&amp; (Entries!=16) &amp;&amp; (Entries!=256))
00038         {
00039                 ostringstream ost;
00040                 ost &lt;&lt; <span class="stringliteral">"CPalette::CPalette("</span> &lt;&lt; Entries &lt;&lt; <span class="stringliteral">") Number of entris must be 2, 16 or 256"</span> &lt;&lt; IPLAddFileAndLine;
00041                 CError::ShowMessage(IPL_ERROR,ost.str().c_str());
00042         }
00043         m_pPal=(<a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTPalette.html">TPalette</a>*) malloc(<span class="keyword">sizeof</span>(<a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTPalette.html">TPalette</a>));
00044         k_InitPalette(m_pPal);
00045         <span class="keywordflow">switch</span>(Entries)
00046         {
00047         <span class="keywordflow">case</span> 2:
00048                 k_CreatePal(1,m_pPal);
00049                 <span class="keywordflow">break</span>;
00050         <span class="keywordflow">case</span> 16:
00051                 k_CreatePal(4,m_pPal);
00052                 <span class="keywordflow">break</span>;
00053         <span class="keywordflow">case</span> 256:
00054                 k_CreatePal(8,m_pPal);
00055                 <span class="keywordflow">break</span>;
00056         }
00057         m_InternalTPalette=<span class="keyword">true</span>;
00058 }
00059 
<a name="l00060"></a><a class="code" href="classipl_1_1CPalette.html#a2">00060</a> CPalette::CPalette(<a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTPalette.html">TPalette</a>* pPal)
00061 {
00062         <span class="keywordflow">if</span> (pPal!=NULL)
00063         {
00064                 m_pPal=pPal;
00065                 m_InternalTPalette=<span class="keyword">false</span>;
00066                 <span class="keywordflow">return</span>;
00067         }
00068         <span class="keywordflow">else</span>
00069         {
00070                 ostringstream ost;
00071                 ost &lt;&lt; <span class="stringliteral">"CPalette::CPalette(TPalette* pPal) pPal is a NULL-pointer"</span> &lt;&lt; IPLAddFileAndLine;
00072                 CError::ShowMessage(IPL_ERROR,ost.str().c_str());
00073         }
00074 }
00075 
<a name="l00076"></a><a class="code" href="classipl_1_1CPalette.html#a3">00076</a> CPalette::~CPalette()
00077 {
00078         <span class="keywordflow">if</span> (m_InternalTPalette==<span class="keyword">true</span>)
00079         {
00080                 <span class="keywordflow">if</span> (m_pPal!=NULL)
00081                 {
00082                         k_EmptyPalette(m_pPal);
00083                         free(m_pPal);
00084                 }
00085         }
00086 }
00087 
<a name="l00088"></a><a class="code" href="classipl_1_1CPalette.html#a4">00088</a> <a class="code" href="classipl_1_1CPalette.html">CPalette</a>&amp; CPalette::operator=(<span class="keyword">const</span> <a class="code" href="classipl_1_1CPalette.html">CPalette</a>&amp; SourcePal)
00089 {
00090         k_CopyPalette(m_pPal,SourcePal.<a class="code" href="classipl_1_1CPalette.html#o0">m_pPal</a>);
00091         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
00092 }
00093 
<a name="l00094"></a><a class="code" href="classipl_1_1CPalette.html#a5">00094</a> <span class="keywordtype">bool</span> CPalette::SetPalettePtr(<a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTPalette.html">TPalette</a>* pPal)
00095 {
00096         <span class="keywordflow">if</span> (pPal==NULL)
00097         {
00098                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
00099         }
00100         m_pPal=pPal;
00101         <span class="keywordflow">return</span> <span class="keyword">true</span>;
00102 }
00103 
<a name="l00104"></a><a class="code" href="classipl_1_1CPalette.html#a6">00104</a> <a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTPalette.html">TPalette</a>* CPalette::GetPalettePtr()<span class="keyword"> const</span>
00105 <span class="keyword"></span>{
00106         <span class="comment">// returns pointer to m_ptPal</span>
00107         <span class="keywordflow">return</span> m_pPal;
00108 }
00109 
<a name="l00110"></a><a class="code" href="classipl_1_1CPalette.html#a7">00110</a> UINT16 CPalette::GetNumberOfEntries()<span class="keyword"> const</span>
00111 <span class="keyword"></span>{
00112         <span class="keywordflow">return</span> m_pPal-&gt;<a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTPalette.html#m0">PalEntries</a>;
00113 }
00114 
<a name="l00115"></a><a class="code" href="classipl_1_1CPalette.html#a11">00115</a> <span class="keywordtype">void</span> CPalette::CopyPalette(<span class="keyword">const</span> <a class="code" href="classipl_1_1CPalette.html">CPalette</a>&amp; Pal)
00116 {
00117         k_CopyPalette(m_pPal,Pal.<a class="code" href="classipl_1_1CPalette.html#o0">m_pPal</a>);
00118 }
00119 
<a name="l00120"></a><a class="code" href="classipl_1_1CPalette.html#a12">00120</a> <span class="keywordtype">bool</span> CPalette::IsGrayTone()
00121 {
00122         <span class="keywordflow">return</span> k_IsPaletteGrayTone(m_pPal);
00123 }
00124 
<a name="l00125"></a><a class="code" href="classipl_1_1CPalette.html#a13">00125</a> <span class="keywordtype">void</span> CPalette::PrintInfo(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> EntriesPrLine)
00126 {
00127         k_PrintPaletteInfo(m_pPal,EntriesPrLine);
00128 }
00129 
<a name="l00130"></a><a class="code" href="classipl_1_1CPalette.html#a71">00130</a> ostream&amp; <a class="code" href="namespaceipl.html#a3">operator&lt;&lt;</a>(ostream&amp; s,<span class="keyword">const</span> <a class="code" href="classipl_1_1CPalette.html">CPalette</a>&amp; Pal)
00131 {
00132         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> EntriesPrLine=4;
00133         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> count1,count2;
00134         UINT32 PalValue;
00135         s &lt;&lt; <span class="stringliteral">"*************** Palette info *******************"</span> &lt;&lt; endl;
00136         s &lt;&lt; <span class="stringliteral">" Total entries: "</span> &lt;&lt; Pal.<a class="code" href="classipl_1_1CPalette.html#a7">GetNumberOfEntries</a>() &lt;&lt; endl;
00137         s &lt;&lt; <span class="stringliteral">" Values: Index=\"R G B\""</span> &lt;&lt; endl;
00138         <span class="keywordflow">for</span>(count1=0; count1&lt;Pal.<a class="code" href="classipl_1_1CPalette.html#a7">GetNumberOfEntries</a>()/EntriesPrLine; count1++)
00139         {
00140                 <span class="keywordflow">for</span>(count2=0; count2&lt;EntriesPrLine; count2++)
00141                 {
00142                         Pal.<a class="code" href="classipl_1_1CPalette.html#a8">GetColor</a>(count1*EntriesPrLine+count2,PalValue);
00143                         s &lt;&lt; count1*EntriesPrLine+count2 &lt;&lt; <span class="stringliteral">"=\""</span> &lt;&lt; (short)CPalette::GetRedVal(PalValue) &lt;&lt;
00144                                 <span class="stringliteral">" "</span> &lt;&lt; (short)CPalette::GetGreenVal(PalValue) &lt;&lt; <span class="stringliteral">" "</span> &lt;&lt; 
00145                                 (short)CPalette::GetBlueVal(PalValue) &lt;&lt; <span class="stringliteral">"\" "</span>;
00146                 }
00147                 s &lt;&lt; endl;
00148         }
00149         <span class="keywordflow">return</span> s;
00150 }
00151 
00152 } <span class="comment">// end ipl namespace</span>
</pre></div><!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html>

<head>
<meta name="GENERATOR" content="Microsoft FrontPage 4.0">
<title>Tag</title>
<base target="_top">
</head>

<body bgcolor="#FFFFFF">

<hr>

<p align="right"><font size="2"><em>Updated <!--webbot bot="Timestamp" s-type="EDITED" s-format="%d. %B %Y %H:%M" startspan -->21. juli 2002 12:29<!--webbot bot="Timestamp" endspan i-checksum="38834" --> by
<a href="http://www.mip.sdu.dk/~edr/">René Dencker
Eriksen</a>(<a href="mailto:edr@mip.sdu.dk">edr@mip.sdu.dk</a>)</em></font></p>
</body>
</html>
