<html>

<head>
<meta http-equiv="Content-Language" content="en-us">
<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
<link type="text/css" href="../../doxygen.css" rel="stylesheet">
<meta name="GENERATOR" content="Microsoft FrontPage 4.0">
<meta name="ProgId" content="FrontPage.Editor.Document">
<title>Image Processing Library 98</title>
</head>

<body>
<h2 align="center"><a href="http://www.mip.sdu.dk/ipl98" target="_blank"><img border="0" src="ipl_doc_header.gif" width="694" height="55"></a></h2>

</body>

</html>
<!-- Generated by Doxygen 1.2.17 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="modules.html">Modules</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="namespacemembers.html">Namespace Members</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; </center>
<hr><h1>/ipl98/cpp/byte_image.cpp</h1><div class="fragment"><pre>00001 <span class="comment">/********************************************************************</span>
00002 <span class="comment">   The Image Processing Library 98 - IPL98</span>
00003 <span class="comment">   Copyright (C) by René Dencker Eriksen - edr@mip.sdu.dk</span>
00004 <span class="comment"></span>
00005 <span class="comment">   This library is free software; you can redistribute it and/or</span>
00006 <span class="comment">   modify it under the terms of the GNU Lesser General Public</span>
00007 <span class="comment">   License as published by the Free Software Foundation. Only</span>
00008 <span class="comment">   addition is, that if the library is used in proprietary software</span>
00009 <span class="comment">   it must be stated that IPL98 was used.</span>
00010 <span class="comment"></span>
00011 <span class="comment">   This library is distributed in the hope that it will be useful,</span>
00012 <span class="comment">   but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
00013 <span class="comment">   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.</span>
00014 <span class="comment"></span>
00015 <span class="comment">   More details can be found in the file licence.txt distributed</span>
00016 <span class="comment">   with this library.</span>
00017 <span class="comment">*********************************************************************/</span>
00018 
00019 <span class="preprocessor">#include "byte_image.h"</span>
00020 <span class="preprocessor">#include "../kernel_c/byte_image/b_kernel_functions.h"</span>
00021 <span class="preprocessor">#include "../kernel_c/kernel_history.h"</span>
00022 
00023 <span class="keyword">namespace </span>ipl{
00024 
<a name="l00025"></a><a class="code" href="classipl_1_1CByteImage.html#a0">00025</a> CByteImage::CByteImage()
00026 {
00027         <span class="comment">// default constructor</span>
00028         kB_InitImage(&amp;<a class="code" href="classipl_1_1CStdImage.html#n0">m_Image</a>); <span class="comment">// always initialise m_Image in constr.</span>
00029         kB_EmptyImage(&amp;<a class="code" href="classipl_1_1CStdImage.html#n0">m_Image</a>); <span class="comment">// start with empty</span>
00030         <a class="code" href="classipl_1_1CStdImage.html#m0">m_Pal</a>.<a class="code" href="classipl_1_1CPalette.html#a5">SetPalettePtr</a>(&amp;<a class="code" href="classipl_1_1CStdImage.html#n0">m_Image</a>.<a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTImage.html#m0">Pal</a>); <span class="comment">// initialise the palette class</span>
00031         <a class="code" href="classipl_1_1CGenericImage.html#n0">m_ROIActive</a>=<span class="keyword">false</span>;
00032 }
00033 
<a name="l00034"></a><a class="code" href="classipl_1_1CByteImage.html#a1">00034</a> CByteImage::CByteImage(UINT32 Width,UINT32 Height, UINT32 Color)
00035 {
00036         <span class="comment">//constr. for empty image</span>
00037         kB_InitImage(&amp;<a class="code" href="classipl_1_1CStdImage.html#n0">m_Image</a>); <span class="comment">// always initialise m_Image in constr.</span>
00038         kB_AllocImage(Width,Height,&amp;<a class="code" href="classipl_1_1CStdImage.html#n0">m_Image</a>);
00039         <a class="code" href="classipl_1_1CByteImage.html#m0">m_ppPixel</a>=<a class="code" href="classipl_1_1CStdImage.html#n0">m_Image</a>.<a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTImage.html#m11">ppMatrix</a>;
00040         <a class="code" href="classipl_1_1CStdImage.html#m0">m_Pal</a>.<a class="code" href="classipl_1_1CPalette.html#a5">SetPalettePtr</a>(&amp;<a class="code" href="classipl_1_1CStdImage.html#n0">m_Image</a>.<a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTImage.html#m0">Pal</a>);
00041         <a class="code" href="classipl_1_1CGenericImage.html#n0">m_ROIActive</a>=<span class="keyword">false</span>;
00042         <span class="keywordflow">if</span> (Color!=0)
00043                 <a class="code" href="classipl_1_1CStdImage.html#a16">Flush</a>(Color);
00044 }
00045 
<a name="l00046"></a><a class="code" href="classipl_1_1CByteImage.html#a2">00046</a> CByteImage::CByteImage(<span class="keyword">const</span> <a class="code" href="classipl_1_1CByteImage.html">CByteImage</a>&amp; SourceImage)
00047 {
00048         <span class="comment">// copy constructor</span>
00049         kB_InitImage(&amp;<a class="code" href="classipl_1_1CStdImage.html#n0">m_Image</a>); <span class="comment">// always initialise m_Image in constr.</span>
00050         *<span class="keyword">this</span>=SourceImage; <span class="comment">// use assignment operator</span>
00051 }
00052 
<a name="l00053"></a><a class="code" href="classipl_1_1CByteImage.html#a3">00053</a> CByteImage::~CByteImage()
00054 { <span class="comment">//destructor</span>
00055         kB_EmptyImage(&amp;<a class="code" href="classipl_1_1CStdImage.html#n0">m_Image</a>);
00056 }
00057 
<a name="l00058"></a><a class="code" href="classipl_1_1CByteImage.html#a4">00058</a> <a class="code" href="classipl_1_1CByteImage.html">CByteImage</a>&amp; CByteImage::operator=(<span class="keyword">const</span> <a class="code" href="classipl_1_1CStdImage.html">CStdImage</a>&amp; SourceImage)
00059 {
00060         <span class="comment">// overloading of assignment operator</span>
00061         <span class="keywordflow">if</span> (SourceImage.<a class="code" href="classipl_1_1CStdImage.html#a68">GetBits</a>()!=8)
00062         {
00063                 ostringstream ost;
00064                 ost &lt;&lt; <span class="stringliteral">"CByteImage::operator=() Right hand side of '='-operator must be 8 b/p "</span>
00065                         <span class="stringliteral">"(current is "</span> &lt;&lt; SourceImage.<a class="code" href="classipl_1_1CStdImage.html#a68">GetBits</a>() &lt;&lt; <span class="stringliteral">" b/p)"</span> &lt;&lt; IPLAddFileAndLine;
00066                 CError::ShowMessage(IPL_ERROR,ost.str().c_str());
00067                 <span class="keywordflow">return</span> *<span class="keyword">this</span>;
00068         }
00069         CStdImage::operator=(SourceImage);
00070         <a class="code" href="classipl_1_1CByteImage.html#m0">m_ppPixel</a>=<a class="code" href="classipl_1_1CStdImage.html#n0">m_Image</a>.<a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTImage.html#m11">ppMatrix</a>;
00071         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
00072 }
00073 
<a name="l00074"></a><a class="code" href="classipl_1_1CByteImage.html#a5">00074</a> <a class="code" href="classipl_1_1CByteImage.html">CByteImage</a>&amp; CByteImage::operator=(<span class="keyword">const</span> <a class="code" href="classipl_1_1CByteImage.html">CByteImage</a>&amp; SourceImage)
00075 {
00076         <span class="comment">// overloading of assignment operator</span>
00077         <span class="keywordflow">if</span> (<span class="keyword">this</span> != &amp;SourceImage)
00078         {
00079                 <span class="comment">// ok to do assignment</span>
00080                 <span class="comment">// no copying if source is empty</span>
00081                 <span class="keywordflow">if</span> (SourceImage.<a class="code" href="classipl_1_1CStdImage.html#a69">GetOrigin</a>()!=EMPTY)
00082                 {
00083 <span class="preprocessor">#ifdef IPL_ADD_HISTORY</span>
00084 <span class="preprocessor"></span>                        k_IplStartHistoryMacro();
00085 <span class="preprocessor">#endif</span>
00086 <span class="preprocessor"></span>                        <span class="comment">/* call kernel function */</span>
00087                         kB_CopyImage(&amp;<a class="code" href="classipl_1_1CStdImage.html#n0">m_Image</a>,SourceImage.<a class="code" href="classipl_1_1CStdImage.html#a61">GetConstTImagePtr</a>());
00088                         <span class="comment">/* set pointers */</span>
00089                         <a class="code" href="classipl_1_1CStdImage.html#m0">m_Pal</a>.<a class="code" href="classipl_1_1CPalette.html#a5">SetPalettePtr</a>(&amp;<a class="code" href="classipl_1_1CStdImage.html#n0">m_Image</a>.<a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTImage.html#m0">Pal</a>);
00090                         <a class="code" href="classipl_1_1CStdImage.html#m1">m_History</a>.<a class="code" href="classipl_1_1CText.html#a4">SetTextPtr</a>(&amp;<a class="code" href="classipl_1_1CStdImage.html#n0">m_Image</a>.<a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTImage.html#m2">History</a>);
00091                         <a class="code" href="classipl_1_1CByteImage.html#m0">m_ppPixel</a>=<a class="code" href="classipl_1_1CStdImage.html#n0">m_Image</a>.<a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTImage.html#m11">ppMatrix</a>;
00092                         <span class="comment">/* copy ROI */</span>
00093                         <a class="code" href="classipl_1_1CGenericImage.html#n0">m_ROIActive</a>=SourceImage.<a class="code" href="classipl_1_1CGenericImage.html#n0">m_ROIActive</a>;
00094                         <span class="keywordflow">if</span> (<a class="code" href="classipl_1_1CGenericImage.html#n0">m_ROIActive</a>==<span class="keyword">true</span>)
00095                         {
00096                                 <a class="code" href="classipl_1_1CGenericImage.html#n1">m_ROIUpperLeft</a>=SourceImage.<a class="code" href="classipl_1_1CGenericImage.html#n1">m_ROIUpperLeft</a>;
00097                                 <a class="code" href="classipl_1_1CGenericImage.html#n2">m_ROILowerRight</a>=SourceImage.<a class="code" href="classipl_1_1CGenericImage.html#n2">m_ROILowerRight</a>;
00098                         }
00099 <span class="preprocessor">#ifdef IPL_ADD_HISTORY</span>
00100 <span class="preprocessor"></span>                        <span class="comment">/* this is a really bad hack! Removing the last line added by the C code from</span>
00101 <span class="comment">                           this objects history, inserting the C++ line and appending the just removed</span>
00102 <span class="comment">                           line again. This assumes that only one line is added by the C code. */</span>
00103                         string HistoryTemp;
00104                         <a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTString.html">TString</a> History;
00105                         k_InitString(&amp;History);
00106                         <span class="comment">/* end history appending (remove a leading '\t' character) */</span>
00107                         k_IplStopHistoryMacro();
00108                         k_SprintfString(&amp;History,<span class="stringliteral">"%sCByteImage::operator="</span>,ipl_HistoryIndent);
00109                         <a class="code" href="classipl_1_1CStdImage.html#m1">m_History</a>.<a class="code" href="classipl_1_1CText.html#a12">GetItem</a>(<a class="code" href="classipl_1_1CStdImage.html#m1">m_History</a>.<a class="code" href="classipl_1_1CText.html#a13">TotalItems</a>()-1,HistoryTemp);
00110                         <a class="code" href="classipl_1_1CStdImage.html#m1">m_History</a>.<a class="code" href="classipl_1_1CText.html#a23">RemoveLastLine</a>();
00111                         <a class="code" href="classipl_1_1CStdImage.html#m1">m_History</a>.<a class="code" href="classipl_1_1CText.html#a7">AppendIPL</a>(History.<a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTString.html#m2">pChars</a>);
00112                         <span class="keywordtype">int</span> k=HistoryTemp.find_first_of(<span class="stringliteral">"\t"</span>);
00113                         <a class="code" href="classipl_1_1CStdImage.html#m1">m_History</a>.<a class="code" href="classipl_1_1CText.html#a7">AppendIPL</a>(HistoryTemp.substr(k,HistoryTemp.size()-1-k));
00114                         k_EmptyString(&amp;History);
00115 <span class="preprocessor">#endif</span>
00116 <span class="preprocessor"></span>                }
00117                 <span class="keywordflow">else</span>
00118                 {
00119                         kB_EmptyImage(&amp;<a class="code" href="classipl_1_1CStdImage.html#n0">m_Image</a>); <span class="comment">// empty image in all cases</span>
00120                 }
00121 
00122         }
00123         <span class="keywordflow">else</span>
00124         {
00125                 ostringstream ost;
00126                 ost &lt;&lt; <span class="stringliteral">"CByteImage::operator=() Cannot assign CByteImage to itself"</span> &lt;&lt; IPLAddFileAndLine;
00127                 CError::ShowMessage(IPL_ERROR,ost.str().c_str());
00128         }
00129         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
00130 }
00131 
<a name="l00132"></a><a class="code" href="classipl_1_1CByteImage.html#a6">00132</a> <span class="keywordtype">bool</span> CByteImage::Alloc(UINT32 Width, UINT32 Height, UINT16 Bits, UINT32 Color)
00133 {
00134         <span class="keywordtype">bool</span> ReturnValue;
00135         <span class="keywordflow">if</span> (Bits!=8)
00136         {
00137                 ostringstream ost;
00138                 ost &lt;&lt; <span class="stringliteral">"CByteImage::Alloc() The parameter Bits must be 8 (current is "</span> &lt;&lt; Bits &lt;&lt; <span class="stringliteral">")"</span> &lt;&lt; IPLAddFileAndLine;
00139                 CError::ShowMessage(IPL_ERROR,ost.str().c_str());
00140                 ReturnValue=<span class="keyword">false</span>;
00141         }
00142         <span class="keywordflow">else</span>
00143         {
00144                 ReturnValue=kB_AllocImage(Width,Height,&amp;<a class="code" href="classipl_1_1CStdImage.html#n0">m_Image</a>);
00145                 <span class="keywordflow">if</span> (ReturnValue==<span class="keyword">false</span>)
00146                 {
00147                         ostringstream ost;
00148                         ost &lt;&lt; <span class="stringliteral">"CByteImage::Alloc() Failed allocating image"</span> &lt;&lt; IPLAddFileAndLine;
00149                         CError::ShowMessage(IPL_ERROR,ost.str().c_str());
00150                 }
00151                 <span class="keywordflow">else</span>
00152                 {
00153                         <span class="keywordflow">if</span> (Color!=0)
00154                                 <a class="code" href="classipl_1_1CStdImage.html#a16">Flush</a>(Color);
00155                 }
00156                 <a class="code" href="classipl_1_1CByteImage.html#m0">m_ppPixel</a>=<a class="code" href="classipl_1_1CStdImage.html#n0">m_Image</a>.<a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTImage.html#m11">ppMatrix</a>;
00157                 <a class="code" href="classipl_1_1CGenericImage.html#n0">m_ROIActive</a>=<span class="keyword">false</span>;
00158         }
00159         <span class="keywordflow">return</span> ReturnValue;
00160 }
00161 
<a name="l00162"></a><a class="code" href="classipl_1_1CByteImage.html#a7">00162</a> <span class="keywordtype">bool</span> CByteImage::Alloc(UINT32 Width, UINT32 Height)
00163 {
00164         <span class="keywordtype">bool</span> ReturnValue=kB_AllocImage(Width,Height,&amp;<a class="code" href="classipl_1_1CStdImage.html#n0">m_Image</a>);
00165         <span class="keywordflow">if</span> (ReturnValue==<span class="keyword">false</span>)
00166         {
00167                 ostringstream ost;
00168                 ost &lt;&lt; <span class="stringliteral">"CByteImage::Alloc() Failed allocating image"</span> &lt;&lt; IPLAddFileAndLine;
00169                 CError::ShowMessage(IPL_ERROR,ost.str().c_str());
00170         }
00171         <a class="code" href="classipl_1_1CByteImage.html#m0">m_ppPixel</a>=<a class="code" href="classipl_1_1CStdImage.html#n0">m_Image</a>.<a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTImage.html#m11">ppMatrix</a>;
00172         <a class="code" href="classipl_1_1CGenericImage.html#n0">m_ROIActive</a>=<span class="keyword">false</span>;
00173         <span class="keywordflow">return</span> ReturnValue;
00174 }
00175 
<a name="l00176"></a><a class="code" href="classipl_1_1CByteImage.html#a8">00176</a> <span class="keywordtype">bool</span> CByteImage::AllocFast(UINT32 Width, UINT32 Height, UINT16 Bits)
00177 {
00178         <span class="keywordtype">bool</span> ReturnValue;
00179         <span class="keywordflow">if</span> (Bits!=8)
00180         {
00181                 ostringstream ost;
00182                 ost &lt;&lt; <span class="stringliteral">"CByteImage::AllocFast() The parameter Bits must be 8 (current is "</span> &lt;&lt; Bits &lt;&lt; <span class="stringliteral">")"</span> &lt;&lt; IPLAddFileAndLine;
00183                 CError::ShowMessage(IPL_ERROR,ost.str().c_str());
00184                 ReturnValue=<span class="keyword">false</span>;
00185         }
00186         <span class="keywordflow">else</span>
00187         {
00188                 ReturnValue=kB_AllocImageFast(Width,Height,&amp;<a class="code" href="classipl_1_1CStdImage.html#n0">m_Image</a>);
00189                 <span class="keywordflow">if</span> (ReturnValue==<span class="keyword">false</span>)
00190                 {
00191                         ostringstream ost;
00192                         ost &lt;&lt; <span class="stringliteral">"CByteImage::AllocFast() Failed allocating image"</span> &lt;&lt; IPLAddFileAndLine;
00193                         CError::ShowMessage(IPL_ERROR,ost.str().c_str());
00194                 }
00195                 <a class="code" href="classipl_1_1CByteImage.html#m0">m_ppPixel</a>=<a class="code" href="classipl_1_1CStdImage.html#n0">m_Image</a>.<a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTImage.html#m11">ppMatrix</a>;
00196                 <a class="code" href="classipl_1_1CGenericImage.html#n0">m_ROIActive</a>=<span class="keyword">false</span>;
00197         }
00198         <span class="keywordflow">return</span> ReturnValue;
00199 }
00200 
<a name="l00201"></a><a class="code" href="classipl_1_1CByteImage.html#a9">00201</a> <span class="keywordtype">bool</span> CByteImage::AllocFast(UINT32 Width, UINT32 Height)
00202 {
00203         <span class="keywordtype">bool</span> ReturnValue=kB_AllocImageFast(Width,Height,&amp;<a class="code" href="classipl_1_1CStdImage.html#n0">m_Image</a>);
00204         <span class="keywordflow">if</span> (ReturnValue==<span class="keyword">false</span>)
00205         {
00206                 ostringstream ost;
00207                 ost &lt;&lt; <span class="stringliteral">"CByteImage::AllocFast() Failed allocating image"</span> &lt;&lt; IPLAddFileAndLine;
00208                 CError::ShowMessage(IPL_ERROR,ost.str().c_str());
00209         }
00210         <a class="code" href="classipl_1_1CByteImage.html#m0">m_ppPixel</a>=<a class="code" href="classipl_1_1CStdImage.html#n0">m_Image</a>.<a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTImage.html#m11">ppMatrix</a>;
00211         <a class="code" href="classipl_1_1CGenericImage.html#n0">m_ROIActive</a>=<span class="keyword">false</span>;
00212         <span class="keywordflow">return</span> ReturnValue;
00213 }
00214 
<a name="l00215"></a><a class="code" href="classipl_1_1CByteImage.html#a10">00215</a> <span class="keywordtype">bool</span> CByteImage::CopySubImage(<a class="code" href="classipl_1_1CStdImage.html">CStdImage</a>&amp; SourceImage,<span class="keywordtype">int</span> xmin,<span class="keywordtype">int</span> ymin,
00216                                   <span class="keywordtype">int</span> xmax, <span class="keywordtype">int</span> ymax)
00217 {
00218 <span class="preprocessor">#ifdef IPL_ADD_HISTORY</span>
00219 <span class="preprocessor"></span>        <span class="comment">/* add comment to history, done by adding to source and removing later (hack) */</span>
00220         <a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTString.html">TString</a> History;
00221         k_InitString(&amp;History);
00222         k_SprintfString(&amp;History,<span class="stringliteral">"%sCByteImage::CopySubImage(xmin=%d,ymin=%d,xmax=%d,ymax=%d) Source image file info: %s"</span>,
00223                 ipl_HistoryIndent,xmin,ymin,xmax,ymax,SourceImage.<a class="code" href="classipl_1_1CStdImage.html#a61">GetConstTImagePtr</a>()-&gt;<a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTImage.html#m1">FileInfo</a>.<a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTFileInfo.html#m2">PathAndFileName</a>);
00224         SourceImage.<a class="code" href="classipl_1_1CStdImage.html#m1">m_History</a>.<a class="code" href="classipl_1_1CText.html#a7">AppendIPL</a>(History.<a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTString.html#m2">pChars</a>);
00225         k_EmptyString(&amp;History);
00226         k_IplStartHistoryMacro();
00227 <span class="preprocessor">#endif</span>
00228 <span class="preprocessor"></span>        <span class="comment">/* call base class method */</span>
00229         <span class="keywordtype">bool</span> ReturnValue=kB_CopySubImage(xmin,ymin,xmax,ymax,&amp;<a class="code" href="classipl_1_1CStdImage.html#n0">m_Image</a>,SourceImage.<a class="code" href="classipl_1_1CStdImage.html#a62">GetTImagePtr</a>());
00230         <span class="keywordflow">if</span> (ReturnValue==<span class="keyword">false</span>)
00231         {
00232                 ostringstream ost;
00233                 ost &lt;&lt; <span class="stringliteral">"CByteImage::CopySubImage() Failed copying subimage"</span> &lt;&lt; IPLAddFileAndLine;
00234                 CError::ShowMessage(IPL_ERROR,ost.str().c_str());
00235         }
00236         <span class="keywordflow">else</span>
00237                 <a class="code" href="classipl_1_1CGenericImage.html#n0">m_ROIActive</a>=<span class="keyword">false</span>;
00238 
00239         <a class="code" href="classipl_1_1CByteImage.html#m0">m_ppPixel</a>=<a class="code" href="classipl_1_1CStdImage.html#n0">m_Image</a>.<a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTImage.html#m11">ppMatrix</a>;
00240 <span class="preprocessor">#ifdef IPL_ADD_HISTORY</span>
00241 <span class="preprocessor"></span>        <span class="keywordflow">if</span> (&amp;SourceImage!=<span class="keyword">this</span>)
00242         {
00243                 <span class="comment">/* remove the history just added to the source image */</span>
00244                 SourceImage.<a class="code" href="classipl_1_1CStdImage.html#m1">m_History</a>.<a class="code" href="classipl_1_1CText.html#a23">RemoveLastLine</a>();
00245         }
00246         <span class="comment">/* end history appending (remove a leading '\t' character) */</span>
00247         k_IplStopHistoryMacro();
00248 <span class="preprocessor">#endif</span>
00249 <span class="preprocessor"></span>        <span class="keywordflow">return</span> ReturnValue;
00250 }
00251 
<a name="l00252"></a><a class="code" href="classipl_1_1CByteImage.html#a11">00252</a> <span class="keywordtype">bool</span> CByteImage::CopySubImage(<a class="code" href="classipl_1_1CStdImage.html">CStdImage</a>&amp; SourceImage,<span class="keyword">const</span> <a class="code" href="classCPoint2D.html">CPoint2D&lt;int&gt;</a>&amp; UpperLeft,
00253                   <span class="keyword">const</span> <a class="code" href="classCPoint2D.html">CPoint2D&lt;int&gt;</a>&amp; LowerRight)
00254 {
00255 <span class="preprocessor">#ifdef IPL_ADD_HISTORY</span>
00256 <span class="preprocessor"></span>        <span class="comment">/* add comment to history, done by adding to source and removing later (hack) */</span>
00257         <a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTString.html">TString</a> History;
00258         k_InitString(&amp;History);
00259         k_SprintfString(&amp;History,<span class="stringliteral">"%sCByteImage::CopySubImage(UpperLeft=(%d,%d),LowerLeft=(%d,%d)) Source image file info: %s"</span>,
00260                 ipl_HistoryIndent,UpperLeft.<a class="code" href="classCPoint2D.html#a13">GetX</a>(),UpperLeft.<a class="code" href="classCPoint2D.html#a14">GetY</a>(),LowerRight.<a class="code" href="classCPoint2D.html#a13">GetX</a>(),LowerRight.<a class="code" href="classCPoint2D.html#a14">GetY</a>(),SourceImage.<a class="code" href="classipl_1_1CStdImage.html#a61">GetConstTImagePtr</a>()-&gt;<a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTImage.html#m1">FileInfo</a>.<a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTFileInfo.html#m2">PathAndFileName</a>);
00261         SourceImage.<a class="code" href="classipl_1_1CStdImage.html#m1">m_History</a>.<a class="code" href="classipl_1_1CText.html#a7">AppendIPL</a>(History.<a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTString.html#m2">pChars</a>);
00262         k_EmptyString(&amp;History);
00263         k_IplStartHistoryMacro();
00264 <span class="preprocessor">#endif</span>
00265 <span class="preprocessor"></span>        <span class="comment">/* call base class method */</span>
00266         <span class="keywordtype">bool</span> ReturnValue=kB_CopySubImage(UpperLeft.<a class="code" href="classCPoint2D.html#a13">GetX</a>(),UpperLeft.<a class="code" href="classCPoint2D.html#a14">GetY</a>(),LowerRight.<a class="code" href="classCPoint2D.html#a13">GetX</a>(),
00267                                         LowerRight.<a class="code" href="classCPoint2D.html#a14">GetY</a>(),&amp;<a class="code" href="classipl_1_1CStdImage.html#n0">m_Image</a>,SourceImage.<a class="code" href="classipl_1_1CStdImage.html#a62">GetTImagePtr</a>());
00268         <span class="keywordflow">if</span> (ReturnValue==<span class="keyword">false</span>)
00269         {
00270                 ostringstream ost;
00271                 ost &lt;&lt; <span class="stringliteral">"CByteImage::CopySubImage() Failed copying subimage"</span> &lt;&lt; IPLAddFileAndLine;
00272                 CError::ShowMessage(IPL_ERROR,ost.str().c_str());
00273                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
00274         }
00275         <a class="code" href="classipl_1_1CByteImage.html#m0">m_ppPixel</a>=<a class="code" href="classipl_1_1CStdImage.html#n0">m_Image</a>.<a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTImage.html#m11">ppMatrix</a>;     
00276 <span class="preprocessor">#ifdef IPL_ADD_HISTORY</span>
00277 <span class="preprocessor"></span>        <span class="keywordflow">if</span> (&amp;SourceImage!=<span class="keyword">this</span>)
00278         {
00279                 <span class="comment">/* remove the history just added to the source image */</span>
00280                 SourceImage.<a class="code" href="classipl_1_1CStdImage.html#m1">m_History</a>.<a class="code" href="classipl_1_1CText.html#a23">RemoveLastLine</a>();
00281         }
00282         <span class="comment">/* end history appending (remove a leading '\t' character) */</span>
00283         k_IplStopHistoryMacro();
00284 <span class="preprocessor">#endif</span>
00285 <span class="preprocessor"></span>        <span class="keywordflow">return</span> ReturnValue;
00286 }
00287 
<a name="l00288"></a><a class="code" href="classipl_1_1CByteImage.html#a12">00288</a> <span class="keywordtype">bool</span> CByteImage::SetBorder(UINT16 Size, UINT32 Color)
00289 {
00290         <span class="comment">// Set the size of image border</span>
00291         <span class="keywordtype">bool</span> returnValue=CStdImage::SetBorder(Size,Color);
00292         <a class="code" href="classipl_1_1CByteImage.html#m0">m_ppPixel</a>=<a class="code" href="classipl_1_1CStdImage.html#n0">m_Image</a>.<a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTImage.html#m11">ppMatrix</a>;     
00293         <span class="keywordflow">return</span> returnValue;
00294 }
00295 
<a name="l00296"></a><a class="code" href="classipl_1_1CByteImage.html#a13">00296</a> <span class="keywordtype">bool</span> CByteImage::SetBorderSize(UINT16 Size)
00297 {
00298         <span class="keywordtype">bool</span> returnValue=CStdImage::SetBorderSize(Size);
00299         <a class="code" href="classipl_1_1CByteImage.html#m0">m_ppPixel</a>=<a class="code" href="classipl_1_1CStdImage.html#n0">m_Image</a>.<a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTImage.html#m11">ppMatrix</a>;     
00300         <span class="keywordflow">return</span> returnValue;
00301 }
00302 
<a name="l00303"></a><a class="code" href="classipl_1_1CByteImage.html#a14">00303</a> <span class="keywordtype">bool</span> CByteImage::Load(<span class="keyword">const</span> <span class="keywordtype">char</span>* pPathAndFileName)
00304 {
00305 <span class="preprocessor">#ifdef IPL_ADD_HISTORY</span>
00306 <span class="preprocessor"></span>        <span class="comment">/* add comment to history */</span>
00307         <a class="code" href="classipl_1_1CText.html">CText</a> TempHistory;
00308         <a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTString.html">TString</a> History;
00309         k_InitString(&amp;History);
00310         k_SprintfString(&amp;History,<span class="stringliteral">"%sCByteImage::Load(%s)"</span>,ipl_HistoryIndent,pPathAndFileName);
00311         TempHistory.<a class="code" href="classipl_1_1CText.html#a7">AppendIPL</a>(History.<a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTString.html#m2">pChars</a>);
00312         k_EmptyString(&amp;History);
00313         k_IplStartHistoryMacro();
00314 <span class="preprocessor">#endif</span>
00315 <span class="preprocessor"></span>        <span class="comment">/* call kernel function */</span>
00316         <span class="keywordtype">bool</span> ReturnValue=k_Load(pPathAndFileName,&amp;<a class="code" href="classipl_1_1CStdImage.html#n0">m_Image</a>);
00317         <span class="keywordflow">if</span> (ReturnValue==<span class="keyword">true</span>)
00318         {
00319                 <span class="keywordflow">if</span> (<a class="code" href="classipl_1_1CStdImage.html#n0">m_Image</a>.<a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTImage.html#m6">Bits</a> != 8)
00320                 {
00321                         ostringstream ost;
00322                         ost &lt;&lt; <span class="stringliteral">"CByteImage::Load() Source is "</span> &lt;&lt; <a class="code" href="classipl_1_1CStdImage.html#n0">m_Image</a>.<a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTImage.html#m6">Bits</a> &lt;&lt; 
00323                                 <span class="stringliteral">" b/p - can only load 8 b/p (may be changed in future versions)"</span> &lt;&lt; IPLAddFileAndLine;
00324                         CError::ShowMessage(IPL_ERROR,ost.str().c_str());
00325                         k_EmptyImage(&amp;<a class="code" href="classipl_1_1CStdImage.html#n0">m_Image</a>); <span class="comment">// empty loaded image</span>
00326                         ReturnValue=<span class="keyword">false</span>;
00327                 }
00328                 <span class="keywordflow">else</span>
00329                 {       
00330                         <span class="comment">// set the matrix "pointer" for a byte image</span>
00331                         kB_SetImageMatrix(&amp;<a class="code" href="classipl_1_1CStdImage.html#n0">m_Image</a>);
00332                         <a class="code" href="classipl_1_1CByteImage.html#m0">m_ppPixel</a>=<a class="code" href="classipl_1_1CStdImage.html#n0">m_Image</a>.<a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTImage.html#m11">ppMatrix</a>;
00333                         <a class="code" href="classipl_1_1CStdImage.html#m0">m_Pal</a>.<a class="code" href="classipl_1_1CPalette.html#a5">SetPalettePtr</a>(&amp;<a class="code" href="classipl_1_1CStdImage.html#n0">m_Image</a>.<a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTImage.html#m0">Pal</a>);
00334                         <a class="code" href="classipl_1_1CGenericImage.html#n0">m_ROIActive</a>=<span class="keyword">false</span>;
00335 <span class="preprocessor">#ifdef IPL_ADD_HISTORY</span>
00336 <span class="preprocessor"></span>                        <span class="comment">/* append the new created history in k_Load to the temporary history and</span>
00337 <span class="comment">                           copy the temporary history back to this objects history */</span>
00338                         TempHistory.<a class="code" href="classipl_1_1CText.html#a15">AddDate</a>(<span class="keyword">false</span>);
00339                         TempHistory.<a class="code" href="classipl_1_1CText.html#a14">AddTime</a>(<span class="keyword">false</span>);
00340                         <span class="keywordtype">bool</span> AddDate=<a class="code" href="classipl_1_1CStdImage.html#m1">m_History</a>.<a class="code" href="classipl_1_1CText.html#a15">AddDate</a>(<span class="keyword">false</span>);
00341                         <span class="keywordtype">bool</span> AddTime=<a class="code" href="classipl_1_1CStdImage.html#m1">m_History</a>.<a class="code" href="classipl_1_1CText.html#a14">AddTime</a>(<span class="keyword">false</span>);
00342                         TempHistory.<a class="code" href="classipl_1_1CText.html#a24">AppendCText</a>(<a class="code" href="classipl_1_1CStdImage.html#m1">m_History</a>);
00343                         <a class="code" href="classipl_1_1CStdImage.html#m1">m_History</a>=TempHistory;
00344                         <a class="code" href="classipl_1_1CStdImage.html#m1">m_History</a>.<a class="code" href="classipl_1_1CText.html#a15">AddDate</a>(AddDate);
00345                         <a class="code" href="classipl_1_1CStdImage.html#m1">m_History</a>.<a class="code" href="classipl_1_1CText.html#a14">AddTime</a>(AddTime);
00346 <span class="preprocessor">#endif</span>
00347 <span class="preprocessor"></span>                }
00348         }
00349         <span class="keywordflow">else</span>
00350         {
00351                 ostringstream ost;
00352                 ost &lt;&lt; <span class="stringliteral">"CByteImage::Load(\""</span> &lt;&lt; pPathAndFileName &lt;&lt; <span class="stringliteral">"\") Failed loading image"</span> &lt;&lt; IPLAddFileAndLine;
00353                 CError::ShowMessage(IPL_ERROR,ost.str().c_str());
00354         }
00355 <span class="preprocessor">#ifdef IPL_ADD_HISTORY</span>
00356 <span class="preprocessor"></span>        <span class="comment">/* end history appending (remove a leading '\t' character) */</span>
00357         k_IplStopHistoryMacro();
00358 <span class="preprocessor">#endif</span>
00359 <span class="preprocessor"></span>        <span class="keywordflow">return</span> ReturnValue;
00360 }
00361 
<a name="l00362"></a><a class="code" href="classipl_1_1CByteImage.html#a15">00362</a> <span class="keywordtype">bool</span> CByteImage::Load(<span class="keyword">const</span> string&amp; PathAndFileName)
00363 {
00364         <span class="keywordflow">return</span> <a class="code" href="classipl_1_1CByteImage.html#a14">Load</a>(PathAndFileName.c_str());
00365 }
00366 
<a name="l00367"></a><a class="code" href="classipl_1_1CByteImage.html#a16">00367</a> <span class="keywordtype">bool</span> CByteImage::Save(<span class="keyword">const</span> <span class="keywordtype">char</span>* pPathAndFileName)
00368 {
00369 <span class="preprocessor">#ifdef IPL_ADD_HISTORY</span>
00370 <span class="preprocessor"></span>        <span class="comment">/* add comment to history */</span>
00371         <a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTString.html">TString</a> History;
00372         k_InitString(&amp;History);
00373         k_SprintfString(&amp;History,<span class="stringliteral">"%sCStdImage::Save(%s)"</span>,ipl_HistoryIndent,pPathAndFileName);
00374         <a class="code" href="classipl_1_1CStdImage.html#m1">m_History</a>.<a class="code" href="classipl_1_1CText.html#a7">AppendIPL</a>(History.<a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTString.html#m2">pChars</a>);
00375         k_EmptyString(&amp;History);
00376         k_IplStartHistoryMacro();
00377 <span class="preprocessor">#endif</span>
00378 <span class="preprocessor"></span>        <span class="comment">/* call kernel function */</span>
00379         <span class="keywordtype">bool</span> ReturnValue=k_Save(pPathAndFileName,&amp;<a class="code" href="classipl_1_1CStdImage.html#n0">m_Image</a>);
00380         <span class="keywordflow">if</span> (ReturnValue==<span class="keyword">false</span>)
00381         {
00382                 ostringstream ost;
00383                 ost &lt;&lt; <span class="stringliteral">"CByteImage::Save(\""</span> &lt;&lt; pPathAndFileName &lt;&lt; <span class="stringliteral">"\") Failed saving image"</span> &lt;&lt; IPLAddFileAndLine;
00384                 CError::ShowMessage(IPL_ERROR,ost.str().c_str());
00385 <span class="preprocessor">#ifdef IPL_ADD_HISTORY</span>
00386 <span class="preprocessor"></span>                <span class="comment">/* remove the history line added above */</span>
00387                 <a class="code" href="classipl_1_1CStdImage.html#m1">m_History</a>.<a class="code" href="classipl_1_1CText.html#a23">RemoveLastLine</a>();
00388 <span class="preprocessor">#endif</span>
00389 <span class="preprocessor"></span>        }
00390 <span class="preprocessor">#ifdef IPL_ADD_HISTORY</span>
00391 <span class="preprocessor"></span>        <span class="comment">/* end history appending (remove a leading '\t' character) */</span>
00392         k_IplStopHistoryMacro();
00393 <span class="preprocessor">#endif</span>
00394 <span class="preprocessor"></span>        <span class="keywordflow">return</span> ReturnValue;
00395 }
00396 
<a name="l00397"></a><a class="code" href="classipl_1_1CByteImage.html#a17">00397</a> <span class="keywordtype">bool</span> CByteImage::Save(<span class="keyword">const</span> string&amp; PathAndFileName)
00398 {
00399         <span class="keywordflow">return</span> <a class="code" href="classipl_1_1CByteImage.html#a16">Save</a>(PathAndFileName.c_str());
00400 }
00401 
<a name="l00402"></a><a class="code" href="classipl_1_1CByteImage.html#a23">00402</a> <span class="keywordtype">bool</span> CByteImage::CopyConvert(UINT16 Bits,<a class="code" href="classipl_1_1CStdImage.html">CStdImage</a>&amp; SourceImage)
00403 {
00404         <span class="keywordflow">if</span> (Bits!=8)
00405         {
00406                 ostringstream ost;
00407                 ost &lt;&lt; <span class="stringliteral">"CByteImage::CopyConvert() Bits must be 8 instead of "</span> &lt;&lt; Bits &lt;&lt; IPLAddFileAndLine;
00408                 CError::ShowMessage(IPL_ERROR,ost.str().c_str());
00409                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
00410         }
00411         <span class="comment">/* add comment to history, done by adding to source and removing later (hack) */</span>
00412 <span class="preprocessor">#ifdef IPL_ADD_HISTORY</span>
00413 <span class="preprocessor"></span>        <a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTString.html">TString</a> History;
00414         k_InitString(&amp;History);
00415         k_SprintfString(&amp;History,<span class="stringliteral">"%sCByteImage::CopyConvert() From %d b/p to %d b/p, source image file info: %s"</span>,
00416                 ipl_HistoryIndent,SourceImage.<a class="code" href="classipl_1_1CStdImage.html#a68">GetBits</a>(),Bits,SourceImage.<a class="code" href="classipl_1_1CStdImage.html#a61">GetConstTImagePtr</a>()-&gt;<a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTImage.html#m1">FileInfo</a>.<a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTFileInfo.html#m2">PathAndFileName</a>);
00417         SourceImage.<a class="code" href="classipl_1_1CStdImage.html#m1">m_History</a>.<a class="code" href="classipl_1_1CText.html#a7">AppendIPL</a>(History.<a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTString.html#m2">pChars</a>);
00418         k_EmptyString(&amp;History);
00419         k_IplStartHistoryMacro();
00420 <span class="preprocessor">#endif</span>
00421 <span class="preprocessor"></span>        <span class="comment">/* call kernel function */</span>
00422         <span class="keywordtype">bool</span> ReturnValue=k_CopyConvert(Bits,&amp;<a class="code" href="classipl_1_1CStdImage.html#n0">m_Image</a>,SourceImage.<a class="code" href="classipl_1_1CStdImage.html#a61">GetConstTImagePtr</a>());
00423         <span class="keywordflow">if</span> (ReturnValue==<span class="keyword">false</span>)
00424         {
00425                 ostringstream ost;
00426                 ost &lt;&lt; <span class="stringliteral">"CByteImage::CopyConvert() Failed copying subimage"</span> &lt;&lt; IPLAddFileAndLine;
00427                 CError::ShowMessage(IPL_ERROR,ost.str().c_str());
00428         }
00429 <span class="preprocessor">#ifdef IPL_ADD_HISTORY</span>
00430 <span class="preprocessor"></span>        <span class="keywordflow">if</span> (&amp;SourceImage!=<span class="keyword">this</span>)
00431         {
00432                 <span class="comment">/* remove the history just added to the source image */</span>
00433                 SourceImage.<a class="code" href="classipl_1_1CStdImage.html#m1">m_History</a>.<a class="code" href="classipl_1_1CText.html#a23">RemoveLastLine</a>();
00434         }
00435         <span class="comment">/* end history appending (remove a leading '\t' character) */</span>
00436         k_IplStopHistoryMacro();
00437 <span class="preprocessor">#endif</span>
00438 <span class="preprocessor"></span>        <span class="keywordflow">return</span> ReturnValue;
00439 }
00440 
<a name="l00441"></a><a class="code" href="classipl_1_1CByteImage.html#a24">00441</a> <span class="keywordtype">void</span> CByteImage::PrintInfo()<span class="keyword"> const</span>
00442 <span class="keyword"></span>{
00443         kB_PrintImageInfo(&amp;<a class="code" href="classipl_1_1CStdImage.html#n0">m_Image</a>);
00444         <span class="comment">// write ROI information</span>
00445         <span class="keywordflow">if</span> (ROIActive()==<span class="keyword">true</span>)
00446         {
00447                 cout &lt;&lt; <span class="stringliteral">" ROI: "</span> &lt;&lt; <a class="code" href="classipl_1_1CGenericImage.html#z30_3">GetROIUpperLeft</a>() &lt;&lt; <span class="stringliteral">" -&gt; "</span> &lt;&lt; <a class="code" href="classipl_1_1CGenericImage.html#z30_4">GetROILowerRight</a>() &lt;&lt; endl;
00448         }
00449         <span class="keywordflow">else</span>
00450                 cout &lt;&lt; <span class="stringliteral">" ROI inactive"</span> &lt;&lt; endl;
00451 }
00452 
<a name="l00453"></a><a class="code" href="classipl_1_1CByteImage.html#a25">00453</a> <span class="keywordtype">void</span> CByteImage::PrintOrigin()<span class="keyword"> const</span>
00454 <span class="keyword"></span>{
00455         <a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/group__abstract.html#a36">k_PrintOrigin</a>(<a class="code" href="classipl_1_1CStdImage.html#n0">m_Image</a>.<a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTImage.html#m3">Origin</a>);
00456 }
00457 
<a name="l00458"></a><a class="code" href="classipl_1_1CByteImage.html#a13">00458</a> ostream&amp; <a class="code" href="namespaceipl.html#a3">operator&lt;&lt;</a>(ostream&amp; s,<span class="keyword">const</span> <a class="code" href="classipl_1_1CByteImage.html">CByteImage</a>&amp; Img)
00459 {
00460         s &lt;&lt; <span class="stringliteral">"**************** ByteImage info ********************\n"</span> &lt;&lt; 
00461                 <span class="stringliteral">" Width="</span> &lt;&lt; Img.<a class="code" href="classipl_1_1CByteImage.html#a18">GetWidth</a>() &lt;&lt; <span class="stringliteral">" Height="</span> &lt;&lt; Img.<a class="code" href="classipl_1_1CByteImage.html#a19">GetHeight</a>() &lt;&lt;
00462                 <span class="stringliteral">" ByteWidth="</span> &lt;&lt; Img.<a class="code" href="classipl_1_1CStdImage.html#a59">GetLineByteWidth</a>() &lt;&lt; <span class="stringliteral">" SizeImage="</span> &lt;&lt;
00463                 (Img.<a class="code" href="classipl_1_1CStdImage.html#a61">GetConstTImagePtr</a>())-&gt;TotalSize &lt;&lt; <span class="stringliteral">" Bits=8 (always!)"</span> &lt;&lt;
00464                 <span class="stringliteral">"\n PalEntries="</span> &lt;&lt; Img.<a class="code" href="classipl_1_1CStdImage.html#m0">m_Pal</a>.<a class="code" href="classipl_1_1CPalette.html#a7">GetNumberOfEntries</a>() &lt;&lt; <span class="stringliteral">" BorderSize="</span> &lt;&lt;
00465                 Img.<a class="code" href="classipl_1_1CStdImage.html#a52">GetBorderSize</a>() &lt;&lt; <span class="stringliteral">" Origo=(0,0) (always!)"</span> &lt;&lt; <span class="stringliteral">" Origin="</span>;
00466         
00467         <span class="keywordtype">char</span>* OriginStr;
00468         <a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/group__abstract.html#a35">k_GetOriginString</a>((Img.<a class="code" href="classipl_1_1CStdImage.html#a61">GetConstTImagePtr</a>())-&gt;Origin,&amp;OriginStr);
00469 
00470         s &lt;&lt; OriginStr &lt;&lt; endl;
00471         free(OriginStr);
00472         <span class="comment">// write ROI information</span>
00473         <span class="keywordflow">if</span> (Img.<a class="code" href="classipl_1_1CGenericImage.html#z30_0">ROIActive</a>()==<span class="keyword">true</span>)
00474         {
00475                 s &lt;&lt; <span class="stringliteral">" ROI: "</span> &lt;&lt; Img.<a class="code" href="classipl_1_1CGenericImage.html#z30_3">GetROIUpperLeft</a>() &lt;&lt; <span class="stringliteral">" -&gt; "</span> &lt;&lt; Img.<a class="code" href="classipl_1_1CGenericImage.html#z30_4">GetROILowerRight</a>() &lt;&lt; endl;
00476         }
00477         <span class="keywordflow">else</span>
00478                 s &lt;&lt; <span class="stringliteral">" ROI inactive"</span> &lt;&lt; endl;
00479 
00480         <span class="comment">// write file information</span>
00481         <span class="keyword">const</span> <a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTFileInfo.html">TFileInfo</a>* FileInfo=&amp;(Img.<a class="code" href="classipl_1_1CStdImage.html#a61">GetConstTImagePtr</a>())-&gt;FileInfo;
00482         <span class="keywordflow">if</span> (FileInfo-&gt;<a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTFileInfo.html#m0">FileName</a>!=NULL)
00483         {
00484                 s &lt;&lt; <span class="stringliteral">" File name: "</span> &lt;&lt; FileInfo-&gt;<a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTFileInfo.html#m0">FileName</a>;
00485         }
00486         <span class="keywordflow">else</span>
00487         {
00488                 s &lt;&lt; <span class="stringliteral">" File name: Not available"</span>;
00489         }
00490         <span class="keywordflow">if</span> (FileInfo-&gt;<a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTFileInfo.html#m1">PathName</a>!=NULL)
00491         {
00492                 s &lt;&lt; <span class="stringliteral">" File path: "</span> &lt;&lt; FileInfo-&gt;<a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTFileInfo.html#m1">PathName</a>;
00493         }
00494         <span class="keywordflow">else</span>
00495         {
00496                 s &lt;&lt; <span class="stringliteral">" File path: Not available"</span>;
00497         }
00498 
00499         <span class="keywordflow">return</span> s;
00500 }
00501 
00502 
00503 } <span class="comment">// end ipl namespace</span>
</pre></div><!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html>

<head>
<meta name="GENERATOR" content="Microsoft FrontPage 4.0">
<title>Tag</title>
<base target="_top">
</head>

<body bgcolor="#FFFFFF">

<hr>

<p align="right"><font size="2"><em>Updated <!--webbot bot="Timestamp" s-type="EDITED" s-format="%d. %B %Y %H:%M" startspan -->21. juli 2002 12:29<!--webbot bot="Timestamp" endspan i-checksum="38834" --> by
<a href="http://www.mip.sdu.dk/~edr/">René Dencker
Eriksen</a>(<a href="mailto:edr@mip.sdu.dk">edr@mip.sdu.dk</a>)</em></font></p>
</body>
</html>
