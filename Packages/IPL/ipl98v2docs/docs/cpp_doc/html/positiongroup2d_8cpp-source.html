<html>

<head>
<meta http-equiv="Content-Language" content="en-us">
<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
<link type="text/css" href="../../doxygen.css" rel="stylesheet">
<meta name="GENERATOR" content="Microsoft FrontPage 4.0">
<meta name="ProgId" content="FrontPage.Editor.Document">
<title>Image Processing Library 98</title>
</head>

<body>
<h2 align="center"><a href="http://www.mip.sdu.dk/ipl98" target="_blank"><img border="0" src="ipl_doc_header.gif" width="694" height="55"></a></h2>

</body>

</html>
<!-- Generated by Doxygen 1.2.17 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="modules.html">Modules</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="namespacemembers.html">Namespace Members</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; </center>
<hr><h1>/ipl98/cpp/positiongroup2d.cpp</h1><div class="fragment"><pre>00001 <span class="comment">/********************************************************************</span>
00002 <span class="comment">   The Image Processing Library 98 - IPL98</span>
00003 <span class="comment">   Copyright (C) by René Dencker Eriksen - edr@mip.sdu.dk</span>
00004 <span class="comment"></span>
00005 <span class="comment">   This library is free software; you can redistribute it and/or</span>
00006 <span class="comment">   modify it under the terms of the GNU Lesser General Public</span>
00007 <span class="comment">   License as published by the Free Software Foundation. Only</span>
00008 <span class="comment">   addition is, that if the library is used in proprietary software</span>
00009 <span class="comment">   it must be stated that IPL98 was used.</span>
00010 <span class="comment"></span>
00011 <span class="comment">   This library is distributed in the hope that it will be useful,</span>
00012 <span class="comment">   but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
00013 <span class="comment">   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.</span>
00014 <span class="comment"></span>
00015 <span class="comment">   More details can be found in the file licence.txt distributed</span>
00016 <span class="comment">   with this library.</span>
00017 <span class="comment">*********************************************************************/</span>
00018 
00019 <span class="keyword">using</span> std::ios_base;
00020 <span class="keyword">using</span> std::setprecision;
00021 <span class="keyword">using</span> std::setiosflags;
00022 
00023 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt; 
00024 CPositionGroup2D&lt;T&gt;::CPositionGroup2D(<span class="keyword">const</span> T&amp; InitBoundaryVal)
00025 {
00026         <span class="comment">// constructor</span>
00027         m_Right=InitBoundaryVal;
00028         m_Left=InitBoundaryVal;
00029         m_Bottom=InitBoundaryVal;
00030         m_Top=InitBoundaryVal;
00031 }
00032 
00033 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt; 
00034 CPositionGroup2D&lt;T&gt;::CPositionGroup2D(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> InitialSize)
00035 {
00036         m_Positions.reserve(InitialSize);
00037 }
00038 
00039 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt; 
00040 CPositionGroup2D&lt;T&gt;::CPositionGroup2D(<span class="keyword">const</span> CPositionGroup2D&amp; SourceGroup)
00041 { 
00042         <span class="comment">// copy constructor</span>
00043         *<span class="keyword">this</span>=SourceGroup; <span class="comment">// use assignment operator</span>
00044 }
00045 
00046 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt; 
00047 CPositionGroup2D&lt;T&gt;&amp; CPositionGroup2D&lt;T&gt;::operator=(<span class="keyword">const</span> CPositionGroup2D&amp; SourceGroup)
00048 {
00049         <span class="comment">// overloading of assignment operator</span>
00050         <span class="keywordflow">if</span> (<span class="keyword">this</span> != &amp;SourceGroup)
00051         {
00052                 <span class="comment">// ok to do assignment</span>
00053                 m_Positions=SourceGroup.m_Positions;
00054                 UpdateBoundaries();
00055         }
00056         <span class="keywordflow">else</span>
00057         {
00058                 ostringstream ost;
00059                 ost &lt;&lt; <span class="stringliteral">"CPositionGroup2D::operator=() Cannot assign CPositionGroup2D to itself"</span> &lt;&lt; IPLAddFileAndLine;
00060                 CError::ShowMessage(IPL_ERROR,ost.str().c_str());
00061         }
00062         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
00063 }
00064 
00065 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt; 
00066 CPositionGroup2D&lt;T&gt;::~CPositionGroup2D()
00067 {
00068         <span class="comment">//destructor</span>
00069 }
00070 
00071 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt; 
00072 <span class="keywordtype">void</span> CPositionGroup2D&lt;T&gt;::Empty()
00073 {
00074         m_Positions.clear();
00075         <span class="comment">// trick to clear capacity</span>
00076         vector&lt; T &gt; v=m_Positions;
00077         m_Positions.swap(v);
00078 }
00079 
00080 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt; 
00081 <span class="keywordtype">void</span> CPositionGroup2D&lt;T&gt;::EmptyNoDeallocation()
00082 {
00083         m_Positions.clear();
00084 }
00085 
00086 <span class="comment">//template&lt;class T&gt; </span>
00087 <span class="comment">//bool CPositionGroup2D&lt;T&gt;::InsertPosition(T x, T y, unsigned int Index)</span>
00088 <span class="comment">//{</span>
00089 <span class="comment">//      return InsertPosition(T(x,y),Index);</span>
00090 <span class="comment">//}</span>
00091 
00092 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt; 
00093 <span class="keywordtype">bool</span> CPositionGroup2D&lt;T&gt;::InsertPosition(T Pos, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> Index)
00094 {
00095         <span class="keywordflow">if</span> (Index&gt;=GetTotalPositions())
00096         {
00097                 ostringstream ost;
00098                 ost &lt;&lt; <span class="stringliteral">"CPositionGroup2D::InsertPosition() Index("</span> &lt;&lt; Index &lt;&lt; <span class="stringliteral">") out of range"</span> &lt;&lt; IPLAddFileAndLine;
00099                 CError::ShowMessage(IPL_ERROR,ost.str().c_str());
00100                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
00101         }
00102         <span class="keywordflow">else</span>
00103         {
00104                 vector&lt; T &gt; v;
00105                 v.assign(m_Positions.begin()+Index,m_Positions.end());
00106                 m_Positions[Index]=Pos;
00107                 m_Positions.resize(Index+1);
00108                 std::vector&lt; T &gt;::const_iterator it;
00109                 <span class="keywordflow">for</span>(it=v.begin(); it!=v.end(); ++it)
00110                 {
00111                         m_Positions.push_back(*it);
00112                 }
00113                 UpdateBoundaries(Pos);
00114                 <span class="keywordflow">return</span> <span class="keyword">true</span>;
00115         }
00116 }
00117 
00118 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt; 
00119 <span class="keywordtype">bool</span> CPositionGroup2D&lt;T&gt;::RemovePosition(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> Index)
00120 {
00121         <span class="keywordflow">if</span> (Index&gt;=GetTotalPositions())
00122         {
00123                 ostringstream ost;
00124                 ost &lt;&lt; <span class="stringliteral">"CPositionGroup2D::RemovePosition() Index("</span> &lt;&lt; Index &lt;&lt; <span class="stringliteral">") out of range"</span> &lt;&lt; IPLAddFileAndLine;
00125                 CError::ShowMessage(IPL_ERROR,ost.str().c_str());
00126                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
00127         }
00128         <span class="keywordflow">else</span>
00129         {
00130                 <span class="keywordflow">if</span> (Index!=(GetTotalPositions()-1))
00131                 {
00132                         m_Positions[Index]=m_Positions[GetTotalPositions()-1];
00133                 }
00134                 m_Positions.resize(GetTotalPositions()-1);
00135                 UpdateBoundaries();
00136                 <span class="keywordflow">return</span> <span class="keyword">true</span>;
00137         }
00138 }
00139 
00140 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt; 
00141 <span class="keywordtype">bool</span> CPositionGroup2D&lt;T&gt;::RemovePositionSlow(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> Index)
00142 {
00143         <span class="keywordflow">if</span> (Index&gt;=GetTotalPositions())
00144         {
00145                 ostringstream ost;
00146                 ost &lt;&lt; <span class="stringliteral">"CPositionGroup2D::RemovePositionSlow() Index("</span> &lt;&lt; Index &lt;&lt; <span class="stringliteral">") out of range"</span> &lt;&lt; IPLAddFileAndLine;
00147                 CError::ShowMessage(IPL_ERROR,ost.str().c_str());
00148                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
00149         }
00150         <span class="keywordflow">else</span>
00151         {
00152                 m_Positions.erase(m_Positions.begin()+Index);
00153                 UpdateBoundaries();
00154                 <span class="keywordflow">return</span> <span class="keyword">true</span>;
00155         }
00156 }
00157 
00158 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt; 
00159 <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> CPositionGroup2D&lt;T&gt;::RemoveDuplicates()
00160 {
00161         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> count1=0,count2;
00162         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> TotalPositions=GetTotalPositions();
00163         <span class="keywordtype">unsigned</span> PosRemoved=0;
00164         <span class="keywordflow">while</span>(count1&lt;TotalPositions)
00165         {
00166                 count2=count1+1;
00167                 <span class="keywordflow">while</span>(count2&lt;TotalPositions)
00168                 {
00169                         <span class="keywordflow">if</span> (m_Positions[count2]==m_Positions[count1])
00170                         {
00171                                 <span class="comment">/* Move last position to Index */</span>
00172                                 m_Positions[count2]=m_Positions[GetTotalPositions()-1];
00173                                 m_Positions.resize(GetTotalPositions()-1);
00174                                 PosRemoved++;
00175                         }
00176                         <span class="keywordflow">else</span>
00177                         {
00178                                 count2++;
00179                         }
00180                         TotalPositions=GetTotalPositions();
00181                 }
00182                 count1++;
00183         }
00184         <span class="keywordflow">return</span> PosRemoved;
00185 }
00186 
00187 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt; 
00188 <span class="keywordtype">void</span> CPositionGroup2D&lt;T&gt;::ReAllocPositions(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> NewSize)
00189 {
00190         <span class="keywordflow">if</span> (NewSize&gt;GetAllocatedPositions())
00191                 m_Positions.reserve(NewSize);
00192         <span class="keywordflow">else</span>
00193         {
00194                 <span class="keywordflow">if</span> (m_Positions.size()&gt;NewSize)
00195                         m_Positions.erase(m_Positions.begin()+NewSize,m_Positions.end());
00196                 vector&lt; T &gt; v=m_Positions;
00197                 m_Positions.swap(v);
00198                 <span class="keywordflow">if</span> (m_Positions.size()&lt;NewSize)
00199                         m_Positions.reserve(NewSize);
00200         }
00201 <span class="comment">//      k_ReAllocGroup(m_pGroup,NewSize);</span>
00202 }
00203 
00204 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt; 
00205 <span class="keywordtype">void</span> CPositionGroup2D&lt;T&gt;::AdjustSizeOfPositions()
00206 {
00207         <span class="comment">// trick to clear capacity</span>
00208         vector&lt; T &gt; v=m_Positions;
00209         m_Positions.swap(v);
00210 }
00211 
00212 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt; 
00213 <span class="keywordtype">bool</span> CPositionGroup2D&lt;T&gt;::PosInGroup(<span class="keyword">const</span> T&amp; Pos,<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>&amp; Index)
00214 {       
00215         std::vector&lt; T &gt;::const_iterator it1=m_Positions.begin(),it2;
00216         it2=it1;
00217         <span class="keywordflow">for</span>(; it1!=m_Positions.end(); ++it1)
00218         {
00219                 <span class="keywordflow">if</span> ((it1-&gt;GetX()==Pos.GetX()) &amp;&amp; (it1-&gt;GetY()==Pos.GetY()))
00220                 {
00221                         Index=it1-it2;
00222                         <span class="keywordflow">return</span> <span class="keyword">true</span>;
00223                 }
00224         }
00225         <span class="keywordflow">return</span> <span class="keyword">false</span>;
00226 }
00227 
00228 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt; 
00229 <span class="keywordtype">void</span> CPositionGroup2D&lt;T&gt;::PrintInfo(<span class="keywordtype">bool</span> PrintPositions,<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> PosPrLine, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> Precision)
00230 {
00231         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> x,y;
00232         <span class="keywordflow">if</span> (PosPrLine==0)
00233                 PosPrLine=1; <span class="comment">/* minimum one position on each line! */</span>
00234         cout &lt;&lt; <span class="stringliteral">"**************** Token group info ********************"</span> &lt;&lt; endl;
00235         cout &lt;&lt; <span class="stringliteral">" Positions: Top=("</span> &lt;&lt; m_Top.GetX() &lt;&lt; <span class="stringliteral">","</span> &lt;&lt; m_Top.GetY() &lt;&lt; <span class="stringliteral">") Bottom=("</span> 
00236                 &lt;&lt; m_Bottom.GetX() &lt;&lt; <span class="stringliteral">","</span> &lt;&lt; m_Bottom.GetY() &lt;&lt; <span class="stringliteral">") Left=("</span>
00237                 &lt;&lt; m_Left.GetX() &lt;&lt; <span class="stringliteral">","</span> &lt;&lt; m_Left.GetY() &lt;&lt; <span class="stringliteral">") Right=("</span> &lt;&lt; m_Right.GetX()
00238                 &lt;&lt; <span class="stringliteral">","</span> &lt;&lt; m_Right.GetY() &lt;&lt; <span class="stringliteral">")"</span> &lt;&lt; endl;
00239         cout &lt;&lt; <span class="stringliteral">" Width="</span> &lt;&lt; GetWidth() &lt;&lt; <span class="stringliteral">" Height="</span> &lt;&lt; GetHeight() &lt;&lt; endl;
00240         cout &lt;&lt; <span class="stringliteral">" Total positions="</span> &lt;&lt; m_Positions.size() &lt;&lt; <span class="stringliteral">" Allocated positions="</span> &lt;&lt;
00241                 m_Positions.capacity() &lt;&lt; endl;
00242         <span class="keywordflow">if</span> (PrintPositions==<span class="keyword">true</span>)
00243         {
00244                 ios_base::fmtflags Flags=cout.flags();
00245                 cout &lt;&lt; setprecision(Precision) &lt;&lt; setiosflags(ios_base::right);
00246                 cout &lt;&lt; endl;
00247                 <span class="keywordflow">if</span> (m_Positions.size()&gt;0)
00248                 {
00249                         <span class="keywordflow">for</span>(x=0; x&lt;(m_Positions.size()/PosPrLine); x++)
00250                         {
00251                                 <span class="keywordflow">for</span>(y=0; y&lt;PosPrLine; y++)
00252                                 {
00253                                         cout &lt;&lt; <span class="stringliteral">" pos "</span> &lt;&lt; x*PosPrLine+y &lt;&lt; <span class="stringliteral">"="</span> &lt;&lt; m_Positions[x*PosPrLine+y];
00254                                 }
00255                                 cout &lt;&lt; endl;
00256                         }
00257                         <span class="keywordflow">for</span>(y=m_Positions.size()-(m_Positions.size() %  PosPrLine);
00258                         y&lt;m_Positions.size(); y++)
00259                         {
00260                                 cout &lt;&lt; <span class="stringliteral">" pos "</span> &lt;&lt; y &lt;&lt; <span class="stringliteral">"="</span> &lt;&lt; m_Positions[y];
00261                         }
00262                         cout &lt;&lt; endl;                   
00263                 }
00264                 <span class="keywordflow">else</span>
00265                 {
00266                         cout &lt;&lt; <span class="stringliteral">"No positions in PositionGroup2D"</span> &lt;&lt; endl;
00267                 }
00268                 cout.flags(Flags);
00269         }
00270 }
00271 
00272 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt; 
<a name="l00273"></a><a class="code" href="classipl_1_1CPositionGroup2D.html#a0">00273</a> ostream&amp; operator&lt;&lt;(ostream&amp; s,const CPositionGroup2D&lt;T&gt;&amp; Group)
00274 {
00275         s &lt;&lt; <span class="stringliteral">"**************** PositionGroup2D info *****************\n"</span>;
00276         s &lt;&lt;    <span class="stringliteral">" Positions: Top=("</span> &lt;&lt; Group.GetTop().GetX() &lt;&lt; <span class="stringliteral">","</span> &lt;&lt; Group.GetTop().GetY() &lt;&lt; <span class="stringliteral">") Bottom=("</span> 
00277                 &lt;&lt; Group.GetBottom().GetX() &lt;&lt; <span class="stringliteral">","</span> &lt;&lt; Group.GetBottom().GetY() &lt;&lt; <span class="stringliteral">") Left=("</span>
00278                 &lt;&lt; Group.GetLeft().GetX() &lt;&lt; <span class="stringliteral">","</span> &lt;&lt; Group.GetLeft().GetY() &lt;&lt; <span class="stringliteral">") Right=("</span> &lt;&lt; Group.GetRight().GetX()
00279                 &lt;&lt; <span class="stringliteral">","</span> &lt;&lt; Group.GetRight().GetY() &lt;&lt; <span class="stringliteral">")"</span> &lt;&lt; endl;
00280         s &lt;&lt; <span class="stringliteral">" Width="</span> &lt;&lt; Group.GetWidth() &lt;&lt; <span class="stringliteral">" Height="</span> &lt;&lt; Group.GetHeight() &lt;&lt; endl;
00281         s &lt;&lt; <span class="stringliteral">" Total positions="</span> &lt;&lt; Group.GetTotalPositions() &lt;&lt; <span class="stringliteral">" Allocated positions="</span> &lt;&lt;
00282                 Group.GetAllocatedPositions() &lt;&lt; endl;
00283         <span class="keywordflow">return</span> s;
00284 }
00285 
00286 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt; 
00287 <span class="keywordtype">void</span> CPositionGroup2D&lt;T&gt;::UpdateBoundaries()
00288 {
00289         <span class="keywordflow">if</span> (<a class="code" href="classipl_1_1CPositionGroup2D.html#a15">GetTotalPositions</a>()&gt;0)
00290         {
00291                 <span class="comment">// update with first available position</span>
00292                 std::vector&lt; T &gt;::const_iterator it=m_Positions.begin();
00293                 <a class="code" href="classipl_1_1CPositionGroup2D.html#n4">m_Right</a>=*it;
00294                 <a class="code" href="classipl_1_1CPositionGroup2D.html#n3">m_Left</a>=*it;
00295                 <a class="code" href="classipl_1_1CPositionGroup2D.html#n2">m_Bottom</a>=*it;
00296                 <a class="code" href="classipl_1_1CPositionGroup2D.html#n1">m_Top</a>=*it;
00297                 <span class="keywordflow">for</span>(; it!=m_Positions.end(); ++it)
00298                         <a class="code" href="classipl_1_1CPositionGroup2D.html#a34">UpdateBoundaries</a>(*it);
00299         }
00300 }
00301 
00302 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt; 
00303 <span class="keywordtype">bool</span> CPositionGroup2D&lt;T&gt;::Load(<span class="keyword">const</span> <span class="keywordtype">char</span>* pPathAndFileName)
00304 {
00305         ifstream s(pPathAndFileName);
00306         <span class="keywordflow">if</span> (s.is_open()==<span class="keyword">true</span>)
00307         {
00308                 <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> TotalPositions;
00309                 <a class="code" href="classipl_1_1CPositionGroup2D.html#a7">Empty</a>(); <span class="comment">// delete all contents</span>
00310                 string str;
00311                 <a class="code" href="classipl_1_1CPositionGroup2D.html#b0">SkipSpaceAndComments</a>(s);
00312                 s &gt;&gt; str;
00313                 <span class="keywordflow">if</span> (str!=string(<span class="stringliteral">"CPositionGroup2D"</span>))
00314                 {
00315                         ostringstream ost;
00316                         ost &lt;&lt; <span class="stringliteral">"CPositionGroup2D&lt;T&gt;::Load() Did not find the token CPositionGroup2D in beginning of file"</span> &lt;&lt; IPLAddFileAndLine;
00317                         CError::ShowMessage(IPL_ERROR,ost.str().c_str());
00318                         s.close();
00319                         <span class="keywordflow">return</span> <span class="keyword">false</span>;
00320                 }
00321                 <a class="code" href="classipl_1_1CPositionGroup2D.html#b0">SkipSpaceAndComments</a>(s);
00322                 s &gt;&gt; str;
00323                 <span class="keywordflow">if</span> (str!=string(<span class="stringliteral">"TotalPositions"</span>))
00324                 {
00325                         ostringstream ost;
00326                         ost &lt;&lt; <span class="stringliteral">"CPositionGroup2D&lt;T&gt;::Load() Did not find the token 'TotalPositions'"</span> &lt;&lt; IPLAddFileAndLine;
00327                         CError::ShowMessage(IPL_ERROR,ost.str().c_str());
00328                         s.close();
00329                         <span class="keywordflow">return</span> <span class="keyword">false</span>;
00330                 }
00331                 <a class="code" href="classipl_1_1CPositionGroup2D.html#b0">SkipSpaceAndComments</a>(s);
00332                 s &gt;&gt; TotalPositions;
00333                 <a class="code" href="classipl_1_1CPositionGroup2D.html#b0">SkipSpaceAndComments</a>(s);
00334                 <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> x;
00335                 T P;
00336                 <span class="keywordflow">for</span>(x=0; x&lt;TotalPositions; x++)
00337                 {
00338                         <a class="code" href="classipl_1_1CPositionGroup2D.html#b0">SkipSpaceAndComments</a>(s);
00339                         <span class="comment">//P &lt;&lt; s;</span>
00340                         s &gt;&gt; P;
00341                         <a class="code" href="classipl_1_1CPositionGroup2D.html#a36">AddPositionFast</a>(P);
00342                         <a class="code" href="classipl_1_1CPositionGroup2D.html#b0">SkipSpaceAndComments</a>(s);
00343                 }
00344                 <a class="code" href="classipl_1_1CPositionGroup2D.html#a34">UpdateBoundaries</a>();
00345                 <span class="keywordflow">return</span> <span class="keyword">true</span>;
00346         }
00347         <span class="keywordflow">else</span>
00348         {
00349                 ostringstream ost;
00350                 ost &lt;&lt; <span class="stringliteral">"CPositionGroup2D&lt;T&gt;::Load() Failed opening file: "</span> &lt;&lt; pPathAndFileName &lt;&lt; IPLAddFileAndLine;
00351                 CError::ShowMessage(IPL_ERROR,ost.str().c_str());
00352                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
00353         }
00354 }
00355 
00356 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt; 
00357 <span class="keywordtype">bool</span> CPositionGroup2D&lt;T&gt;::Save(<span class="keyword">const</span> <span class="keywordtype">char</span>* pPathAndFileName)
00358 {
00359         ofstream s(pPathAndFileName);
00360         <span class="keywordflow">if</span> (s.is_open()==<span class="keyword">true</span>)
00361         {
00362                 s &lt;&lt; <span class="stringliteral">"# Data from a CPositionGroup2D object in IPL98"</span> &lt;&lt; endl;
00363                 s &lt;&lt; <span class="stringliteral">"CPositionGroup2D"</span> &lt;&lt; endl;
00364                 <span class="keywordtype">int</span> Total=<a class="code" href="classipl_1_1CPositionGroup2D.html#a15">GetTotalPositions</a>();
00365                 s &lt;&lt; <span class="stringliteral">"TotalPositions "</span> &lt;&lt; Total &lt;&lt; endl;
00366                 <span class="keywordtype">int</span> x;
00367                 <span class="keywordflow">for</span>(x=0; x&lt;Total; x++)
00368                 {
00369                         s &lt;&lt; <a class="code" href="classipl_1_1CPositionGroup2D.html#a19">GetPosition</a>(x);
00370                         s &lt;&lt; endl;
00371                 }
00372                 <span class="keywordflow">return</span> <span class="keyword">true</span>;
00373         }
00374         <span class="keywordflow">else</span>
00375         {
00376                 ostringstream ost;
00377                 ost &lt;&lt; <span class="stringliteral">"CPositionGroup2D&lt;T&gt;::Save() Failed opening file: "</span> &lt;&lt; pPathAndFileName &lt;&lt; IPLAddFileAndLine;
00378                 CError::ShowMessage(IPL_ERROR,ost.str().c_str());
00379                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
00380         }
00381 }
00382 
00383 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt; 
00384 <span class="keywordtype">bool</span> CPositionGroup2D&lt;T&gt;::CopyToImage(COLORTYPE BackGround, CImage&amp; Dest, <span class="keywordtype">bool</span> Absolute)
00385 {
00386         <a class="code" href="classCPoint2D.html">CPoint2D&lt;INT16&gt;</a> P;
00387         <span class="keywordflow">if</span> (<a class="code" href="classipl_1_1CPositionGroup2D.html#a15">GetTotalPositions</a>()==0)
00388         {
00389                 ostringstream ost;
00390                 ost &lt;&lt; <span class="stringliteral">"CPositionGroup2D&lt;T&gt;::CopyToImage() no points stored in PositionGroup"</span> &lt;&lt; IPLAddFileAndLine;
00391                 CError::ShowMessage(IPL_ERROR,ost.str().c_str());
00392                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
00393         }
00394         <span class="comment">/* Allocate a binary image with correct dimensions */</span>
00395         <span class="keywordflow">if</span> (Absolute==<span class="keyword">true</span>)
00396         {
00397                 Dest.Alloc(<a class="code" href="classipl_1_1CPositionGroup2D.html#n4">m_Right</a>.GetX()+1,<a class="code" href="classipl_1_1CPositionGroup2D.html#n2">m_Bottom</a>.GetY()+1,1);
00398         }
00399         <span class="keywordflow">else</span>
00400         {
00401                 Dest.Alloc(<a class="code" href="classipl_1_1CPositionGroup2D.html#n4">m_Right</a>.GetX()-<a class="code" href="classipl_1_1CPositionGroup2D.html#n3">m_Left</a>.GetX()+1,<a class="code" href="classipl_1_1CPositionGroup2D.html#n2">m_Bottom</a>.GetY()-<a class="code" href="classipl_1_1CPositionGroup2D.html#n1">m_Top</a>.GetY()+1,1);
00402                 Dest.SetOrigo(-<a class="code" href="classipl_1_1CPositionGroup2D.html#n3">m_Left</a>.GetX(),-<a class="code" href="classipl_1_1CPositionGroup2D.html#n1">m_Top</a>.GetY());
00403         }
00404         <span class="comment">/* Initialise background color */</span>
00405         Dest.Flush(BackGround);
00406         <span class="comment">/* copy pixels to image */</span>
00407         <span class="keywordflow">if</span> (BackGround==HIGHCOLOR)
00408         {
00409                 std::vector&lt; T &gt;::const_iterator it;
00410                 <span class="keywordflow">for</span>(it=m_Positions.begin(); it!=m_Positions.end(); ++it)
00411                 {
00412                         P.<a class="code" href="classCPoint2D.html#a16">SetX</a>(<a class="code" href="group__templates.html#a6">Round</a>((*it).GetX()));
00413                         P.<a class="code" href="classCPoint2D.html#a17">SetY</a>(<a class="code" href="group__templates.html#a6">Round</a>((*it).GetY()));
00414                         Dest.SetPixelFast(P,0);
00415                         <span class="comment">//r=pPixelGroup-&gt;pPos[i];</span>
00416                         <span class="comment">//k_SetPixelFast(r.x,r.y,1,pDest);</span>
00417                 }
00418         }
00419         <span class="keywordflow">else</span>
00420         {
00421                 std::vector&lt; T &gt;::const_iterator it;
00422                 <span class="keywordflow">for</span>(it=m_Positions.begin(); it!=m_Positions.end(); ++it)
00423                 {
00424                         P.<a class="code" href="classCPoint2D.html#a16">SetX</a>(<a class="code" href="group__templates.html#a6">Round</a>((*it).GetX()));
00425                         P.<a class="code" href="classCPoint2D.html#a17">SetY</a>(<a class="code" href="group__templates.html#a6">Round</a>((*it).GetY()));
00426                         Dest.SetPixelFast(P,1);
00427                         <span class="comment">//r=pPixelGroup-&gt;pPos[i];</span>
00428                         <span class="comment">//k_SetPixelFast(r.x,r.y,0,pDest);</span>
00429                 }
00430         }
00431         <span class="keywordflow">return</span> <span class="keyword">true</span>;
00432 }
00433 
00434 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt; 
00435 <span class="keywordtype">bool</span> CPositionGroup2D&lt;T&gt;::AddOffset(<span class="keyword">const</span> T&amp; Offset)
00436 {
00437         <span class="keywordflow">if</span> (<a class="code" href="classipl_1_1CPositionGroup2D.html#a15">GetTotalPositions</a>()==0)
00438                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
00439         std::vector&lt; T &gt;::iterator it;
00440         <span class="keywordflow">for</span>(it=m_Positions.begin(); it!=m_Positions.end(); ++it)
00441         {
00442                 (*it) += Offset;
00443         }
00444         <span class="keywordflow">return</span> <span class="keyword">true</span>;
00445 }
00446 
00447 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt; 
00448 <span class="keywordtype">void</span> CPositionGroup2D&lt;T&gt;::Sort()
00449 {
00450         std::sort(m_Positions.begin(),m_Positions.end());
00451 }
</pre></div><!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html>

<head>
<meta name="GENERATOR" content="Microsoft FrontPage 4.0">
<title>Tag</title>
<base target="_top">
</head>

<body bgcolor="#FFFFFF">

<hr>

<p align="right"><font size="2"><em>Updated <!--webbot bot="Timestamp" s-type="EDITED" s-format="%d. %B %Y %H:%M" startspan -->21. juli 2002 12:29<!--webbot bot="Timestamp" endspan i-checksum="38834" --> by
<a href="http://www.mip.sdu.dk/~edr/">René Dencker
Eriksen</a>(<a href="mailto:edr@mip.sdu.dk">edr@mip.sdu.dk</a>)</em></font></p>
</body>
</html>
