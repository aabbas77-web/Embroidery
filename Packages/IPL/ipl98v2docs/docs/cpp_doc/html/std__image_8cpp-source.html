<html>

<head>
<meta http-equiv="Content-Language" content="en-us">
<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
<link type="text/css" href="../../doxygen.css" rel="stylesheet">
<meta name="GENERATOR" content="Microsoft FrontPage 4.0">
<meta name="ProgId" content="FrontPage.Editor.Document">
<title>Image Processing Library 98</title>
</head>

<body>
<h2 align="center"><a href="http://www.mip.sdu.dk/ipl98" target="_blank"><img border="0" src="ipl_doc_header.gif" width="694" height="55"></a></h2>

</body>

</html>
<!-- Generated by Doxygen 1.2.17 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="modules.html">Modules</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="namespacemembers.html">Namespace Members</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; </center>
<hr><h1>/ipl98/cpp/std_image.cpp</h1><div class="fragment"><pre>00001 <span class="comment">/********************************************************************</span>
00002 <span class="comment">   The Image Processing Library 98 - IPL98</span>
00003 <span class="comment">   Copyright (C) by René Dencker Eriksen - edr@mip.sdu.dk</span>
00004 <span class="comment"></span>
00005 <span class="comment">   This library is free software; you can redistribute it and/or</span>
00006 <span class="comment">   modify it under the terms of the GNU Lesser General Public</span>
00007 <span class="comment">   License as published by the Free Software Foundation. Only</span>
00008 <span class="comment">   addition is, that if the library is used in proprietary software</span>
00009 <span class="comment">   it must be stated that IPL98 was used.</span>
00010 <span class="comment"></span>
00011 <span class="comment">   This library is distributed in the hope that it will be useful,</span>
00012 <span class="comment">   but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
00013 <span class="comment">   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.</span>
00014 <span class="comment"></span>
00015 <span class="comment">   More details can be found in the file licence.txt distributed</span>
00016 <span class="comment">   with this library.</span>
00017 <span class="comment">*********************************************************************/</span>
00018 
00019 <span class="preprocessor">#include "std_image.h"</span>
00020 <span class="preprocessor">#include "int_image.h"</span>
00021 <span class="preprocessor">#include "float_image.h"</span>
00022 <span class="preprocessor">#include "complex_image.h"</span>
00023 <span class="preprocessor">#include "../kernel_c/kernel_history.h"</span>
00024 
00025 <span class="keyword">namespace </span>ipl{
00026 
<a name="l00027"></a><a class="code" href="classipl_1_1CStdImage.html#a0">00027</a> CStdImage::CStdImage()
00028 : m_Pal(&amp;m_Image.Pal), m_History(&amp;m_Image.History)
00029 {
00030 }
00031 
<a name="l00032"></a><a class="code" href="classipl_1_1CStdImage.html#a1">00032</a> <a class="code" href="classipl_1_1CStdImage.html">CStdImage</a>&amp; CStdImage::operator=(<span class="keyword">const</span> <a class="code" href="classipl_1_1CStdImage.html">CStdImage</a>&amp; SourceImage)
00033 {
00034         <span class="comment">// overloading of assignment operator</span>
00035         <span class="keywordflow">if</span> (<span class="keyword">this</span> != &amp;SourceImage)
00036         {
00037                 <span class="comment">// ok to do assignment</span>
00038                 <span class="comment">// no copying if source is empty</span>
00039                 <span class="keywordflow">if</span> (SourceImage.<a class="code" href="classipl_1_1CStdImage.html#a69">GetOrigin</a>()!=EMPTY)
00040                 {
00041 <span class="preprocessor">#ifdef IPL_ADD_HISTORY</span>
00042 <span class="preprocessor"></span>                        k_IplStartHistoryMacro();
00043 <span class="preprocessor">#endif</span>
00044 <span class="preprocessor"></span>                        <span class="comment">/* call kernel function */</span>
00045                         k_CopyImage(&amp;<a class="code" href="classipl_1_1CStdImage.html#n0">m_Image</a>,SourceImage.<a class="code" href="classipl_1_1CStdImage.html#a61">GetConstTImagePtr</a>());
00046                         <span class="comment">/* set pointers */</span>
00047                         <a class="code" href="classipl_1_1CStdImage.html#m0">m_Pal</a>.<a class="code" href="classipl_1_1CPalette.html#a5">SetPalettePtr</a>(&amp;<a class="code" href="classipl_1_1CStdImage.html#n0">m_Image</a>.<a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTImage.html#m0">Pal</a>);
00048                         <a class="code" href="classipl_1_1CStdImage.html#m1">m_History</a>.<a class="code" href="classipl_1_1CText.html#a4">SetTextPtr</a>(&amp;<a class="code" href="classipl_1_1CStdImage.html#n0">m_Image</a>.<a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTImage.html#m2">History</a>);
00049                         <span class="comment">/* copy ROI */</span>
00050                         <a class="code" href="classipl_1_1CGenericImage.html#n0">m_ROIActive</a>=SourceImage.<a class="code" href="classipl_1_1CGenericImage.html#n0">m_ROIActive</a>;
00051                         <span class="keywordflow">if</span> (<a class="code" href="classipl_1_1CGenericImage.html#n0">m_ROIActive</a>==<span class="keyword">true</span>)
00052                         {
00053                                 <a class="code" href="classipl_1_1CGenericImage.html#n1">m_ROIUpperLeft</a>=SourceImage.<a class="code" href="classipl_1_1CGenericImage.html#n1">m_ROIUpperLeft</a>;
00054                                 <a class="code" href="classipl_1_1CGenericImage.html#n2">m_ROILowerRight</a>=SourceImage.<a class="code" href="classipl_1_1CGenericImage.html#n2">m_ROILowerRight</a>;
00055                         }
00056 <span class="preprocessor">#ifdef IPL_ADD_HISTORY</span>
00057 <span class="preprocessor"></span>                        <span class="comment">/* this is a really bad hack! Removing the last line added by the C code from</span>
00058 <span class="comment">                           this objects history, inserting the C++ line and appending the just removed</span>
00059 <span class="comment">                           line again. This assumes that only one line is added by the C code. */</span>
00060                         string HistoryTemp;
00061                         <a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTString.html">TString</a> History;
00062                         k_InitString(&amp;History);
00063                         <span class="comment">/* end history appending (remove a leading '\t' character) */</span>
00064                         k_IplStopHistoryMacro();
00065                         k_SprintfString(&amp;History,<span class="stringliteral">"%sCStdImage::operator="</span>,ipl_HistoryIndent);
00066                         <a class="code" href="classipl_1_1CStdImage.html#m1">m_History</a>.<a class="code" href="classipl_1_1CText.html#a12">GetItem</a>(<a class="code" href="classipl_1_1CStdImage.html#m1">m_History</a>.<a class="code" href="classipl_1_1CText.html#a13">TotalItems</a>()-1,HistoryTemp);
00067                         <a class="code" href="classipl_1_1CStdImage.html#m1">m_History</a>.<a class="code" href="classipl_1_1CText.html#a23">RemoveLastLine</a>();
00068                         <a class="code" href="classipl_1_1CStdImage.html#m1">m_History</a>.<a class="code" href="classipl_1_1CText.html#a7">AppendIPL</a>(History.<a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTString.html#m2">pChars</a>);
00069                         <span class="keywordtype">int</span> k=HistoryTemp.find_first_of(<span class="stringliteral">"\t"</span>);
00070                         <a class="code" href="classipl_1_1CStdImage.html#m1">m_History</a>.<a class="code" href="classipl_1_1CText.html#a7">AppendIPL</a>(HistoryTemp.substr(k,HistoryTemp.size()-1-k));
00071                         k_EmptyString(&amp;History);
00072 <span class="preprocessor">#endif</span>
00073 <span class="preprocessor"></span>                }
00074                 <span class="keywordflow">else</span>
00075                 {
00076                         k_EmptyImage(&amp;<a class="code" href="classipl_1_1CStdImage.html#n0">m_Image</a>); <span class="comment">// empty image in all cases</span>
00077                 }
00078         }
00079         <span class="keywordflow">else</span>
00080         {
00081                 ostringstream ost;
00082                 ost &lt;&lt; <span class="stringliteral">"CStdImage::operator=() Cannot assign CImage to itself"</span> &lt;&lt; IPLAddFileAndLine;
00083                 CError::ShowMessage(IPL_ERROR,ost.str().c_str());
00084         }
00085         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
00086 }
00087 
<a name="l00088"></a><a class="code" href="classipl_1_1CStdImage.html#a4">00088</a> <span class="keywordtype">void</span> CStdImage::Empty()
00089 {
00090         <span class="comment">// Deletes all allocated memory for image</span>
00091         <span class="comment">// and resets variables</span>
00092         k_EmptyImage(&amp;<a class="code" href="classipl_1_1CStdImage.html#n0">m_Image</a>);
00093         <a class="code" href="classipl_1_1CGenericImage.html#n0">m_ROIActive</a>=<span class="keyword">false</span>;
00094 }
00095 
<a name="l00096"></a><a class="code" href="classipl_1_1CStdImage.html#a10">00096</a> <span class="keywordtype">bool</span> CStdImage::GetFileName(string&amp; Str)
00097 {
00098         Str.erase();
00099         <span class="keywordflow">if</span> (<a class="code" href="classipl_1_1CStdImage.html#n0">m_Image</a>.<a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTImage.html#m1">FileInfo</a>.<a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTFileInfo.html#m0">FileName</a>!=NULL)
00100         {
00101                 Str.append(<a class="code" href="classipl_1_1CStdImage.html#n0">m_Image</a>.<a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTImage.html#m1">FileInfo</a>.<a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTFileInfo.html#m0">FileName</a>);
00102                 <span class="keywordflow">return</span> <span class="keyword">true</span>;
00103         }
00104         <span class="keywordflow">else</span>
00105                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
00106 }
00107 
<a name="l00108"></a><a class="code" href="classipl_1_1CStdImage.html#a11">00108</a> <span class="keyword">const</span> <span class="keywordtype">char</span>* CStdImage::GetFileName()
00109 {
00110         <span class="keywordflow">return</span> <a class="code" href="classipl_1_1CStdImage.html#n0">m_Image</a>.<a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTImage.html#m1">FileInfo</a>.<a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTFileInfo.html#m0">FileName</a>;
00111 }
00112 
<a name="l00113"></a><a class="code" href="classipl_1_1CStdImage.html#a12">00113</a> <span class="keywordtype">bool</span> CStdImage::GetPathName(string&amp; Str)
00114 {
00115         Str.erase();
00116         <span class="keywordflow">if</span> (<a class="code" href="classipl_1_1CStdImage.html#n0">m_Image</a>.<a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTImage.html#m1">FileInfo</a>.<a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTFileInfo.html#m1">PathName</a>!=NULL)
00117         {
00118                 Str.append(<a class="code" href="classipl_1_1CStdImage.html#n0">m_Image</a>.<a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTImage.html#m1">FileInfo</a>.<a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTFileInfo.html#m1">PathName</a>);
00119                 <span class="keywordflow">return</span> <span class="keyword">true</span>;
00120         }
00121         <span class="keywordflow">else</span>
00122                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
00123 }
00124 
<a name="l00125"></a><a class="code" href="classipl_1_1CStdImage.html#a13">00125</a> <span class="keyword">const</span> <span class="keywordtype">char</span>* CStdImage::GetPathName()
00126 {
00127         <span class="keywordflow">return</span> <a class="code" href="classipl_1_1CStdImage.html#n0">m_Image</a>.<a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTImage.html#m1">FileInfo</a>.<a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTFileInfo.html#m1">PathName</a>;
00128 }
00129 
<a name="l00130"></a><a class="code" href="classipl_1_1CStdImage.html#a14">00130</a> <span class="keywordtype">bool</span> CStdImage::GetPathAndFileName(string&amp; Str)
00131 {
00132         Str.erase();
00133         <span class="keywordflow">if</span> (<a class="code" href="classipl_1_1CStdImage.html#n0">m_Image</a>.<a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTImage.html#m1">FileInfo</a>.<a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTFileInfo.html#m2">PathAndFileName</a>!=NULL)
00134         {
00135                 Str.append(<a class="code" href="classipl_1_1CStdImage.html#n0">m_Image</a>.<a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTImage.html#m1">FileInfo</a>.<a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTFileInfo.html#m2">PathAndFileName</a>);
00136                 <span class="keywordflow">return</span> <span class="keyword">true</span>;
00137         }
00138         <span class="keywordflow">else</span>
00139                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
00140 }
00141 
<a name="l00142"></a><a class="code" href="classipl_1_1CStdImage.html#a15">00142</a> <span class="keyword">const</span> <span class="keywordtype">char</span>* CStdImage::GetPathAndFileName()
00143 {
00144         <span class="keywordflow">return</span> <a class="code" href="classipl_1_1CStdImage.html#n0">m_Image</a>.<a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTImage.html#m1">FileInfo</a>.<a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTFileInfo.html#m2">PathAndFileName</a>;
00145 }
00146 
<a name="l00147"></a><a class="code" href="classipl_1_1CStdImage.html#a16">00147</a> <span class="keywordtype">bool</span> CStdImage::Flush(UINT32 Color)
00148 {
00149 <span class="preprocessor">#ifdef IPL_ADD_HISTORY</span>
00150 <span class="preprocessor"></span>        <span class="comment">/* add comment to history */</span>
00151         <a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTString.html">TString</a> History;
00152         k_InitString(&amp;History);
00153         k_SprintfString(&amp;History,<span class="stringliteral">"%sCStdImage::Flush(Color=%d)"</span>,ipl_HistoryIndent,Color);
00154         <a class="code" href="classipl_1_1CStdImage.html#m1">m_History</a>.<a class="code" href="classipl_1_1CText.html#a7">AppendIPL</a>(History.<a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTString.html#m2">pChars</a>);
00155         k_EmptyString(&amp;History);
00156         k_IplStartHistoryMacro();
00157 <span class="preprocessor">#endif</span>
00158 <span class="preprocessor"></span>        <span class="comment">/* call kernel function */</span>
00159         <span class="keywordtype">bool</span> ReturnValue=k_FlushImage(Color,&amp;<a class="code" href="classipl_1_1CStdImage.html#n0">m_Image</a>);
00160         <span class="keywordflow">if</span> (ReturnValue==<span class="keyword">false</span>)
00161         {
00162                 ostringstream ost;
00163                 ost &lt;&lt; <span class="stringliteral">"CStdImage::Flush() Flush failed - image is empty"</span> &lt;&lt; IPLAddFileAndLine;
00164                 CError::ShowMessage(IPL_ERROR,ost.str().c_str());
00165 <span class="preprocessor">#ifdef IPL_ADD_HISTORY</span>
00166 <span class="preprocessor"></span>                <span class="comment">/* remove the history line added above */</span>
00167                 <a class="code" href="classipl_1_1CStdImage.html#m1">m_History</a>.<a class="code" href="classipl_1_1CText.html#a23">RemoveLastLine</a>();
00168 <span class="preprocessor">#endif</span>
00169 <span class="preprocessor"></span>        }
00170 <span class="preprocessor">#ifdef IPL_ADD_HISTORY</span>
00171 <span class="preprocessor"></span>        <span class="comment">/* end history appending (remove a leading '\t' character) */</span>
00172         k_IplStopHistoryMacro();
00173 <span class="preprocessor">#endif</span>
00174 <span class="preprocessor"></span>        <span class="keywordflow">return</span> ReturnValue;
00175 }
00176 
<a name="l00177"></a><a class="code" href="classipl_1_1CStdImage.html#a17">00177</a> <span class="keywordtype">bool</span> CStdImage::Invert()
00178 {
00179 <span class="preprocessor">#ifdef IPL_ADD_HISTORY</span>
00180 <span class="preprocessor"></span>        <span class="comment">/* add comment to history */</span>
00181         <a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTString.html">TString</a> History;
00182         k_InitString(&amp;History);
00183         k_SprintfString(&amp;History,<span class="stringliteral">"%sCStdImage::Invert()"</span>,ipl_HistoryIndent);
00184         <a class="code" href="classipl_1_1CStdImage.html#m1">m_History</a>.<a class="code" href="classipl_1_1CText.html#a7">AppendIPL</a>(History.<a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTString.html#m2">pChars</a>);
00185         k_EmptyString(&amp;History);
00186         k_IplStartHistoryMacro();
00187 <span class="preprocessor">#endif</span>
00188 <span class="preprocessor"></span>        <span class="comment">/* call kernel function */</span>
00189         <span class="keywordtype">bool</span> ReturnValue=k_InvertImage(&amp;<a class="code" href="classipl_1_1CStdImage.html#n0">m_Image</a>);
00190         <span class="keywordflow">if</span> (ReturnValue==<span class="keyword">false</span>)
00191         {
00192                 ostringstream ost;
00193                 ost &lt;&lt; <span class="stringliteral">"CStdImage::Invert() Failed inverting - image is empty"</span> &lt;&lt; IPLAddFileAndLine;
00194                 CError::ShowMessage(IPL_ERROR,ost.str().c_str());
00195 <span class="preprocessor">#ifdef IPL_ADD_HISTORY</span>
00196 <span class="preprocessor"></span>                <span class="comment">/* remove the history line added above */</span>
00197                 <a class="code" href="classipl_1_1CStdImage.html#m1">m_History</a>.<a class="code" href="classipl_1_1CText.html#a23">RemoveLastLine</a>();
00198 <span class="preprocessor">#endif</span>
00199 <span class="preprocessor"></span>        }
00200 <span class="preprocessor">#ifdef IPL_ADD_HISTORY</span>
00201 <span class="preprocessor"></span>        <span class="comment">/* end history appending (remove a leading '\t' character) */</span>
00202         k_IplStopHistoryMacro();
00203 <span class="preprocessor">#endif</span>
00204 <span class="preprocessor"></span>        <span class="keywordflow">return</span> ReturnValue;
00205 }
00206 
<a name="l00207"></a><a class="code" href="classipl_1_1CStdImage.html#a53">00207</a> <span class="keywordtype">bool</span> CStdImage::SetBorder(UINT16 Size, UINT32 Color)
00208 {
00209         <span class="comment">// Set the size of image border</span>
00210         <span class="keywordflow">if</span> (k_SetBorder(Size,Color,&amp;<a class="code" href="classipl_1_1CStdImage.html#n0">m_Image</a>)==<span class="keyword">false</span>)
00211         {
00212                 ostringstream ost;
00213                 ost &lt;&lt; <span class="stringliteral">"CStdImage::SetBorder() Setting border failed"</span> &lt;&lt; IPLAddFileAndLine;
00214                 CError::ShowMessage(IPL_ERROR,ost.str().c_str());
00215                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
00216         }
00217         <span class="keywordflow">return</span> <span class="keyword">true</span>;
00218 }
00219 
<a name="l00220"></a><a class="code" href="classipl_1_1CStdImage.html#a54">00220</a> <span class="keywordtype">bool</span> CStdImage::SetBorderSize(UINT16 Size)
00221 {
00222         <span class="keywordflow">if</span> (k_SetBorderSize(Size, &amp;<a class="code" href="classipl_1_1CStdImage.html#n0">m_Image</a>)==<span class="keyword">false</span>)
00223         {
00224                 ostringstream ost;
00225                 ost &lt;&lt; <span class="stringliteral">"CStdImage::SetBorderSize() Failed setting size and color of border"</span> &lt;&lt; IPLAddFileAndLine;
00226                 CError::ShowMessage(IPL_ERROR,ost.str().c_str());
00227                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
00228         }
00229         <span class="keywordflow">return</span> <span class="keyword">true</span>;
00230 }
00231 
<a name="l00232"></a><a class="code" href="classipl_1_1CStdImage.html#a55">00232</a> <span class="keywordtype">bool</span> CStdImage::SetBorderColor(UINT32 Color)
00233 {
00234         <span class="comment">// Set the color of image border</span>
00235         <span class="keywordflow">if</span> (k_SetBorderColor(Color,&amp;<a class="code" href="classipl_1_1CStdImage.html#n0">m_Image</a>)==<span class="keyword">false</span>)
00236         {
00237                 ostringstream ost;
00238                 ost &lt;&lt; <span class="stringliteral">"CStdImage::SetBorderColor() Failed setting color of border"</span> &lt;&lt; IPLAddFileAndLine;
00239                 CError::ShowMessage(IPL_ERROR,ost.str().c_str());
00240                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
00241         }
00242         <span class="keywordflow">return</span> <span class="keyword">true</span>;
00243 }
00244 
<a name="l00245"></a><a class="code" href="classipl_1_1CStdImage.html#a56">00245</a> <span class="keywordtype">bool</span> CStdImage::CopySubImage(<a class="code" href="classipl_1_1CStdImage.html">CStdImage</a>&amp; SourceImage,<span class="keywordtype">int</span> xmin,<span class="keywordtype">int</span> ymin,
00246                                   <span class="keywordtype">int</span> xmax, <span class="keywordtype">int</span> ymax)
00247 {
00248 <span class="preprocessor">#ifdef IPL_ADD_HISTORY</span>
00249 <span class="preprocessor"></span>        <span class="comment">/* add comment to history, done by adding to source and removing later (hack) */</span>
00250         <a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTString.html">TString</a> History;
00251         k_InitString(&amp;History);
00252         k_SprintfString(&amp;History,<span class="stringliteral">"%sCStdImage::CopySubImage(xmin=%d,ymin=%d,xmax=%d,ymax=%d) Source image file info: %s"</span>,
00253                 ipl_HistoryIndent,xmin,ymin,xmax,ymax,SourceImage.<a class="code" href="classipl_1_1CStdImage.html#a14">GetPathAndFileName</a>());
00254         SourceImage.<a class="code" href="classipl_1_1CStdImage.html#m1">m_History</a>.<a class="code" href="classipl_1_1CText.html#a7">AppendIPL</a>(History.<a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTString.html#m2">pChars</a>);
00255         k_EmptyString(&amp;History);
00256         k_IplStartHistoryMacro();
00257 <span class="preprocessor">#endif</span>
00258 <span class="preprocessor"></span>        <span class="comment">/* call kernel function */</span>
00259         <span class="keywordtype">bool</span> ReturnValue=k_CopySubImage(xmin,ymin,xmax,ymax,&amp;<a class="code" href="classipl_1_1CStdImage.html#n0">m_Image</a>,&amp;(SourceImage.<a class="code" href="classipl_1_1CStdImage.html#n0">m_Image</a>));
00260         <span class="keywordflow">if</span> (ReturnValue==<span class="keyword">false</span>)
00261         {
00262                 ostringstream ost;
00263                 ost &lt;&lt; <span class="stringliteral">"CStdImage::CopySubImage()Failed copying subimage"</span> &lt;&lt; IPLAddFileAndLine;
00264                 CError::ShowMessage(IPL_ERROR,ost.str().c_str());
00265         }
00266         <span class="keywordflow">else</span>
00267                 <a class="code" href="classipl_1_1CGenericImage.html#n0">m_ROIActive</a>=<span class="keyword">false</span>;
00268 <span class="preprocessor">#ifdef IPL_ADD_HISTORY</span>
00269 <span class="preprocessor"></span>        <span class="keywordflow">if</span> (&amp;SourceImage!=<span class="keyword">this</span>)
00270         {
00271                 <span class="comment">/* remove the history just added to the source image */</span>
00272                 SourceImage.<a class="code" href="classipl_1_1CStdImage.html#m1">m_History</a>.<a class="code" href="classipl_1_1CText.html#a23">RemoveLastLine</a>();
00273         }
00274         <span class="comment">/* end history appending (remove a leading '\t' character) */</span>
00275         k_IplStopHistoryMacro();
00276 <span class="preprocessor">#endif</span>
00277 <span class="preprocessor"></span>        <span class="keywordflow">return</span> ReturnValue;
00278 }
00279 
<a name="l00280"></a><a class="code" href="classipl_1_1CStdImage.html#a57">00280</a> <span class="keywordtype">bool</span> CStdImage::CopySubImage(<a class="code" href="classipl_1_1CStdImage.html">CStdImage</a>&amp; SourceImage,<span class="keyword">const</span> <a class="code" href="classCPoint2D.html">CPoint2D&lt;int&gt;</a>&amp; UpperLeft,
00281                   <span class="keyword">const</span> <a class="code" href="classCPoint2D.html">CPoint2D&lt;int&gt;</a>&amp; LowerRight)
00282 {
00283 <span class="preprocessor">#ifdef IPL_ADD_HISTORY</span>
00284 <span class="preprocessor"></span>        <span class="comment">/* add comment to history, done by adding to source and removing later (hack) */</span>
00285         <a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTString.html">TString</a> History;
00286         k_InitString(&amp;History);
00287         k_SprintfString(&amp;History,<span class="stringliteral">"%sCStdImage::CopySubImage(UpperLeft=(%d,%d),LowerLeft=(%d,%d)) Source image file info: %s"</span>,
00288                 ipl_HistoryIndent,UpperLeft.<a class="code" href="classCPoint2D.html#a13">GetX</a>(),UpperLeft.<a class="code" href="classCPoint2D.html#a14">GetY</a>(),LowerRight.<a class="code" href="classCPoint2D.html#a13">GetX</a>(),LowerRight.<a class="code" href="classCPoint2D.html#a14">GetY</a>(),SourceImage.<a class="code" href="classipl_1_1CStdImage.html#a61">GetConstTImagePtr</a>()-&gt;<a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTImage.html#m1">FileInfo</a>.<a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTFileInfo.html#m2">PathAndFileName</a>);
00289         SourceImage.<a class="code" href="classipl_1_1CStdImage.html#m1">m_History</a>.<a class="code" href="classipl_1_1CText.html#a7">AppendIPL</a>(History.<a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTString.html#m2">pChars</a>);
00290         k_EmptyString(&amp;History);
00291         k_IplStartHistoryMacro();
00292 <span class="preprocessor">#endif</span>
00293 <span class="preprocessor"></span>        <span class="comment">/* call kernel function */</span>
00294         <span class="keywordtype">bool</span> ReturnValue=k_CopySubImage(UpperLeft.<a class="code" href="classCPoint2D.html#a13">GetX</a>(),UpperLeft.<a class="code" href="classCPoint2D.html#a14">GetY</a>(),LowerRight.<a class="code" href="classCPoint2D.html#a13">GetX</a>(),
00295                                         LowerRight.<a class="code" href="classCPoint2D.html#a14">GetY</a>(),&amp;<a class="code" href="classipl_1_1CStdImage.html#n0">m_Image</a>,&amp;(SourceImage.<a class="code" href="classipl_1_1CStdImage.html#n0">m_Image</a>));
00296         <span class="keywordflow">if</span> (ReturnValue==<span class="keyword">false</span>)
00297         {
00298                 ostringstream ost;
00299                 ost &lt;&lt; <span class="stringliteral">"CStdImage::CopySubImage() Failed copying subimage"</span> &lt;&lt; IPLAddFileAndLine;
00300                 CError::ShowMessage(IPL_ERROR,ost.str().c_str());
00301                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
00302         }
00303         <span class="keywordflow">else</span>
00304                 <a class="code" href="classipl_1_1CGenericImage.html#n0">m_ROIActive</a>=<span class="keyword">false</span>;
00305 <span class="preprocessor">#ifdef IPL_ADD_HISTORY</span>
00306 <span class="preprocessor"></span>        <span class="keywordflow">if</span> (&amp;SourceImage!=<span class="keyword">this</span>)
00307         {
00308                 <span class="comment">/* remove the history just added to the source image */</span>
00309                 SourceImage.<a class="code" href="classipl_1_1CStdImage.html#m1">m_History</a>.<a class="code" href="classipl_1_1CText.html#a23">RemoveLastLine</a>();
00310         }
00311         <span class="comment">/* end history appending (remove a leading '\t' character) */</span>
00312         k_IplStopHistoryMacro();
00313 <span class="preprocessor">#endif</span>
00314 <span class="preprocessor"></span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;
00315 }
00316 
<a name="l00317"></a><a class="code" href="classipl_1_1CStdImage.html#a59">00317</a> UINT16 CStdImage::GetLineByteWidth()<span class="keyword"> const</span>
00318 <span class="keyword"></span>{
00319         <span class="comment">// get byte width of a scanline</span>
00320         <span class="keywordflow">return</span> <a class="code" href="classipl_1_1CStdImage.html#n0">m_Image</a>.<a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTImage.html#m8">ByteWidth</a>;
00321 }
00322 
<a name="l00323"></a><a class="code" href="classipl_1_1CStdImage.html#a60">00323</a> UINT8* CStdImage::GetImageDataPtr()
00324 {
00325         <span class="keywordflow">return</span> <a class="code" href="classipl_1_1CStdImage.html#n0">m_Image</a>.<a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTImage.html#m12">pPixelStream</a>;
00326 }
00327 
<a name="l00328"></a><a class="code" href="classipl_1_1CStdImage.html#a61">00328</a> <span class="keyword">const</span> <a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTImage.html">TImage</a>* CStdImage::GetConstTImagePtr()<span class="keyword"> const</span>
00329 <span class="keyword"></span>{
00330         <span class="comment">// get pointer to image data</span>
00331         <span class="keywordflow">return</span> &amp;<a class="code" href="classipl_1_1CStdImage.html#n0">m_Image</a>;
00332 }
00333 
<a name="l00334"></a><a class="code" href="classipl_1_1CStdImage.html#a62">00334</a> <a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTImage.html">TImage</a>* CStdImage::GetTImagePtr()
00335 {
00336         <span class="comment">// get pointer to image data</span>
00337         <span class="keywordflow">return</span> &amp;<a class="code" href="classipl_1_1CStdImage.html#n0">m_Image</a>;
00338 }
00339 
<a name="l00340"></a><a class="code" href="classipl_1_1CStdImage.html#a70">00340</a> <span class="keywordtype">void</span> CStdImage::Rotate90(<span class="keywordtype">int</span> Steps)
00341 {
00342 <span class="preprocessor">#ifdef IPL_ADD_HISTORY</span>
00343 <span class="preprocessor"></span>        <span class="comment">/* add comment to history */</span>
00344         <a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTString.html">TString</a> History;
00345         k_InitString(&amp;History);
00346         k_SprintfString(&amp;History,<span class="stringliteral">"%sCStdImage::Rotate90(Steps=%d)"</span>,ipl_HistoryIndent,Steps);
00347         <a class="code" href="classipl_1_1CStdImage.html#m1">m_History</a>.<a class="code" href="classipl_1_1CText.html#a7">AppendIPL</a>(History.<a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTString.html#m2">pChars</a>);
00348         k_EmptyString(&amp;History);
00349         k_IplStartHistoryMacro();
00350 <span class="preprocessor">#endif</span>
00351 <span class="preprocessor"></span>        <span class="comment">/* call kernel function */</span>
00352         k_Rotate90(Steps,&amp;<a class="code" href="classipl_1_1CStdImage.html#n0">m_Image</a>);
00353 <span class="preprocessor">#ifdef IPL_ADD_HISTORY</span>
00354 <span class="preprocessor"></span>        <span class="comment">/* end history appending (remove a leading '\t' character) */</span>
00355         k_IplStopHistoryMacro();
00356 <span class="preprocessor">#endif</span>
00357 <span class="preprocessor"></span>}
00358 
<a name="l00359"></a><a class="code" href="classipl_1_1CStdImage.html#a71">00359</a> <span class="keywordtype">void</span> CStdImage::FlipHorisontal()
00360 {
00361 <span class="preprocessor">#ifdef IPL_ADD_HISTORY</span>
00362 <span class="preprocessor"></span>        <span class="comment">/* add comment to history */</span>
00363         <a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTString.html">TString</a> History;
00364         k_InitString(&amp;History);
00365         k_SprintfString(&amp;History,<span class="stringliteral">"%sCStdImage::FlipHorisontal()"</span>,ipl_HistoryIndent);
00366         <a class="code" href="classipl_1_1CStdImage.html#m1">m_History</a>.<a class="code" href="classipl_1_1CText.html#a7">AppendIPL</a>(History.<a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTString.html#m2">pChars</a>);
00367         k_EmptyString(&amp;History);
00368         k_IplStartHistoryMacro();
00369 <span class="preprocessor">#endif</span>
00370 <span class="preprocessor"></span>        <span class="comment">/* call kernel function */</span>
00371         k_FlipHorisontal(&amp;<a class="code" href="classipl_1_1CStdImage.html#n0">m_Image</a>);
00372 <span class="preprocessor">#ifdef IPL_ADD_HISTORY</span>
00373 <span class="preprocessor"></span>        <span class="comment">/* end history appending (remove a leading '\t' character) */</span>
00374         k_IplStopHistoryMacro();
00375 <span class="preprocessor">#endif</span>
00376 <span class="preprocessor"></span>}
00377 
<a name="l00378"></a><a class="code" href="classipl_1_1CStdImage.html#a72">00378</a> <span class="keywordtype">void</span> CStdImage::FlipVertical()
00379 {
00380 <span class="preprocessor">#ifdef IPL_ADD_HISTORY</span>
00381 <span class="preprocessor"></span>        <span class="comment">/* add comment to history */</span>
00382         <a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTString.html">TString</a> History;
00383         k_InitString(&amp;History);
00384         k_SprintfString(&amp;History,<span class="stringliteral">"%sCStdImage::FlipVertical()"</span>,ipl_HistoryIndent);
00385         <a class="code" href="classipl_1_1CStdImage.html#m1">m_History</a>.<a class="code" href="classipl_1_1CText.html#a7">AppendIPL</a>(History.<a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTString.html#m2">pChars</a>);
00386         k_EmptyString(&amp;History);
00387         k_IplStartHistoryMacro();
00388 <span class="preprocessor">#endif</span>
00389 <span class="preprocessor"></span>        <span class="comment">/* call kernel function */</span>
00390         k_FlipVertical(&amp;<a class="code" href="classipl_1_1CStdImage.html#n0">m_Image</a>);
00391 <span class="preprocessor">#ifdef IPL_ADD_HISTORY</span>
00392 <span class="preprocessor"></span>        <span class="comment">/* end history appending (remove a leading '\t' character) */</span>
00393         k_IplStopHistoryMacro();
00394 <span class="preprocessor">#endif</span>
00395 <span class="preprocessor"></span>}
00396 
<a name="l00397"></a><a class="code" href="classipl_1_1CStdImage.html#a73">00397</a> <span class="keywordtype">bool</span> CStdImage::ApplyBias(<span class="keywordtype">int</span> Bias)
00398 {
00399 <span class="preprocessor">#ifdef IPL_ADD_HISTORY</span>
00400 <span class="preprocessor"></span>        <span class="comment">/* add comment to history */</span>
00401         <a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTString.html">TString</a> History;
00402         k_InitString(&amp;History);
00403         k_SprintfString(&amp;History,<span class="stringliteral">"%sCStdImage::ApplyBias() Bias=%d"</span>,ipl_HistoryIndent,Bias);
00404         <a class="code" href="classipl_1_1CStdImage.html#m1">m_History</a>.<a class="code" href="classipl_1_1CText.html#a7">AppendIPL</a>(History.<a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTString.html#m2">pChars</a>);
00405         k_EmptyString(&amp;History);
00406         k_IplStartHistoryMacro();
00407 <span class="preprocessor">#endif</span>
00408 <span class="preprocessor"></span>        <span class="keywordtype">bool</span> ReturnValue=k_ApplyBias(Bias,<a class="code" href="classipl_1_1CStdImage.html#a62">GetTImagePtr</a>());
00409         <span class="keywordflow">if</span> (ReturnValue==<span class="keyword">false</span>)
00410         {
00411                 ostringstream ost;
00412                 ost &lt;&lt; <span class="stringliteral">"CStdImage::ApplyBias() Failed"</span> &lt;&lt; IPLAddFileAndLine;
00413                 CError::ShowMessage(IPL_ERROR,ost.str().c_str());
00414 <span class="preprocessor">#ifdef IPL_ADD_HISTORY</span>
00415 <span class="preprocessor"></span>                <span class="comment">/* remove the history line added above */</span>
00416                 <a class="code" href="classipl_1_1CStdImage.html#m1">m_History</a>.<a class="code" href="classipl_1_1CText.html#a23">RemoveLastLine</a>();
00417 <span class="preprocessor">#endif</span>
00418 <span class="preprocessor"></span>        }
00419 <span class="preprocessor">#ifdef IPL_ADD_HISTORY</span>
00420 <span class="preprocessor"></span>        <span class="comment">/* end history appending (remove a leading '\t' character) */</span>
00421         k_IplStopHistoryMacro();
00422 <span class="preprocessor">#endif</span>
00423 <span class="preprocessor"></span>        <span class="keywordflow">return</span> ReturnValue;
00424 }
00425 
<a name="l00426"></a><a class="code" href="classipl_1_1CStdImage.html#a74">00426</a> <span class="keywordtype">bool</span> CStdImage::ScaleIntensity(<span class="keywordtype">float</span> Prefactor)
00427 {
00428 <span class="preprocessor">#ifdef IPL_ADD_HISTORY</span>
00429 <span class="preprocessor"></span>        <span class="comment">/* add comment to history */</span>
00430         <a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTString.html">TString</a> History;
00431         k_InitString(&amp;History);
00432         k_SprintfString(&amp;History,<span class="stringliteral">"%sCStdImage::ScaleIntensity() Prefactor=%g"</span>,ipl_HistoryIndent,Prefactor);
00433         <a class="code" href="classipl_1_1CStdImage.html#m1">m_History</a>.<a class="code" href="classipl_1_1CText.html#a7">AppendIPL</a>(History.<a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTString.html#m2">pChars</a>);
00434         k_EmptyString(&amp;History);
00435         k_IplStartHistoryMacro();
00436 <span class="preprocessor">#endif</span>
00437 <span class="preprocessor"></span>        <span class="keywordtype">bool</span> ReturnValue=k_ScaleIntensity(Prefactor,<a class="code" href="classipl_1_1CStdImage.html#a62">GetTImagePtr</a>());
00438         <span class="keywordflow">if</span> (ReturnValue==<span class="keyword">false</span>)
00439         {
00440                 ostringstream ost;
00441                 ost &lt;&lt; <span class="stringliteral">"CStdImage::ScaleIntensity() Failed"</span> &lt;&lt; IPLAddFileAndLine;
00442                 CError::ShowMessage(IPL_ERROR,ost.str().c_str());
00443 <span class="preprocessor">#ifdef IPL_ADD_HISTORY</span>
00444 <span class="preprocessor"></span>                <span class="comment">/* remove the history line added above */</span>
00445                 <a class="code" href="classipl_1_1CStdImage.html#m1">m_History</a>.<a class="code" href="classipl_1_1CText.html#a23">RemoveLastLine</a>();
00446 <span class="preprocessor">#endif</span>
00447 <span class="preprocessor"></span>        }
00448 <span class="preprocessor">#ifdef IPL_ADD_HISTORY</span>
00449 <span class="preprocessor"></span>        <span class="comment">/* end history appending (remove a leading '\t' character) */</span>
00450         k_IplStopHistoryMacro();
00451 <span class="preprocessor">#endif</span>
00452 <span class="preprocessor"></span>        <span class="keywordflow">return</span> ReturnValue;
00453 }
00454 
<a name="l00455"></a><a class="code" href="classipl_1_1CStdImage.html#a75">00455</a> <span class="keywordtype">bool</span> CStdImage::Add(<a class="code" href="classipl_1_1CStdImage.html">CStdImage</a> &amp;Addend)
00456 {
00457 <span class="preprocessor">#ifdef IPL_ADD_HISTORY</span>
00458 <span class="preprocessor"></span>        <span class="comment">/* add comment to history */</span>
00459         <a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTString.html">TString</a> History;
00460         k_InitString(&amp;History);
00461         k_SprintfString(&amp;History,<span class="stringliteral">"%sCStdImage::Add() adding a CStdImage"</span>,ipl_HistoryIndent);
00462         <a class="code" href="classipl_1_1CStdImage.html#m1">m_History</a>.<a class="code" href="classipl_1_1CText.html#a7">AppendIPL</a>(History.<a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTString.html#m2">pChars</a>);
00463         k_EmptyString(&amp;History);
00464         k_IplStartHistoryMacro();
00465 <span class="preprocessor">#endif</span>
00466 <span class="preprocessor"></span>        <span class="keywordtype">bool</span> ReturnValue=k_Add(<a class="code" href="classipl_1_1CStdImage.html#a62">GetTImagePtr</a>(),Addend.<a class="code" href="classipl_1_1CStdImage.html#a62">GetTImagePtr</a>());
00467         <span class="keywordflow">if</span> (ReturnValue==<span class="keyword">false</span>)
00468         {
00469                 ostringstream ost;
00470                 ost &lt;&lt; <span class="stringliteral">"CStdImage::Add() Failed"</span> &lt;&lt; IPLAddFileAndLine;
00471                 CError::ShowMessage(IPL_ERROR,ost.str().c_str());
00472 <span class="preprocessor">#ifdef IPL_ADD_HISTORY</span>
00473 <span class="preprocessor"></span>                <span class="comment">/* remove the history line added above */</span>
00474                 <a class="code" href="classipl_1_1CStdImage.html#m1">m_History</a>.<a class="code" href="classipl_1_1CText.html#a23">RemoveLastLine</a>();
00475 <span class="preprocessor">#endif</span>
00476 <span class="preprocessor"></span>        }
00477 <span class="preprocessor">#ifdef IPL_ADD_HISTORY</span>
00478 <span class="preprocessor"></span>        <span class="comment">/* end history appending (remove a leading '\t' character) */</span>
00479         k_IplStopHistoryMacro();
00480 <span class="preprocessor">#endif</span>
00481 <span class="preprocessor"></span>        <span class="keywordflow">return</span> ReturnValue;
00482 }
00483 
<a name="l00484"></a><a class="code" href="classipl_1_1CStdImage.html#a76">00484</a> <span class="keywordtype">bool</span> CStdImage::Subtract(<a class="code" href="classipl_1_1CStdImage.html">CStdImage</a> &amp;Subtrahend)
00485 {
00486 <span class="preprocessor">#ifdef IPL_ADD_HISTORY</span>
00487 <span class="preprocessor"></span>        <span class="comment">/* add comment to history */</span>
00488         <a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTString.html">TString</a> History;
00489         k_InitString(&amp;History);
00490         k_SprintfString(&amp;History,<span class="stringliteral">"%sCStdImage::Subtract() subtracting a CStdImage"</span>,ipl_HistoryIndent);
00491         <a class="code" href="classipl_1_1CStdImage.html#m1">m_History</a>.<a class="code" href="classipl_1_1CText.html#a7">AppendIPL</a>(History.<a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTString.html#m2">pChars</a>);
00492         k_EmptyString(&amp;History);
00493         k_IplStartHistoryMacro();
00494 <span class="preprocessor">#endif</span>
00495 <span class="preprocessor"></span>        <span class="keywordtype">bool</span> ReturnValue=k_Subtract(<a class="code" href="classipl_1_1CStdImage.html#a62">GetTImagePtr</a>(),Subtrahend.<a class="code" href="classipl_1_1CStdImage.html#a62">GetTImagePtr</a>());
00496         <span class="keywordflow">if</span> (ReturnValue==<span class="keyword">false</span>)
00497         {
00498                 ostringstream ost;
00499                 ost &lt;&lt; <span class="stringliteral">"CStdImage::Subtract() Failed"</span> &lt;&lt; IPLAddFileAndLine;
00500                 CError::ShowMessage(IPL_ERROR,ost.str().c_str());
00501 <span class="preprocessor">#ifdef IPL_ADD_HISTORY</span>
00502 <span class="preprocessor"></span>                <span class="comment">/* remove the history line added above */</span>
00503                 <a class="code" href="classipl_1_1CStdImage.html#m1">m_History</a>.<a class="code" href="classipl_1_1CText.html#a23">RemoveLastLine</a>();
00504 <span class="preprocessor">#endif</span>
00505 <span class="preprocessor"></span>        }
00506 <span class="preprocessor">#ifdef IPL_ADD_HISTORY</span>
00507 <span class="preprocessor"></span>        <span class="comment">/* end history appending (remove a leading '\t' character) */</span>
00508         k_IplStopHistoryMacro();
00509 <span class="preprocessor">#endif</span>
00510 <span class="preprocessor"></span>        <span class="keywordflow">return</span> ReturnValue;
00511 }
00512 
<a name="l00513"></a><a class="code" href="classipl_1_1CStdImage.html#a77">00513</a> <span class="keywordtype">bool</span> CStdImage::Multiply(<a class="code" href="classipl_1_1CStdImage.html">CStdImage</a> &amp;Factor)
00514 {
00515 <span class="preprocessor">#ifdef IPL_ADD_HISTORY</span>
00516 <span class="preprocessor"></span>        <span class="comment">/* add comment to history */</span>
00517         <a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTString.html">TString</a> History;
00518         k_InitString(&amp;History);
00519         k_SprintfString(&amp;History,<span class="stringliteral">"%sCStdImage::Multiply() multiplying a CStdImage"</span>,ipl_HistoryIndent);
00520         <a class="code" href="classipl_1_1CStdImage.html#m1">m_History</a>.<a class="code" href="classipl_1_1CText.html#a7">AppendIPL</a>(History.<a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTString.html#m2">pChars</a>);
00521         k_EmptyString(&amp;History);
00522         k_IplStartHistoryMacro();
00523 <span class="preprocessor">#endif</span>
00524 <span class="preprocessor"></span>        <span class="keywordtype">bool</span> ReturnValue=k_Multiply(<a class="code" href="classipl_1_1CStdImage.html#a62">GetTImagePtr</a>(),Factor.<a class="code" href="classipl_1_1CStdImage.html#a62">GetTImagePtr</a>());
00525         <span class="keywordflow">if</span> (ReturnValue==<span class="keyword">false</span>)
00526         {
00527                 ostringstream ost;
00528                 ost &lt;&lt; <span class="stringliteral">"CStdImage::Multiply() Failed"</span> &lt;&lt; IPLAddFileAndLine;
00529                 CError::ShowMessage(IPL_ERROR,ost.str().c_str());
00530 <span class="preprocessor">#ifdef IPL_ADD_HISTORY</span>
00531 <span class="preprocessor"></span>                <span class="comment">/* remove the history line added above */</span>
00532                 <a class="code" href="classipl_1_1CStdImage.html#m1">m_History</a>.<a class="code" href="classipl_1_1CText.html#a23">RemoveLastLine</a>();
00533 <span class="preprocessor">#endif</span>
00534 <span class="preprocessor"></span>        }
00535 <span class="preprocessor">#ifdef IPL_ADD_HISTORY</span>
00536 <span class="preprocessor"></span>        <span class="comment">/* end history appending (remove a leading '\t' character) */</span>
00537         k_IplStopHistoryMacro();
00538 <span class="preprocessor">#endif</span>
00539 <span class="preprocessor"></span>        <span class="keywordflow">return</span> ReturnValue;
00540 }
00541 
<a name="l00542"></a><a class="code" href="classipl_1_1CStdImage.html#a78">00542</a> <span class="keywordtype">bool</span> CStdImage::CopyDisplace(<span class="keywordtype">int</span> dx, <span class="keywordtype">int</span> dy)
00543 {
00544 <span class="preprocessor">#ifdef IPL_ADD_HISTORY</span>
00545 <span class="preprocessor"></span>        <span class="comment">/* add comment to history */</span>
00546         <a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTString.html">TString</a> History;
00547         k_InitString(&amp;History);
00548         k_SprintfString(&amp;History,<span class="stringliteral">"%sCStdImage::CopyDisplace() dx=%d dy=%d"</span>,ipl_HistoryIndent,dx,dy);
00549         <a class="code" href="classipl_1_1CStdImage.html#m1">m_History</a>.<a class="code" href="classipl_1_1CText.html#a7">AppendIPL</a>(History.<a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTString.html#m2">pChars</a>);
00550         k_EmptyString(&amp;History);
00551         k_IplStartHistoryMacro();
00552 <span class="preprocessor">#endif</span>
00553 <span class="preprocessor"></span>        <span class="keywordtype">bool</span> ReturnValue=k_CopyDisplace(dx,dy,&amp;<a class="code" href="classipl_1_1CStdImage.html#n0">m_Image</a>);
00554         <span class="keywordflow">if</span> (ReturnValue==<span class="keyword">false</span>)
00555         {
00556                 ostringstream ost;
00557                 ost &lt;&lt; <span class="stringliteral">"CStdImage::CopyDisplace() Failed"</span> &lt;&lt; IPLAddFileAndLine;
00558                 CError::ShowMessage(IPL_ERROR,ost.str().c_str());
00559 <span class="preprocessor">#ifdef IPL_ADD_HISTORY</span>
00560 <span class="preprocessor"></span>                <span class="comment">/* remove the history line added above */</span>
00561                 <a class="code" href="classipl_1_1CStdImage.html#m1">m_History</a>.<a class="code" href="classipl_1_1CText.html#a23">RemoveLastLine</a>();
00562 <span class="preprocessor">#endif</span>
00563 <span class="preprocessor"></span>        }
00564 <span class="preprocessor">#ifdef IPL_ADD_HISTORY</span>
00565 <span class="preprocessor"></span>        <span class="comment">/* end history appending (remove a leading '\t' character) */</span>
00566         k_IplStopHistoryMacro();
00567 <span class="preprocessor">#endif</span>
00568 <span class="preprocessor"></span>        <span class="keywordflow">return</span> ReturnValue;
00569 }
00570 
<a name="l00571"></a><a class="code" href="classipl_1_1CStdImage.html#a79">00571</a> <span class="keywordtype">bool</span> CStdImage::CutOrZeroPad(<a class="code" href="classipl_1_1CStdImage.html">CStdImage</a> &amp;Source)
00572 {
00573 <span class="preprocessor">#ifdef IPL_ADD_HISTORY</span>
00574 <span class="preprocessor"></span>        <span class="comment">/* add comment to history */</span>
00575         <a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTString.html">TString</a> History;
00576         k_InitString(&amp;History);
00577         k_SprintfString(&amp;History,<span class="stringliteral">"%sCStdImage::CutOrZeroPad() Source image file info: %s"</span>,
00578                 ipl_HistoryIndent,Source.<a class="code" href="classipl_1_1CStdImage.html#a14">GetPathAndFileName</a>());
00579         <a class="code" href="classipl_1_1CStdImage.html#m1">m_History</a>.<a class="code" href="classipl_1_1CText.html#a7">AppendIPL</a>(History.<a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTString.html#m2">pChars</a>);
00580         k_EmptyString(&amp;History);
00581         k_IplStartHistoryMacro();
00582 <span class="preprocessor">#endif</span>
00583 <span class="preprocessor"></span>        <span class="keywordtype">bool</span> ReturnValue=k_CutOrZeroPad(<a class="code" href="classipl_1_1CStdImage.html#a62">GetTImagePtr</a>(),Source.<a class="code" href="classipl_1_1CStdImage.html#a62">GetTImagePtr</a>());
00584         <span class="keywordflow">if</span> (ReturnValue==<span class="keyword">false</span>)
00585         {
00586                 ostringstream ost;
00587                 ost &lt;&lt; <span class="stringliteral">"CStdImage::CutOrZeroPad() Failed"</span> &lt;&lt; IPLAddFileAndLine;
00588                 CError::ShowMessage(IPL_ERROR,ost.str().c_str());
00589 <span class="preprocessor">#ifdef IPL_ADD_HISTORY</span>
00590 <span class="preprocessor"></span>                <span class="comment">/* remove the history line added above */</span>
00591                 <a class="code" href="classipl_1_1CStdImage.html#m1">m_History</a>.<a class="code" href="classipl_1_1CText.html#a23">RemoveLastLine</a>();
00592 <span class="preprocessor">#endif</span>
00593 <span class="preprocessor"></span>        }
00594 <span class="preprocessor">#ifdef IPL_ADD_HISTORY</span>
00595 <span class="preprocessor"></span>        <span class="comment">/* end history appending (remove a leading '\t' character) */</span>
00596         k_IplStopHistoryMacro();
00597 <span class="preprocessor">#endif</span>
00598 <span class="preprocessor"></span>        <span class="keywordflow">return</span> ReturnValue;
00599 }
00600 
<a name="l00601"></a><a class="code" href="classipl_1_1CStdImage.html#a80">00601</a> <span class="keywordtype">bool</span> CStdImage::Copy(<a class="code" href="classipl_1_1CIntImage.html">CIntImage</a> &amp;Source)
00602 {
00603 <span class="preprocessor">#ifdef IPL_ADD_HISTORY</span>
00604 <span class="preprocessor"></span>        <span class="comment">/* add comment to history */</span>
00605         <a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTString.html">TString</a> History;
00606         k_InitString(&amp;History);
00607         k_SprintfString(&amp;History,<span class="stringliteral">"%sCStdImage::Copy() source: CIntImage"</span>,ipl_HistoryIndent);
00608         <a class="code" href="classipl_1_1CStdImage.html#m1">m_History</a>.<a class="code" href="classipl_1_1CText.html#a7">AppendIPL</a>(History.<a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTString.html#m2">pChars</a>);
00609         k_EmptyString(&amp;History);
00610         k_IplStartHistoryMacro();
00611 <span class="preprocessor">#endif</span>
00612 <span class="preprocessor"></span>        <span class="keywordtype">bool</span> ReturnValue=k_CopyFromInt(<a class="code" href="classipl_1_1CStdImage.html#a62">GetTImagePtr</a>(),Source.<a class="code" href="classipl_1_1CIntImage.html#a43">GetTIntImagePtr</a>());
00613         <span class="keywordflow">if</span> (ReturnValue==<span class="keyword">false</span>)
00614         {
00615                 ostringstream ost;
00616                 ost &lt;&lt; <span class="stringliteral">"CStdImage::Copy() Failed copying CIntImage"</span> &lt;&lt; IPLAddFileAndLine;
00617                 CError::ShowMessage(IPL_ERROR,ost.str().c_str());
00618         }
00619 <span class="preprocessor">#ifdef IPL_ADD_HISTORY</span>
00620 <span class="preprocessor"></span>        <span class="comment">/* end history appending (remove a leading '\t' character) */</span>
00621         k_IplStopHistoryMacro();
00622         <span class="comment">/* remove the history line added above */</span>
00623         <a class="code" href="classipl_1_1CStdImage.html#m1">m_History</a>.<a class="code" href="classipl_1_1CText.html#a23">RemoveLastLine</a>();
00624 <span class="preprocessor">#endif</span>
00625 <span class="preprocessor"></span>        <span class="keywordflow">return</span> ReturnValue;
00626 }
00627 
<a name="l00628"></a><a class="code" href="classipl_1_1CStdImage.html#a81">00628</a> <span class="keywordtype">bool</span> CStdImage::Copy(<a class="code" href="classipl_1_1CFloatImage.html">CFloatImage</a> &amp;Source)
00629 {
00630 <span class="preprocessor">#ifdef IPL_ADD_HISTORY</span>
00631 <span class="preprocessor"></span>        <span class="comment">/* add comment to history */</span>
00632         <a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTString.html">TString</a> History;
00633         k_InitString(&amp;History);
00634         k_SprintfString(&amp;History,<span class="stringliteral">"%sCStdImage::Copy() source: CFloatImage"</span>,ipl_HistoryIndent);
00635         <a class="code" href="classipl_1_1CStdImage.html#m1">m_History</a>.<a class="code" href="classipl_1_1CText.html#a7">AppendIPL</a>(History.<a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTString.html#m2">pChars</a>);
00636         k_EmptyString(&amp;History);
00637         k_IplStartHistoryMacro();
00638 <span class="preprocessor">#endif</span>
00639 <span class="preprocessor"></span>        <span class="keywordtype">bool</span> ReturnValue=k_CopyFromFloat(<a class="code" href="classipl_1_1CStdImage.html#a62">GetTImagePtr</a>(),Source.<a class="code" href="classipl_1_1CFloatImage.html#a43">GetTFloatImagePtr</a>());
00640         <span class="keywordflow">if</span> (ReturnValue==<span class="keyword">false</span>)
00641         {
00642                 ostringstream ost;
00643                 ost &lt;&lt; <span class="stringliteral">"CStdImage::Copy() Failed copying CFloatImage"</span> &lt;&lt; IPLAddFileAndLine;
00644                 CError::ShowMessage(IPL_ERROR,ost.str().c_str());
00645         }
00646 <span class="preprocessor">#ifdef IPL_ADD_HISTORY</span>
00647 <span class="preprocessor"></span>        <span class="comment">/* end history appending (remove a leading '\t' character) */</span>
00648         k_IplStopHistoryMacro();
00649         <span class="comment">/* remove the history line added above */</span>
00650         <a class="code" href="classipl_1_1CStdImage.html#m1">m_History</a>.<a class="code" href="classipl_1_1CText.html#a23">RemoveLastLine</a>();
00651 <span class="preprocessor">#endif</span>
00652 <span class="preprocessor"></span>        <span class="keywordflow">return</span> ReturnValue;
00653 }
00654 
<a name="l00655"></a><a class="code" href="classipl_1_1CStdImage.html#a82">00655</a> <span class="keywordtype">bool</span> CStdImage::Copy(COMPLEXCHOISE mode, <a class="code" href="classipl_1_1CComplexImage.html">CComplexImage</a> &amp;Source)
00656 {
00657 <span class="preprocessor">#ifdef IPL_ADD_HISTORY</span>
00658 <span class="preprocessor"></span>        <span class="comment">/* add comment to history */</span>
00659         <a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTString.html">TString</a> History;
00660         k_InitString(&amp;History);
00661         k_SprintfString(&amp;History,<span class="stringliteral">"%sCStdImage::Copy() source: CFloatImage"</span>,ipl_HistoryIndent);
00662         <a class="code" href="classipl_1_1CStdImage.html#m1">m_History</a>.<a class="code" href="classipl_1_1CText.html#a7">AppendIPL</a>(History.<a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structTString.html#m2">pChars</a>);
00663         k_EmptyString(&amp;History);
00664         k_IplStartHistoryMacro();
00665 <span class="preprocessor">#endif</span>
00666 <span class="preprocessor"></span>        <span class="keywordtype">bool</span> ReturnValue=k_CopyFromComplex(mode,<a class="code" href="classipl_1_1CStdImage.html#a62">GetTImagePtr</a>(),Source.<a class="code" href="classipl_1_1CComplexImage.html#a52">GetTComplexImagePtr</a>());
00667         <span class="keywordflow">if</span> (ReturnValue==<span class="keyword">false</span>)
00668         {
00669                 ostringstream ost;
00670                 ost &lt;&lt; <span class="stringliteral">"CStdImage::Copy() Failed copying CComplexImage"</span> &lt;&lt; IPLAddFileAndLine;
00671                 CError::ShowMessage(IPL_ERROR,ost.str().c_str());
00672         }
00673 <span class="preprocessor">#ifdef IPL_ADD_HISTORY</span>
00674 <span class="preprocessor"></span>        <span class="comment">/* end history appending (remove a leading '\t' character) */</span>
00675         k_IplStopHistoryMacro();
00676         <span class="comment">/* remove the history line added above */</span>
00677         <a class="code" href="classipl_1_1CStdImage.html#m1">m_History</a>.<a class="code" href="classipl_1_1CText.html#a23">RemoveLastLine</a>();
00678 <span class="preprocessor">#endif</span>
00679 <span class="preprocessor"></span>        <span class="keywordflow">return</span> ReturnValue;
00680 }
00681 
<a name="l00682"></a><a class="code" href="classipl_1_1CStdImage.html#a83">00682</a> <span class="keywordtype">bool</span> CStdImage::DrawLine(<span class="keyword">const</span> <a class="code" href="classCPoint2D.html">CPoint2D&lt;int&gt;</a>&amp; Start, <span class="keyword">const</span> <a class="code" href="classCPoint2D.html">CPoint2D&lt;int&gt;</a>&amp; End, UINT32 Color)
00683 {
00684         <a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structT2DInt.html">T2DInt</a> P1,P2;
00685         P1.<a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structT2DInt.html#m0">x</a>=Start.<a class="code" href="classCPoint2D.html#a13">GetX</a>();
00686         P1.<a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structT2DInt.html#m1">y</a>=Start.<a class="code" href="classCPoint2D.html#a14">GetY</a>();
00687         P2.<a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structT2DInt.html#m0">x</a>=End.<a class="code" href="classCPoint2D.html#a13">GetX</a>();
00688         P2.<a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structT2DInt.html#m1">y</a>=End.<a class="code" href="classCPoint2D.html#a14">GetY</a>();
00689         <span class="keywordflow">return</span> k_DrawLine(P1,P2,Color,<a class="code" href="classipl_1_1CStdImage.html#a62">GetTImagePtr</a>());
00690 }
00691 
<a name="l00692"></a><a class="code" href="classipl_1_1CStdImage.html#a84">00692</a> <span class="keywordtype">bool</span> CStdImage::DrawCircle(<span class="keyword">const</span> <a class="code" href="classCPoint2D.html">CPoint2D&lt;int&gt;</a>&amp; Center, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> Radius, UINT32 Color)
00693 {
00694         <a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structT2DInt.html">T2DInt</a> P1;
00695         P1.<a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structT2DInt.html#m0">x</a>=Center.<a class="code" href="classCPoint2D.html#a13">GetX</a>();
00696         P1.<a class="codeRef" doxygen="ipl98_tag.cfg:../../c_doc/html/" href="../../c_doc/html/structT2DInt.html#m1">y</a>=Center.<a class="code" href="classCPoint2D.html#a14">GetY</a>();
00697         <span class="keywordflow">return</span> k_DrawCircle(P1,Radius,Color,<a class="code" href="classipl_1_1CStdImage.html#a62">GetTImagePtr</a>());
00698 }
00699 
00700 } <span class="comment">// end ipl namespace</span>
</pre></div><!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html>

<head>
<meta name="GENERATOR" content="Microsoft FrontPage 4.0">
<title>Tag</title>
<base target="_top">
</head>

<body bgcolor="#FFFFFF">

<hr>

<p align="right"><font size="2"><em>Updated <!--webbot bot="Timestamp" s-type="EDITED" s-format="%d. %B %Y %H:%M" startspan -->21. juli 2002 12:29<!--webbot bot="Timestamp" endspan i-checksum="38834" --> by
<a href="http://www.mip.sdu.dk/~edr/">René Dencker
Eriksen</a>(<a href="mailto:edr@mip.sdu.dk">edr@mip.sdu.dk</a>)</em></font></p>
</body>
</html>
